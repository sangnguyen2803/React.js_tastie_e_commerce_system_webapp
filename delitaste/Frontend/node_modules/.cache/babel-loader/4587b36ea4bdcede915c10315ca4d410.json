{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/MerchantDashboard/DashboardFeatures/MDMarketing/VoucherHandlers/CreateVoucher.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Formik, Form, Field } from \"formik\";\nimport \"./VoucherHandlers.scss\";\nimport locations from \"assets/json_location/locations\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHome, faBuilding, faAddressBook, faStore, faShoppingBasket } from \"@fortawesome/fontawesome-free-solid\";\nimport ReactMapGl, { Source, Layer, Marker, Popup } from \"react-map-gl\";\nimport { faMapMarkedAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport SwitchSelector from \"react-switch-selector\";\nimport { addDiscountAPI, addPromotionAPI } from \"store/actions/ProviderAction/ProviderAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst optionSwitcher = [{\n  label: \"Store promotion\",\n  value: 0,\n  selectedBackgroundColor: \"rgb(148, 0, 0);\"\n}, {\n  label: \"Product promotion\",\n  value: 1,\n  selectedBackgroundColor: \"rgb(148, 0, 0);\"\n}];\nconst initialValues = {\n  //  provider_id: 1000001,\n  promotion_code: \"\",\n  promotion_name: \"\",\n  start_at: new Date(),\n  expire_at: new Date(),\n  promotion_value: 0,\n  min_order_value: \"2.00\",\n  max_discount_value: \"50.00\",\n  payment_method_id: 1,\n  limited_offer: 1,\n  weekly_usage_limit: 1,\n  promotion_description: \"\",\n  delivery_mode: 1\n};\nconst selectedTypeStyle = {\n  backgroundColor: \"#610000\",\n  border: \"1px solid #500000\",\n  color: \"white\"\n};\n\nfunction CreateVoucher(props) {\n  _s();\n\n  const [promotionOption, setPromotionOption] = useState(false);\n  const initialSelectedIndex = optionSwitcher.findIndex(({\n    value\n  }) => value === 0);\n\n  const onChange = newValue => {\n    setPromotionOption(newValue);\n  };\n\n  const handleSubmitForm = async values => {\n    var _props$user2;\n\n    if (promotionOption === 1) {\n      var _props$user;\n\n      const data = {\n        provider_id: (_props$user = props.user) === null || _props$user === void 0 ? void 0 : _props$user.provider_id,\n        discount_name: values.promotion_name,\n        discount_value: parseFloat(values.promotion_value),\n        discount_description: values.promotion_description,\n        start_at: values.start_at,\n        expire_at: values.expire_at\n      };\n      const status = await props.addDiscountAPI(data);\n      if (status) props.setVisible(false);\n      return;\n    }\n\n    const data = {\n      provider_id: (_props$user2 = props.user) === null || _props$user2 === void 0 ? void 0 : _props$user2.provider_id,\n      promotion_code: values.promotion_code,\n      promotion_name: values.promotion_name,\n      promotion_value: parseFloat(values.promotion_value),\n      promotion_description: values.promotion_description,\n      min_order_value: values.min_order_value,\n      max_discount_value: values.max_discount_value,\n      start_at: values.start_at,\n      expire_at: values.expire_at,\n      payment_method_id: values.payment_method_id,\n      limited_offer: parseInt(values.limited_offer),\n      weekly_usage_limit_per_user: parseInt(values.weekly_usage_limit),\n      delivery_mode: parseInt(values.delivery_mode),\n      update_at: new Date()\n    };\n    const status = await props.addPromotionAPI(data);\n    console.log(status);\n    if (status) props.setVisible(false);\n    return;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      openModal: props.visible,\n      closeModal: () => {\n        props.setVisible(false);\n      },\n      title: \"Create promotion\",\n      width: 50,\n      height: 650,\n      padding: \"5px 50px\",\n      transparent: \"30%\",\n      hideHeader: true,\n      children: /*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: initialValues,\n        validateOnChange: false,\n        children: formikProps => {\n          const {\n            values,\n            errors,\n            touched\n          } = formikProps;\n          return /*#__PURE__*/_jsxDEV(Form, {\n            className: \"modal-form-input-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                style: {\n                  marginBottom: 5,\n                  marginTop: 10\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Type:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"voucher-type-box-wrapper\",\n                  style: {\n                    width: 280\n                  },\n                  children: /*#__PURE__*/_jsxDEV(SwitchSelector, {\n                    onChange: onChange,\n                    options: optionSwitcher,\n                    initialSelectedIndex: initialSelectedIndex,\n                    backgroundColor: \"#E6E6E6\",\n                    fontColor: \"#2C2C2C\",\n                    selectedFontColor: \"#E6E6E6\",\n                    fontSize: 13,\n                    wrapperBorderRadius: 0,\n                    optionBorderRadius: 0,\n                    width: 80\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Voucher name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"promotion_name\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 19\n              }, this), promotionOption !== 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Voucher code:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"promotion_code\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Usage period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"date\",\n                  name: \"start_at\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher code\",\n                  style: {\n                    width: \"calc(48% - 75px)\",\n                    marginRight: 5\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 21\n                }, this), \"\\u2014\", /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"date\",\n                  name: \"expire_at\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher code\",\n                  style: {\n                    width: \"calc(48% - 75px)\",\n                    marginLeft: 5\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Discount amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"promotion_value\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Discount ammount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), promotionOption !== 1 && /*#__PURE__*/_jsxDEV(Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-input-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"modal-input-label\",\n                    children: \"Minimum basket discount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"text\",\n                    name: \"min_order_value\",\n                    className: \"modal-input-field\",\n                    placeholder: \"Discount ammount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-input-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"modal-input-label\",\n                    children: \"Maximum discount amount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"text\",\n                    name: \"max_discount_value\",\n                    className: \"modal-input-field\",\n                    placeholder: \"Discount ammount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-input-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"modal-input-label\",\n                    children: \"Usage quantity:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"text\",\n                    name: \"limited_offer\",\n                    className: \"modal-input-field\",\n                    placeholder: \"Litmited offer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Weekly usage limit:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"weekly_usage_limit\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Weekly usage limit per customer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                style: promotionOption === 1 ? {\n                  marginBottom: 190\n                } : {},\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  className: \"modal-textarea-field\",\n                  as: \"textarea\",\n                  name: \"promotion_description\",\n                  placeholder: \"Description about your product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                width: 100,\n                mgTop: 5,\n                float: \"center\",\n                mgBottom: 15,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  color: \"white\",\n                  bgColor: \"#101010\",\n                  justifyContent: \"center\",\n                  gap: \"10px\",\n                  width: 120,\n                  height: 35,\n                  label: \"Create voucher\",\n                  onClick: () => handleSubmitForm(values)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreateVoucher, \"JG8x2wZ8Yz+29w5jMtJ7uc8zW8I=\");\n\n_c = CreateVoucher;\nCreateVoucher.propTypes = {\n  user: PropTypes.object.isRequired,\n  addDiscountAPI: PropTypes.func.isRequired,\n  addPromotionAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  addDiscountAPI,\n  addPromotionAPI\n})(CreateVoucher));\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateVoucher\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/MerchantDashboard/DashboardFeatures/MDMarketing/VoucherHandlers/CreateVoucher.js"],"names":["React","Fragment","useState","useEffect","Button","ButtonGroup","withRouter","connect","PropTypes","Formik","Form","Field","locations","FontAwesomeIcon","faHome","faBuilding","faAddressBook","faStore","faShoppingBasket","ReactMapGl","Source","Layer","Marker","Popup","faMapMarkedAlt","Modal","SwitchSelector","addDiscountAPI","addPromotionAPI","optionSwitcher","label","value","selectedBackgroundColor","initialValues","promotion_code","promotion_name","start_at","Date","expire_at","promotion_value","min_order_value","max_discount_value","payment_method_id","limited_offer","weekly_usage_limit","promotion_description","delivery_mode","selectedTypeStyle","backgroundColor","border","color","CreateVoucher","props","promotionOption","setPromotionOption","initialSelectedIndex","findIndex","onChange","newValue","handleSubmitForm","values","data","provider_id","user","discount_name","discount_value","parseFloat","discount_description","status","setVisible","parseInt","weekly_usage_limit_per_user","update_at","console","log","visible","formikProps","errors","touched","marginBottom","marginTop","width","marginRight","marginLeft","propTypes","object","isRequired","func","mapStateToProps","state","UserReducer"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Formik, Form, Field } from \"formik\";\nimport \"./VoucherHandlers.scss\";\nimport locations from \"assets/json_location/locations\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faHome,\n  faBuilding,\n  faAddressBook,\n  faStore,\n  faShoppingBasket,\n} from \"@fortawesome/fontawesome-free-solid\";\n\nimport ReactMapGl, { Source, Layer, Marker, Popup } from \"react-map-gl\";\nimport { faMapMarkedAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport SwitchSelector from \"react-switch-selector\";\nimport {\n  addDiscountAPI,\n  addPromotionAPI,\n} from \"store/actions/ProviderAction/ProviderAction\";\n\nconst optionSwitcher = [\n  {\n    label: \"Store promotion\",\n    value: 0,\n    selectedBackgroundColor: \"rgb(148, 0, 0);\",\n  },\n  {\n    label: \"Product promotion\",\n    value: 1,\n    selectedBackgroundColor: \"rgb(148, 0, 0);\",\n  },\n];\nconst initialValues = {\n  //  provider_id: 1000001,\n  promotion_code: \"\",\n  promotion_name: \"\",\n  start_at: new Date(),\n  expire_at: new Date(),\n  promotion_value: 0,\n  min_order_value: \"2.00\",\n  max_discount_value: \"50.00\",\n  payment_method_id: 1,\n  limited_offer: 1,\n  weekly_usage_limit: 1,\n  promotion_description: \"\",\n  delivery_mode: 1,\n};\nconst selectedTypeStyle = {\n  backgroundColor: \"#610000\",\n  border: \"1px solid #500000\",\n  color: \"white\",\n};\nfunction CreateVoucher(props) {\n  const [promotionOption, setPromotionOption] = useState(false);\n  const initialSelectedIndex = optionSwitcher.findIndex(\n    ({ value }) => value === 0\n  );\n  const onChange = (newValue) => {\n    setPromotionOption(newValue);\n  };\n  const handleSubmitForm = async (values) => {\n    if (promotionOption === 1) {\n      const data = {\n        provider_id: props.user?.provider_id,\n        discount_name: values.promotion_name,\n        discount_value: parseFloat(values.promotion_value),\n        discount_description: values.promotion_description,\n        start_at: values.start_at,\n        expire_at: values.expire_at,\n      };\n      const status = await props.addDiscountAPI(data);\n      if (status) props.setVisible(false);\n      return;\n    }\n    const data = {\n      provider_id: props.user?.provider_id,\n      promotion_code: values.promotion_code,\n      promotion_name: values.promotion_name,\n      promotion_value: parseFloat(values.promotion_value),\n      promotion_description: values.promotion_description,\n      min_order_value: values.min_order_value,\n      max_discount_value: values.max_discount_value,\n      start_at: values.start_at,\n      expire_at: values.expire_at,\n      payment_method_id: values.payment_method_id,\n      limited_offer: parseInt(values.limited_offer),\n      weekly_usage_limit_per_user: parseInt(values.weekly_usage_limit),\n      delivery_mode: parseInt(values.delivery_mode),\n      update_at: new Date(),\n    };\n    const status = await props.addPromotionAPI(data);\n    console.log(status);\n    if (status) props.setVisible(false);\n    return;\n  };\n  return (\n    <Fragment>\n      <Modal\n        openModal={props.visible}\n        closeModal={() => {\n          props.setVisible(false);\n        }}\n        title={\"Create promotion\"}\n        width={50}\n        height={650}\n        padding=\"5px 50px\"\n        transparent=\"30%\"\n        hideHeader={true}\n      >\n        <Formik initialValues={initialValues} validateOnChange={false}>\n          {(formikProps) => {\n            const { values, errors, touched } = formikProps;\n            return (\n              <Form className=\"modal-form-input-wrapper\">\n                <Fragment>\n                  <div\n                    className=\"modal-input-row\"\n                    style={{\n                      marginBottom: 5,\n                      marginTop: 10,\n                    }}\n                  >\n                    <span className=\"modal-input-label\">Type:</span>\n                    <div\n                      className=\"voucher-type-box-wrapper\"\n                      style={{ width: 280 }}\n                    >\n                      <SwitchSelector\n                        onChange={onChange}\n                        options={optionSwitcher}\n                        initialSelectedIndex={initialSelectedIndex}\n                        backgroundColor={\"#E6E6E6\"}\n                        fontColor={\"#2C2C2C\"}\n                        selectedFontColor={\"#E6E6E6\"}\n                        fontSize={13}\n                        wrapperBorderRadius={0}\n                        optionBorderRadius={0}\n                        width={80}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">Voucher name:</span>\n                    <Field\n                      type=\"text\"\n                      name=\"promotion_name\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Voucher name\"}\n                    />\n                  </div>\n                  {promotionOption !== 1 && (\n                    <div className=\"modal-input-row\">\n                      <span className=\"modal-input-label\">Voucher code:</span>\n                      <Field\n                        type=\"text\"\n                        name=\"promotion_code\"\n                        className=\"modal-input-field\"\n                        placeholder={\"Voucher code\"}\n                      />\n                    </div>\n                  )}\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">Usage period:</span>\n                    <Field\n                      type=\"date\"\n                      name=\"start_at\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Voucher code\"}\n                      style={{ width: \"calc(48% - 75px)\", marginRight: 5 }}\n                    />\n                    —\n                    <Field\n                      type=\"date\"\n                      name=\"expire_at\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Voucher code\"}\n                      style={{ width: \"calc(48% - 75px)\", marginLeft: 5 }}\n                    />\n                  </div>\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">Discount amount:</span>\n                    <Field\n                      type=\"text\"\n                      name=\"promotion_value\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Discount ammount\"}\n                    />\n                  </div>\n\n                  {promotionOption !== 1 && (\n                    <Fragment>\n                      <div className=\"modal-input-row\">\n                        <span className=\"modal-input-label\">\n                          Minimum basket discount:\n                        </span>\n                        <Field\n                          type=\"text\"\n                          name=\"min_order_value\"\n                          className=\"modal-input-field\"\n                          placeholder={\"Discount ammount\"}\n                        />\n                      </div>\n                      <div className=\"modal-input-row\">\n                        <span className=\"modal-input-label\">\n                          Maximum discount amount:\n                        </span>\n                        <Field\n                          type=\"text\"\n                          name=\"max_discount_value\"\n                          className=\"modal-input-field\"\n                          placeholder={\"Discount ammount\"}\n                        />\n                      </div>\n                      <div className=\"modal-input-row\">\n                        <span className=\"modal-input-label\">\n                          Usage quantity:\n                        </span>\n                        <Field\n                          type=\"text\"\n                          name=\"limited_offer\"\n                          className=\"modal-input-field\"\n                          placeholder={\"Litmited offer\"}\n                        />\n                      </div>\n                    </Fragment>\n                  )}\n\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">\n                      Weekly usage limit:\n                    </span>\n                    <Field\n                      type=\"text\"\n                      name=\"weekly_usage_limit\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Weekly usage limit per customer\"}\n                    />\n                  </div>\n                  <div\n                    className=\"modal-input-row\"\n                    style={promotionOption === 1 ? { marginBottom: 190 } : {}}\n                  >\n                    <span className=\"modal-input-label\">Description</span>\n                    <Field\n                      className=\"modal-textarea-field\"\n                      as=\"textarea\"\n                      name=\"promotion_description\"\n                      placeholder=\"Description about your product\"\n                    />\n                  </div>\n                  <ButtonGroup\n                    width={100}\n                    mgTop={5}\n                    float=\"center\"\n                    mgBottom={15}\n                  >\n                    <Button\n                      color={\"white\"}\n                      bgColor={\"#101010\"}\n                      justifyContent={\"center\"}\n                      gap={\"10px\"}\n                      width={120}\n                      height={35}\n                      label={\"Create voucher\"}\n                      onClick={() => handleSubmitForm(values)}\n                    />\n                  </ButtonGroup>\n                </Fragment>\n              </Form>\n            );\n          }}\n        </Formik>\n      </Modal>\n    </Fragment>\n  );\n}\n\nCreateVoucher.propTypes = {\n  user: PropTypes.object.isRequired,\n  addDiscountAPI: PropTypes.func.isRequired,\n  addPromotionAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n});\nexport default withRouter(\n  connect(mapStateToProps, { addDiscountAPI, addPromotionAPI })(CreateVoucher)\n);\n"]},"metadata":{},"sourceType":"module"}