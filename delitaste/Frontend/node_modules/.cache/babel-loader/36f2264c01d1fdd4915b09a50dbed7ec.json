{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/UserAdmission/SignUpForm/DetailSignUpForm/EmailVerification.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; //scss\n\nimport \"./EmailVerification.scss\";\nimport \"style/Common.scss\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUserCheck, faEnvelope, faChevronRight, faPencilAlt } from \"@fortawesome/fontawesome-free-solid\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { updateStepStyling, mapRegistrationForm, accountRegistrationAPI, sendEmailVerificationCodeAPI, checkEmailVerificationCodeAPI } from \"store/actions/UserAction/UserAction\";\nimport { setDialogBox } from \"store/actions/UIComponentAction/DialogBoxAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction EmailVerification(props) {\n  _s();\n\n  useEffect(() => {\n    async function sendVerifiedEmailCode() {\n      return await props.sendEmailVerificationCodeAPI(props.submittedFormData.formData.email);\n    }\n\n    sendVerifiedEmailCode();\n  }, []);\n  const [enableVerifyButton, setEnableVerifyButton] = useState(false);\n  const [email, setEmail] = useState(props.submittedFormData.email);\n  const [verifiedCode, setVerifiedcode] = useState({\n    digits: \"xxxxxx\"\n  });\n  const [changeEmailDialog, setChangeEmailDialog] = useState(false);\n\n  const collectVerifyDigits = e => {\n    e.target.value = !isNaN(e.target.value) ? e.target.value : \"\";\n    verifiedCode.digits = verifiedCode.digits.substr(0, parseInt(e.target.name)) + e.target.value + verifiedCode.digits.substr(parseInt(e.target.name) + 1);\n  };\n\n  const onSubmitEmailVerification = async e => {\n    e.preventDefault();\n    const email = props.submittedFormData.formData.email;\n    const verifyEmailToken = props.submittedFormData.verifiedEmailToken || localStorage.getItem(\"verified_email_token\") || \"\";\n    const code = verifiedCode.digits;\n    const formData = {\n      email,\n      verifyEmailToken,\n      code\n    };\n    const result = await props.checkEmailVerificationCodeAPI(formData);\n\n    if (result) {\n      await props.accountRegistrationAPI(props.submittedFormData.formData);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"verify-email-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-title-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        className: \"form-icon\",\n        icon: faUserCheck\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"form-title\",\n        children: \"Email Verification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"verify-code-description\",\n      children: \"A verification code was sent to your gmail.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"verify-code-description\",\n      children: [\" \", \"Please enter the 6-digit code already sent to your email\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: props.submittedFormData.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        className: \"change-email-icon\",\n        icon: faPencilAlt,\n        onClick: () => setChangeEmailDialog(prev => !prev)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), changeEmailDialog ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sign-up-email-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"label-sign-up form-label\",\n          style: {\n            width: \"15%\"\n          },\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"60%\",\n            height: \"30px\"\n          },\n          className: \"sign-up-email form-text-field\",\n          type: \"text\",\n          name: \"email\",\n          value: props.submittedFormData.email,\n          placeholder: \"Email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: \"25%\"\n          },\n          className: \"sub-square-button\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"verify-code-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-code-digit-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"0\",\n          type: \"text\",\n          className: \"numeric verify-digit-box\",\n          maxLength: 1,\n          onChange: e => collectVerifyDigits(e),\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-code-digit-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"1\",\n          type: \"text\",\n          className: \"numeric verify-digit-box\",\n          maxLength: 1,\n          onChange: e => collectVerifyDigits(e),\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-code-digit-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"2\",\n          type: \"text\",\n          className: \"numeric verify-digit-box\",\n          maxLength: 1,\n          onChange: e => collectVerifyDigits(e),\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-code-digit-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"3\",\n          type: \"text\",\n          className: \"numeric verify-digit-box\",\n          maxLength: 1,\n          onChange: e => collectVerifyDigits(e),\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-code-digit-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"4\",\n          type: \"text\",\n          className: \"numeric verify-digit-box\",\n          maxLength: 1,\n          onChange: e => collectVerifyDigits(e),\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-code-digit-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"5\",\n          type: \"text\",\n          className: \"numeric verify-digit-box\",\n          maxLength: 1,\n          onChange: e => collectVerifyDigits(e),\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"resend-section\",\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        className: \"resend-code-icon\",\n        icon: faEnvelope\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resend-verify-code\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          children: \"Resend verify code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-form-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-form btn-verification-position\",\n        onClick: e => onSubmitEmailVerification(e),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"none-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), \"Verify Email\", /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: \"chevron-icon\",\n          icon: faChevronRight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EmailVerification, \"BIEPJnhfxJi8ChBjFxffQ0j/jRU=\");\n\n_c = EmailVerification;\nEmailVerification.propTypes = {\n  updateStepStyling: PropTypes.func.isRequired,\n  mapRegistrationForm: PropTypes.func.isRequired,\n  accountRegistrationAPI: PropTypes.func.isRequired,\n  sendEmailVerificationCodeAPI: PropTypes.func.isRequired,\n  submittedFormData: PropTypes.object.isRequired,\n  setDialogBox: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  submittedFormData: state.UserReducer\n});\n\nexport default connect(mapStateToProps, {\n  mapRegistrationForm,\n  updateStepStyling,\n  accountRegistrationAPI,\n  sendEmailVerificationCodeAPI,\n  checkEmailVerificationCodeAPI,\n  setDialogBox\n})(EmailVerification);\n\nvar _c;\n\n$RefreshReg$(_c, \"EmailVerification\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/UserAdmission/SignUpForm/DetailSignUpForm/EmailVerification.js"],"names":["React","useState","useEffect","FontAwesomeIcon","faUserCheck","faEnvelope","faChevronRight","faPencilAlt","connect","PropTypes","updateStepStyling","mapRegistrationForm","accountRegistrationAPI","sendEmailVerificationCodeAPI","checkEmailVerificationCodeAPI","setDialogBox","EmailVerification","props","sendVerifiedEmailCode","submittedFormData","formData","email","enableVerifyButton","setEnableVerifyButton","setEmail","verifiedCode","setVerifiedcode","digits","changeEmailDialog","setChangeEmailDialog","collectVerifyDigits","e","target","value","isNaN","substr","parseInt","name","onSubmitEmailVerification","preventDefault","verifyEmailToken","verifiedEmailToken","localStorage","getItem","code","result","prev","width","height","propTypes","func","isRequired","object","mapStateToProps","state","UserReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n//scss\nimport \"./EmailVerification.scss\";\nimport \"style/Common.scss\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faUserCheck,\n  faEnvelope,\n  faChevronRight,\n  faPencilAlt,\n} from \"@fortawesome/fontawesome-free-solid\";\n\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {\n  updateStepStyling,\n  mapRegistrationForm,\n  accountRegistrationAPI,\n  sendEmailVerificationCodeAPI,\n  checkEmailVerificationCodeAPI,\n} from \"store/actions/UserAction/UserAction\";\nimport { setDialogBox } from \"store/actions/UIComponentAction/DialogBoxAction\";\n\nfunction EmailVerification(props) {\n  useEffect(() => {\n    async function sendVerifiedEmailCode() {\n      return await props.sendEmailVerificationCodeAPI(\n        props.submittedFormData.formData.email\n      );\n    }\n    sendVerifiedEmailCode();\n  }, []);\n  const [enableVerifyButton, setEnableVerifyButton] = useState(false);\n  const [email, setEmail] = useState(props.submittedFormData.email);\n  const [verifiedCode, setVerifiedcode] = useState({ digits: \"xxxxxx\" });\n  const [changeEmailDialog, setChangeEmailDialog] = useState(false);\n\n  const collectVerifyDigits = (e) => {\n    e.target.value = !isNaN(e.target.value) ? e.target.value : \"\";\n    verifiedCode.digits =\n      verifiedCode.digits.substr(0, parseInt(e.target.name)) +\n      e.target.value +\n      verifiedCode.digits.substr(parseInt(e.target.name) + 1);\n  };\n\n  const onSubmitEmailVerification = async (e) => {\n    e.preventDefault();\n    const email = props.submittedFormData.formData.email;\n    const verifyEmailToken =\n      props.submittedFormData.verifiedEmailToken ||\n      localStorage.getItem(\"verified_email_token\") ||\n      \"\";\n    const code = verifiedCode.digits;\n    const formData = {\n      email,\n      verifyEmailToken,\n      code,\n    };\n    const result = await props.checkEmailVerificationCodeAPI(formData);\n    if (result) {\n      await props.accountRegistrationAPI(props.submittedFormData.formData);\n    }\n  };\n\n  return (\n    <div className=\"verify-email-section\">\n      <div className=\"form-title-wrapper\">\n        <FontAwesomeIcon className=\"form-icon\" icon={faUserCheck} />\n        <span className=\"form-title\">Email Verification</span>\n      </div>\n      <span className=\"verify-code-description\">\n        A verification code was sent to your gmail.\n      </span>\n      <span className=\"verify-code-description\">\n        {\" \"}\n        Please enter the 6-digit code already sent to your email{\" \"}\n        <strong>{props.submittedFormData.email}</strong>{\" \"}\n        <FontAwesomeIcon\n          className=\"change-email-icon\"\n          icon={faPencilAlt}\n          onClick={() => setChangeEmailDialog((prev) => !prev)}\n        />\n      </span>\n\n      {changeEmailDialog ? (\n        <>\n          <div className=\"sign-up-email-wrapper\">\n            <div className=\"label-sign-up form-label\" style={{ width: \"15%\" }}>\n              Email\n            </div>\n            <input\n              style={{ width: \"60%\", height: \"30px\" }}\n              className=\"sign-up-email form-text-field\"\n              type=\"text\"\n              name=\"email\"\n              value={props.submittedFormData.email}\n              placeholder=\"Email\"\n              required\n            />\n            <button style={{ width: \"25%\" }} className=\"sub-square-button\">\n              Update\n            </button>\n          </div>\n        </>\n      ) : (\n        <span></span>\n      )}\n\n      <div className=\"verify-code-wrapper\">\n        <div className=\"verify-code-digit-wrapper\">\n          <input\n            name=\"0\"\n            type=\"text\"\n            className=\"numeric verify-digit-box\"\n            maxLength={1}\n            onChange={(e) => collectVerifyDigits(e)}\n            autoComplete=\"off\"\n          />\n        </div>\n        <div className=\"verify-code-digit-wrapper\">\n          <input\n            name=\"1\"\n            type=\"text\"\n            className=\"numeric verify-digit-box\"\n            maxLength={1}\n            onChange={(e) => collectVerifyDigits(e)}\n            autoComplete=\"off\"\n          />\n        </div>\n        <div className=\"verify-code-digit-wrapper\">\n          <input\n            name=\"2\"\n            type=\"text\"\n            className=\"numeric verify-digit-box\"\n            maxLength={1}\n            onChange={(e) => collectVerifyDigits(e)}\n            autoComplete=\"off\"\n          />\n        </div>\n        <div className=\"verify-code-digit-wrapper\">\n          <input\n            name=\"3\"\n            type=\"text\"\n            className=\"numeric verify-digit-box\"\n            maxLength={1}\n            onChange={(e) => collectVerifyDigits(e)}\n            autoComplete=\"off\"\n          />\n        </div>\n        <div className=\"verify-code-digit-wrapper\">\n          <input\n            name=\"4\"\n            type=\"text\"\n            className=\"numeric verify-digit-box\"\n            maxLength={1}\n            onChange={(e) => collectVerifyDigits(e)}\n            autoComplete=\"off\"\n          />\n        </div>\n        <div className=\"verify-code-digit-wrapper\">\n          <input\n            name=\"5\"\n            type=\"text\"\n            className=\"numeric verify-digit-box\"\n            maxLength={1}\n            onChange={(e) => collectVerifyDigits(e)}\n            autoComplete=\"off\"\n          />\n        </div>\n      </div>\n\n      <div className=\"resend-section\">\n        <FontAwesomeIcon className=\"resend-code-icon\" icon={faEnvelope} />\n        <div className=\"resend-verify-code\">\n          <a>Resend verify code</a>\n        </div>\n      </div>\n\n      <div className=\"btn-form-wrapper\">\n        <button\n          className=\"btn-form btn-verification-position\"\n          onClick={(e) => onSubmitEmailVerification(e)}\n        >\n          <div className=\"none-icon\"></div>\n          Verify Email\n          <FontAwesomeIcon className=\"chevron-icon\" icon={faChevronRight} />\n        </button>\n      </div>\n    </div>\n  );\n}\nEmailVerification.propTypes = {\n  updateStepStyling: PropTypes.func.isRequired,\n  mapRegistrationForm: PropTypes.func.isRequired,\n  accountRegistrationAPI: PropTypes.func.isRequired,\n  sendEmailVerificationCodeAPI: PropTypes.func.isRequired,\n  submittedFormData: PropTypes.object.isRequired,\n  setDialogBox: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  submittedFormData: state.UserReducer,\n});\nexport default connect(mapStateToProps, {\n  mapRegistrationForm,\n  updateStepStyling,\n  accountRegistrationAPI,\n  sendEmailVerificationCodeAPI,\n  checkEmailVerificationCodeAPI,\n  setDialogBox,\n})(EmailVerification);\n"]},"metadata":{},"sourceType":"module"}