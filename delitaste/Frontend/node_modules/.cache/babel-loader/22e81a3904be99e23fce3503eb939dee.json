{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/OrderCheckout/OrderReview/OrderReview.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport { calculateSubTotalPrice } from \"utils/BusinessUtils\";\nimport { submitOrderCheckoutAPI, submitOrderPickupCheckoutAPI, submitOrderItemAPI } from \"store/actions/OrderAction/OrderAction\";\nimport \"./OrderReview.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OrderReview(props) {\n  _s();\n\n  var _props$deliveryFee, _parseFloat;\n\n  const {\n    user,\n    orderForm,\n    setOrderForm,\n    submitOrderCheckoutAPI,\n    submitOrderPickupCheckoutAPI,\n    submitOrderItemAPI,\n    deliveryOption\n  } = props;\n  const [subTotal, setSubTotal] = useState(0);\n  const [tip, setTip] = useState(0);\n  const [tipOption, setTipOption] = useState(1);\n  const tipOptionStyle = {\n    backgroundColor: \"#2c2c2c\",\n    color: \"#ffffff\"\n  };\n\n  const submitOrderForm = async () => {\n    var _user$userCart, _user$userCart$cart, _;\n\n    const {\n      uid\n    } = props.match.params;\n    console.log(deliveryOption);\n    setOrderForm(prevState => ({ ...prevState,\n      customer_id: uid,\n      tips: tip || 0\n    }));\n    console.log(orderForm);\n    var code;\n\n    if (deliveryOption === 0) {\n      code = await submitOrderCheckoutAPI(orderForm);\n    } else {\n      code = await submitOrderPickupCheckoutAPI(orderForm);\n    }\n\n    const cartItem = (_user$userCart = user.userCart) === null || _user$userCart === void 0 ? void 0 : (_user$userCart$cart = _user$userCart.cart) === null || _user$userCart$cart === void 0 ? void 0 : _user$userCart$cart.map(item => {\n      return {\n        productName: item.product_name,\n        quantity: item.quantity,\n        price: item.product_price,\n        specialInstruction: item.note || \"\"\n      };\n    }); //socket params\n\n    const customerData = {\n      name: `${user.profile.first_name} ${user.profile.last_name}`,\n      phone: orderForm.customer_phone,\n      address: orderForm.delivery_address,\n      user_id: orderForm.customer_id,\n      location: {\n        latitude: parseFloat(user.currentAddress.latitude),\n        longitude: parseFloat(user.currentAddress.longitude)\n      }\n    };\n    const providerData = {\n      name: user.userCart.provider_name,\n      address: \"\",\n      provider_id: user.userCart.provider_id,\n      location: {\n        latitude: parseFloat(user.userCart.latitude),\n        longitude: parseFloat(user.userCart.longitude)\n      }\n    };\n    const pricing = {\n      delivery_fee: deliveryOption === 0 ? orderForm.delivery_fee : 0,\n      total: parseFloat(orderForm.subtotal - props.promotionAmount < 0 ? (_ = 0) === null || _ === void 0 ? void 0 : _.toFixed(2) : (orderForm.subtotal - props.promotionAmount).toFixed(2)),\n      // delivery_fee excluded\n      paymentMethod: orderForm.payment_method ? \"Cash\" : \"E-wallet | Credit card\",\n      deliveryMode: deliveryOption === 0 ? 1 : 2,\n      deliveryMethod: orderForm.delivery_method ? \"Standard\" : \"Schedule\",\n      scheduleTime: orderForm.schedule_time\n    };\n    if (!code) return;\n    console.log(pricing);\n    user.socket.emit(\"join-room\", code);\n    user.socket.emit(\"customer-submit-order\", cartItem, customerData, providerData, code, pricing);\n\n    if (code && uid !== -1) {\n      let submitOrder = await submitOrderItemAPI(uid, code);\n      if (submitOrder) props.history.push(`/order-tracking/${code}`);\n    }\n  };\n\n  useEffect(() => {\n    var _user$userCart2;\n\n    var result;\n    if (user.userCart.cart) result = calculateSubTotalPrice((_user$userCart2 = user.userCart) === null || _user$userCart2 === void 0 ? void 0 : _user$userCart2.cart);\n    setOrderForm(prevState => ({ ...prevState,\n      subtotal: result\n    }));\n    setSubTotal(result);\n  }, [user.userCart, setOrderForm]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"oc-order-review\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Subtotal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          children: subTotal && `$${subTotal === null || subTotal === void 0 ? void 0 : subTotal.toFixed(2)}` || \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        style: {\n          paddingBottom: \"10px\",\n          borderBottom: \"2px solid #D6D6D6\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Delivery fee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          style: deliveryOption === 1 ? {\n            textDecorationLine: \"line-through\"\n          } : {},\n          children: props.deliveryFee && `$${(_props$deliveryFee = props.deliveryFee) === null || _props$deliveryFee === void 0 ? void 0 : _props$deliveryFee.toFixed(2)}` || \"$ 0.00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), orderForm.promotion_code && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Promotion Code:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          children: orderForm.promotion_code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this), orderForm.ecoupon_code && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Ecoupon Code:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          children: orderForm.ecoupon_code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Promotion amount:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          style: {\n            color: \"#810000\"\n          },\n          children: [\"- $\", props.promotionAmount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Delivery option:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          style: {\n            color: \"#810000\"\n          },\n          children: [\"- $\", orderForm.delivery_mode]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: \"Add a tip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-sub-text\",\n        children: \"Tip is an optional way to say thanks to your delivery person\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-radio-button-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          name: \"option1\",\n          style: tipOption === 1 ? tipOptionStyle : {},\n          onClick: () => {\n            setTipOption(1);\n            setTip(0);\n          },\n          className: \"oc-or-rb-option\",\n          children: \"Not now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          name: \"option2\",\n          style: tipOption === 2 ? tipOptionStyle : {},\n          onClick: () => {\n            setTipOption(2);\n            setTip(subTotal * 0.1);\n          },\n          className: \"oc-or-rb-option\",\n          children: \"10%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          name: \"option3\",\n          style: tipOption === 3 ? tipOptionStyle : {},\n          onClick: () => {\n            setTipOption(3);\n            setTip(subTotal * 0.2);\n          },\n          className: \"oc-or-rb-option\",\n          children: \"20%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          name: \"option4\",\n          style: tipOption === 4 ? tipOptionStyle : {},\n          onClick: () => {\n            setTipOption(4);\n            setTip(subTotal * 0.3);\n          },\n          className: \"oc-or-rb-option\",\n          children: \"30%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          name: \"option5\",\n          style: tipOption === 5 ? tipOptionStyle : {},\n          onClick: () => {\n            setTipOption(5);\n          },\n          className: \"oc-or-rb-option\",\n          children: \"Other\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-or-input-label\",\n          children: \"Enter other amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-or-input-wrapper\",\n          children: [\"$\", /*#__PURE__*/_jsxDEV(\"input\", {\n            pattern: \"[0-9]{3}\",\n            type: \"text\",\n            className: \"oc-or-input-field\",\n            defaultValue: \"0\",\n            onChange: e => {\n              setTip(e.target.value);\n            },\n            disabled: tipOption !== 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        style: {\n          paddingBottom: \"10px\",\n          borderBottom: \"2px solid #D6D6D6\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          children: deliveryOption === 1 ? \"Service Tip\" : \"Shipper Tip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          children: [\"+ $\", tip !== \"\" ? (_parseFloat = parseFloat(tip)) === null || _parseFloat === void 0 ? void 0 : _parseFloat.toFixed(2) : \"0.00\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-or-main-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-pre-text\",\n          style: {\n            fontSize: 22\n          },\n          children: \"Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-or-sur-text\",\n          style: {\n            fontSize: 22\n          },\n          children: [\"$\", \" \", parseFloat(subTotal + (tip !== \"\" ? parseFloat(tip) : 0.0) - props.promotionAmount).toFixed(2) < 0 ? (0 + (deliveryOption === 0 ? props.deliveryFee : 0.0)).toFixed(2) : (subTotal + (tip !== \"\" ? parseFloat(tip) : 0.0) - props.promotionAmount + (deliveryOption === 0 ? props.deliveryFee : 0.0)).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), \" \", deliveryOption === 0 ? /*#__PURE__*/_jsxDEV(ButtonGroup, {\n        float: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"white\",\n          bgColor: \"#2c2c2c\",\n          justifyContent: \"center\",\n          gap: \"10px\",\n          width: 120,\n          fontSize: 15,\n          height: 35,\n          label: orderForm.delivery_method === 2 ? \"Schedule\" : \"Place Order\",\n          onClick: () => submitOrderForm()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ButtonGroup, {\n        float: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"white\",\n          bgColor: \"#2c2c2c\",\n          justifyContent: \"center\",\n          gap: \"10px\",\n          width: 150,\n          fontSize: 15,\n          height: 35,\n          label: orderForm.delivery_method === 2 ? \"Schedule Pickup\" : \"Pick up\",\n          onClick: () => submitOrderForm()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderReview, \"r7NPQlXNji4+eDGSKM/B8H+5+0g=\");\n\n_c = OrderReview;\nOrderReview.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  submitOrderCheckoutAPI: PropTypes.func.isRequired,\n  submitOrderPickupCheckoutAPI: PropTypes.func.isRequired,\n  submitOrderItemAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer,\n  product: state.ProductReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  submitOrderCheckoutAPI,\n  submitOrderPickupCheckoutAPI,\n  submitOrderItemAPI\n})(OrderReview));\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderReview\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/OrderCheckout/OrderReview/OrderReview.js"],"names":["React","Fragment","useState","useEffect","withRouter","connect","PropTypes","Button","ButtonGroup","calculateSubTotalPrice","submitOrderCheckoutAPI","submitOrderPickupCheckoutAPI","submitOrderItemAPI","OrderReview","props","user","orderForm","setOrderForm","deliveryOption","subTotal","setSubTotal","tip","setTip","tipOption","setTipOption","tipOptionStyle","backgroundColor","color","submitOrderForm","uid","match","params","console","log","prevState","customer_id","tips","code","cartItem","userCart","cart","map","item","productName","product_name","quantity","price","product_price","specialInstruction","note","customerData","name","profile","first_name","last_name","phone","customer_phone","address","delivery_address","user_id","location","latitude","parseFloat","currentAddress","longitude","providerData","provider_name","provider_id","pricing","delivery_fee","total","subtotal","promotionAmount","toFixed","paymentMethod","payment_method","deliveryMode","deliveryMethod","delivery_method","scheduleTime","schedule_time","socket","emit","submitOrder","history","push","result","paddingBottom","borderBottom","textDecorationLine","deliveryFee","promotion_code","ecoupon_code","delivery_mode","e","target","value","fontSize","propTypes","object","isRequired","product","func","mapStateToProps","state","UserReducer","ProductReducer"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport { calculateSubTotalPrice } from \"utils/BusinessUtils\";\nimport {\n  submitOrderCheckoutAPI,\n  submitOrderPickupCheckoutAPI,\n  submitOrderItemAPI,\n} from \"store/actions/OrderAction/OrderAction\";\nimport \"./OrderReview.scss\";\n\nfunction OrderReview(props) {\n  const {\n    user,\n    orderForm,\n    setOrderForm,\n    submitOrderCheckoutAPI,\n    submitOrderPickupCheckoutAPI,\n    submitOrderItemAPI,\n    deliveryOption,\n  } = props;\n  const [subTotal, setSubTotal] = useState(0);\n  const [tip, setTip] = useState(0);\n  const [tipOption, setTipOption] = useState(1);\n  const tipOptionStyle = { backgroundColor: \"#2c2c2c\", color: \"#ffffff\" };\n\n  const submitOrderForm = async () => {\n    const { uid } = props.match.params;\n    console.log(deliveryOption);\n    setOrderForm((prevState) => ({\n      ...prevState,\n      customer_id: uid,\n      tips: tip || 0,\n    }));\n    console.log(orderForm);\n    var code;\n    if (deliveryOption === 0) {\n      code = await submitOrderCheckoutAPI(orderForm);\n    } else {\n      code = await submitOrderPickupCheckoutAPI(orderForm);\n    }\n\n    const cartItem = user.userCart?.cart?.map((item) => {\n      return {\n        productName: item.product_name,\n        quantity: item.quantity,\n        price: item.product_price,\n        specialInstruction: item.note || \"\",\n      };\n    });\n    //socket params\n    const customerData = {\n      name: `${user.profile.first_name} ${user.profile.last_name}`,\n      phone: orderForm.customer_phone,\n      address: orderForm.delivery_address,\n      user_id: orderForm.customer_id,\n      location: {\n        latitude: parseFloat(user.currentAddress.latitude),\n        longitude: parseFloat(user.currentAddress.longitude),\n      },\n    };\n    const providerData = {\n      name: user.userCart.provider_name,\n      address: \"\",\n      provider_id: user.userCart.provider_id,\n      location: {\n        latitude: parseFloat(user.userCart.latitude),\n        longitude: parseFloat(user.userCart.longitude),\n      },\n    };\n    const pricing = {\n      delivery_fee: deliveryOption === 0 ? orderForm.delivery_fee : 0,\n      total: parseFloat(\n        orderForm.subtotal - props.promotionAmount < 0\n          ? 0?.toFixed(2)\n          : (orderForm.subtotal - props.promotionAmount).toFixed(2)\n      ), // delivery_fee excluded\n      paymentMethod: orderForm.payment_method\n        ? \"Cash\"\n        : \"E-wallet | Credit card\",\n      deliveryMode: deliveryOption === 0 ? 1 : 2,\n      deliveryMethod: orderForm.delivery_method ? \"Standard\" : \"Schedule\",\n      scheduleTime: orderForm.schedule_time,\n    };\n    if (!code) return;\n    console.log(pricing);\n    user.socket.emit(\"join-room\", code);\n    user.socket.emit(\n      \"customer-submit-order\",\n      cartItem,\n      customerData,\n      providerData,\n      code,\n      pricing\n    );\n    if (code && uid !== -1) {\n      let submitOrder = await submitOrderItemAPI(uid, code);\n      if (submitOrder) props.history.push(`/order-tracking/${code}`);\n    }\n  };\n\n  useEffect(() => {\n    var result;\n    if (user.userCart.cart)\n      result = calculateSubTotalPrice(user.userCart?.cart);\n    setOrderForm((prevState) => ({ ...prevState, subtotal: result }));\n    setSubTotal(result);\n  }, [user.userCart, setOrderForm]);\n\n  return (\n    <Fragment>\n      <div className=\"oc-order-review\">\n        <div className=\"oc-or-main-text\">\n          <span className=\"oc-or-pre-text\">Subtotal</span>\n          <span className=\"oc-or-sur-text\">\n            {(subTotal && `$${subTotal?.toFixed(2)}`) || \"\"}\n          </span>\n        </div>\n        <div\n          className=\"oc-or-main-text\"\n          style={{ paddingBottom: \"10px\", borderBottom: \"2px solid #D6D6D6\" }}\n        >\n          <span className=\"oc-or-pre-text\">Delivery fee</span>\n          <span\n            className=\"oc-or-sur-text\"\n            style={\n              deliveryOption === 1 ? { textDecorationLine: \"line-through\" } : {}\n            }\n          >\n            {(props.deliveryFee && `$${props.deliveryFee?.toFixed(2)}`) ||\n              \"$ 0.00\"}\n          </span>\n        </div>\n        {orderForm.promotion_code && (\n          <div className=\"oc-or-main-text\">\n            <span className=\"oc-or-pre-text\">Promotion Code:</span>\n            <span className=\"oc-or-sur-text\">{orderForm.promotion_code}</span>\n          </div>\n        )}\n        {orderForm.ecoupon_code && (\n          <div className=\"oc-or-main-text\">\n            <span className=\"oc-or-pre-text\">Ecoupon Code:</span>\n            <span className=\"oc-or-sur-text\">{orderForm.ecoupon_code}</span>\n          </div>\n        )}\n        <div className=\"oc-or-main-text\">\n          <span className=\"oc-or-pre-text\">Promotion amount:</span>\n          <span className=\"oc-or-sur-text\" style={{ color: \"#810000\" }}>\n            - ${props.promotionAmount}\n          </span>\n        </div>\n        <div className=\"oc-or-main-text\">\n          <span className=\"oc-or-pre-text\">Delivery option:</span>\n          <span className=\"oc-or-sur-text\" style={{ color: \"#810000\" }}>\n            - ${orderForm.delivery_mode}\n          </span>\n        </div>\n        <div className=\"oc-or-main-text\">\n          <span className=\"oc-or-pre-text\">Add a tip</span>\n        </div>\n        <div className=\"oc-or-sub-text\">\n          Tip is an optional way to say thanks to your delivery person\n        </div>\n        <div className=\"oc-or-radio-button-wrapper\">\n          <span\n            name=\"option1\"\n            style={tipOption === 1 ? tipOptionStyle : {}}\n            onClick={() => {\n              setTipOption(1);\n              setTip(0);\n            }}\n            className=\"oc-or-rb-option\"\n          >\n            Not now\n          </span>\n          <span\n            name=\"option2\"\n            style={tipOption === 2 ? tipOptionStyle : {}}\n            onClick={() => {\n              setTipOption(2);\n              setTip(subTotal * 0.1);\n            }}\n            className=\"oc-or-rb-option\"\n          >\n            10%\n          </span>\n          <span\n            name=\"option3\"\n            style={tipOption === 3 ? tipOptionStyle : {}}\n            onClick={() => {\n              setTipOption(3);\n              setTip(subTotal * 0.2);\n            }}\n            className=\"oc-or-rb-option\"\n          >\n            20%\n          </span>\n          <span\n            name=\"option4\"\n            style={tipOption === 4 ? tipOptionStyle : {}}\n            onClick={() => {\n              setTipOption(4);\n              setTip(subTotal * 0.3);\n            }}\n            className=\"oc-or-rb-option\"\n          >\n            30%\n          </span>\n          <span\n            name=\"option5\"\n            style={tipOption === 5 ? tipOptionStyle : {}}\n            onClick={() => {\n              setTipOption(5);\n            }}\n            className=\"oc-or-rb-option\"\n          >\n            Other\n          </span>\n        </div>\n        <div className=\"oc-or-input-wrapper\">\n          <div className=\"oc-or-input-label\">Enter other amount</div>\n          <div className=\"oc-or-input-wrapper\">\n            $\n            <input\n              pattern=\"[0-9]{3}\"\n              type=\"text\"\n              className=\"oc-or-input-field\"\n              defaultValue={\"0\"}\n              onChange={(e) => {\n                setTip(e.target.value);\n              }}\n              disabled={tipOption !== 5}\n            />\n          </div>\n        </div>\n        <div\n          className=\"oc-or-main-text\"\n          style={{\n            paddingBottom: \"10px\",\n            borderBottom: \"2px solid #D6D6D6\",\n          }}\n        >\n          <span className=\"oc-or-pre-text\">\n            {deliveryOption === 1 ? \"Service Tip\" : \"Shipper Tip\"}\n          </span>\n          <span className=\"oc-or-sur-text\">\n            + ${tip !== \"\" ? parseFloat(tip)?.toFixed(2) : \"0.00\"}\n          </span>\n        </div>\n        <div className=\"oc-or-main-text\">\n          <span className=\"oc-or-pre-text\" style={{ fontSize: 22 }}>\n            Total\n          </span>\n          <span className=\"oc-or-sur-text\" style={{ fontSize: 22 }}>\n            ${\" \"}\n            {parseFloat(\n              subTotal +\n                (tip !== \"\" ? parseFloat(tip) : 0.0) -\n                props.promotionAmount\n            ).toFixed(2) < 0\n              ? (0 + (deliveryOption === 0 ? props.deliveryFee : 0.0)).toFixed(\n                  2\n                )\n              : (\n                  subTotal +\n                  (tip !== \"\" ? parseFloat(tip) : 0.0) -\n                  props.promotionAmount +\n                  (deliveryOption === 0 ? props.deliveryFee : 0.0)\n                ).toFixed(2)}\n          </span>\n        </div>{\" \"}\n        {deliveryOption === 0 ? (\n          <ButtonGroup float=\"center\">\n            <Button\n              color={\"white\"}\n              bgColor={\"#2c2c2c\"}\n              justifyContent={\"center\"}\n              gap={\"10px\"}\n              width={120}\n              fontSize={15}\n              height={35}\n              label={\n                orderForm.delivery_method === 2 ? \"Schedule\" : \"Place Order\"\n              }\n              onClick={() => submitOrderForm()}\n            />\n          </ButtonGroup>\n        ) : (\n          <ButtonGroup float=\"center\">\n            <Button\n              color={\"white\"}\n              bgColor={\"#2c2c2c\"}\n              justifyContent={\"center\"}\n              gap={\"10px\"}\n              width={150}\n              fontSize={15}\n              height={35}\n              label={\n                orderForm.delivery_method === 2 ? \"Schedule Pickup\" : \"Pick up\"\n              }\n              onClick={() => submitOrderForm()}\n            />\n          </ButtonGroup>\n        )}\n      </div>\n    </Fragment>\n  );\n}\n\nOrderReview.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  submitOrderCheckoutAPI: PropTypes.func.isRequired,\n  submitOrderPickupCheckoutAPI: PropTypes.func.isRequired,\n  submitOrderItemAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n  product: state.ProductReducer,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, {\n    submitOrderCheckoutAPI,\n    submitOrderPickupCheckoutAPI,\n    submitOrderItemAPI,\n  })(OrderReview)\n);\n"]},"metadata":{},"sourceType":"module"}