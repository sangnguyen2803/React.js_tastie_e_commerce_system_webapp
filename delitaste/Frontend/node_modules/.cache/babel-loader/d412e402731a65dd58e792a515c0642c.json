{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/Profile/OrderHistory/OrderHistory.js\",\n    _s = $RefreshSig$();\n\nimport withAuth from \"components/HigherOrderComponents(HOC)/withAuth\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { useLocation, withRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport \"./OrderHistory.scss\";\nimport { getOrderHistoryAPI } from \"store/actions/OrderAction/OrderAction\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport Button from \"components/Commons/Button/Button\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/fontawesome-free-solid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OrderHistory(props) {\n  _s();\n\n  var _user$profile2;\n\n  const {\n    user,\n    history,\n    match,\n    getOrderHistoryAPI\n  } = props;\n  const [filterMode, setFilterMode] = useState(1);\n  const [orderHistory, setOrderHistory] = useState([]);\n  const [filterOrderHistory, setFilterOrderHistory] = useState([]);\n  useEffect(() => {\n    var _user$profile;\n\n    async function fetchOrderHistory(id) {\n      const result = await getOrderHistoryAPI(id);\n      console.log(result);\n\n      if (result) {\n        result.sort(function (a, b) {\n          return new Date(b.completed_at.split(\", \")[1]) - new Date(a.completed_at.split(\", \")[1]);\n        });\n        setOrderHistory(result);\n        setFilterOrderHistory(result);\n      }\n    }\n\n    fetchOrderHistory((_user$profile = user.profile) === null || _user$profile === void 0 ? void 0 : _user$profile.user_id);\n    return function cleanup() {\n      setOrderHistory([]);\n    };\n  }, [(_user$profile2 = user.profile) === null || _user$profile2 === void 0 ? void 0 : _user$profile2.user_id]);\n\n  const filterItems = status => {\n    if (parseInt(status) !== 0) {\n      const result = orderHistory.filter(element => element.order_status_nb === parseInt(status));\n      setFilterOrderHistory(result);\n    } else setFilterOrderHistory(orderHistory);\n  };\n\n  const directToOrderTracking = (code, status) => {\n    if (status <= 5) history.push(`/order-tracking/${code}`);\n    return;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-ohis-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-ohis-header-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-ohis-header-main-text\",\n          children: \"Order History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-ohis-general-profile-row \",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"p-ohis-b-gp-label\",\n          children: \"Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => filterItems(e.target.value),\n          className: \"p-ohis-b-iu-input-general-select\",\n          name: \"status\",\n          children: [\"All\", \"Submitted\", \"Assigned\", \"Confirmed\", \"Picked\", \"Completed\", \"Cancel\"].map((item, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: index,\n            label: item\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), \"\\u2014\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"p-ohis-b-gp-label\",\n          children: \"Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          className: \"p-ohis-b-iu-input-general\",\n          name: \"from\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), \"\\u2014\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          style: {\n            marginRight: 10\n          },\n          className: \"p-ohis-b-iu-input-general\",\n          name: \"to\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          buttonType: \"primary\",\n          width: 90,\n          height: 30,\n          prefix: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faSearch,\n            style: {\n              color: \"white\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this),\n          bgColor: \"black\",\n          color: \"white\",\n          radius: \"0px\",\n          label: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-ohis-body-wrapper\",\n        children: filterOrderHistory === null || filterOrderHistory === void 0 ? void 0 : filterOrderHistory.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-ohis-item-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-ohis-item-head\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"#\", item.order_code]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.completed_at\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-ohis-item-body\",\n            onClick: () => directToOrderTracking(item.order_code, item.order_status_nb),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: `p-ohis-item-img ${item.order_status_nb === 6 && \"p-ohis-grey-scale\"}`,\n              src: item.provider_avatar,\n              alt: \"product_img\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-ohis-item-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-ohis-item-main-text\",\n                style: {\n                  marginBottom: 5\n                },\n                children: item.provider_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-ohis-item-sub-text-medium\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"$ \", item.total_amount.toFixed(2), \" (2 items)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-ohis-item-sub-text\",\n                children: \"221 Tran Binh Trong, Ward 3, District 5, Ho Chi Minh City\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-ohis-item-sub-text\",\n                children: [\"Payment method: \", item.payment_method]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-ohis-item-sub-text-medium p-ohis-submit-btn\",\n                style: {\n                  fontWeight: 500,\n                  width: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    width: 200\n                  },\n                  children: [\"Status: \", item.order_status]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                  width: 100,\n                  float: \"flex-end\",\n                  gap: 10,\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    bgColor: \"white\",\n                    color: \"black\",\n                    border: \"2px solid rgb(170, 170, 170)\",\n                    buttonType: \"secondary\",\n                    width: 120,\n                    height: 30,\n                    radius: \"0px\",\n                    label: \"View rating\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    buttonType: \"primary\",\n                    width: 120,\n                    height: 30,\n                    bgColor: \"black\",\n                    color: \"white\",\n                    radius: \"0px\",\n                    label: \"Re-order\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)]\n        }, item.order_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderHistory, \"8MzgmYyIV9wqjs5HSgVOBgicEfQ=\");\n\n_c = OrderHistory;\nOrderHistory.propTypes = {\n  user: PropTypes.object.isRequired,\n  getOrderHistoryAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer\n});\n\nexport default withRouter(withAuth(connect(mapStateToProps, {\n  getOrderHistoryAPI\n})(OrderHistory)));\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderHistory\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/Profile/OrderHistory/OrderHistory.js"],"names":["withAuth","React","Fragment","useState","useEffect","useLocation","withRouter","Switch","Route","Redirect","connect","PropTypes","getOrderHistoryAPI","ButtonGroup","Button","FontAwesomeIcon","faSearch","OrderHistory","props","user","history","match","filterMode","setFilterMode","orderHistory","setOrderHistory","filterOrderHistory","setFilterOrderHistory","fetchOrderHistory","id","result","console","log","sort","a","b","Date","completed_at","split","profile","user_id","cleanup","filterItems","status","parseInt","filter","element","order_status_nb","directToOrderTracking","code","push","e","target","value","map","item","index","marginRight","color","order_code","provider_avatar","marginBottom","provider_name","total_amount","toFixed","payment_method","fontWeight","width","order_status","order_id","propTypes","object","isRequired","func","mapStateToProps","state","UserReducer"],"mappings":"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","sourcesContent":["import withAuth from \"components/HigherOrderComponents(HOC)/withAuth\";\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport {\n  useLocation,\n  withRouter,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport \"./OrderHistory.scss\";\nimport { getOrderHistoryAPI } from \"store/actions/OrderAction/OrderAction\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport Button from \"components/Commons/Button/Button\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch } from \"@fortawesome/fontawesome-free-solid\";\n\nfunction OrderHistory(props) {\n  const { user, history, match, getOrderHistoryAPI } = props;\n  const [filterMode, setFilterMode] = useState(1);\n  const [orderHistory, setOrderHistory] = useState([]);\n  const [filterOrderHistory, setFilterOrderHistory] = useState([]);\n  useEffect(() => {\n    async function fetchOrderHistory(id) {\n      const result = await getOrderHistoryAPI(id);\n      console.log(result);\n      if (result) {\n        result.sort(function (a, b) {\n          return (\n            new Date(b.completed_at.split(\", \")[1]) -\n            new Date(a.completed_at.split(\", \")[1])\n          );\n        });\n        setOrderHistory(result);\n        setFilterOrderHistory(result);\n      }\n    }\n    fetchOrderHistory(user.profile?.user_id);\n    return function cleanup() {\n      setOrderHistory([]);\n    };\n  }, [user.profile?.user_id]);\n  const filterItems = (status) => {\n    if (parseInt(status) !== 0) {\n      const result = orderHistory.filter(\n        (element) => element.order_status_nb === parseInt(status)\n      );\n      setFilterOrderHistory(result);\n    } else setFilterOrderHistory(orderHistory);\n  };\n  const directToOrderTracking = (code, status) => {\n    if (status <= 5) history.push(`/order-tracking/${code}`);\n    return;\n  };\n  return (\n    <Fragment>\n      <div className=\"profile-ohis-container\">\n        <div className=\"p-ohis-header-wrapper\">\n          <div className=\"p-ohis-header-main-text\">Order History</div>\n        </div>\n        <div className=\"p-ohis-general-profile-row \">\n          <span className=\"p-ohis-b-gp-label\">Status:</span>\n          <select\n            onChange={(e) => filterItems(e.target.value)}\n            className=\"p-ohis-b-iu-input-general-select\"\n            name=\"status\"\n          >\n            {[\n              \"All\",\n              \"Submitted\",\n              \"Assigned\",\n              \"Confirmed\",\n              \"Picked\",\n              \"Completed\",\n              \"Cancel\",\n            ].map((item, index) => (\n              <option key={index} value={index} label={item} />\n            ))}\n          </select>\n          —<span className=\"p-ohis-b-gp-label\">Date:</span>\n          <input\n            type=\"date\"\n            className=\"p-ohis-b-iu-input-general\"\n            name=\"from\"\n          />\n          —\n          <input\n            type=\"date\"\n            style={{ marginRight: 10 }}\n            className=\"p-ohis-b-iu-input-general\"\n            name=\"to\"\n          />\n          <Button\n            buttonType=\"primary\"\n            width={90}\n            height={30}\n            prefix={\n              <FontAwesomeIcon icon={faSearch} style={{ color: \"white\" }} />\n            }\n            bgColor={\"black\"}\n            color={\"white\"}\n            radius={\"0px\"}\n            label={\"Search\"}\n          />\n        </div>\n\n        <div className=\"p-ohis-body-wrapper\">\n          {filterOrderHistory?.map((item) => (\n            <div className=\"p-ohis-item-wrapper\" key={item.order_id}>\n              <div className=\"p-ohis-item-head\">\n                <span>#{item.order_code}</span>\n                <span>{item.completed_at}</span>\n              </div>\n              <div\n                className=\"p-ohis-item-body\"\n                onClick={() =>\n                  directToOrderTracking(item.order_code, item.order_status_nb)\n                }\n              >\n                <img\n                  className={`p-ohis-item-img ${\n                    item.order_status_nb === 6 && \"p-ohis-grey-scale\"\n                  }`}\n                  src={item.provider_avatar}\n                  alt={\"product_img\"}\n                />\n                <div className=\"p-ohis-item-content\">\n                  <div\n                    className=\"p-ohis-item-main-text\"\n                    style={{ marginBottom: 5 }}\n                  >\n                    {item.provider_name}\n                  </div>\n                  <div className=\"p-ohis-item-sub-text-medium\">\n                    <b>$ {item.total_amount.toFixed(2)} (2 items)</b>\n                  </div>\n                  <div className=\"p-ohis-item-sub-text\">\n                    221 Tran Binh Trong, Ward 3, District 5, Ho Chi Minh City\n                  </div>\n                  <div className=\"p-ohis-item-sub-text\">\n                    Payment method: {item.payment_method}\n                  </div>\n                  <div\n                    className=\"p-ohis-item-sub-text-medium p-ohis-submit-btn\"\n                    style={{ fontWeight: 500, width: \"100%\" }}\n                  >\n                    <span style={{ width: 200 }}>\n                      Status: {item.order_status}\n                    </span>\n                    <ButtonGroup width={100} float={\"flex-end\"} gap={10}>\n                      <Button\n                        bgColor={\"white\"}\n                        color=\"black\"\n                        border={\"2px solid rgb(170, 170, 170)\"}\n                        buttonType=\"secondary\"\n                        width={120}\n                        height={30}\n                        radius={\"0px\"}\n                        label={\"View rating\"}\n                      />\n                      <Button\n                        buttonType=\"primary\"\n                        width={120}\n                        height={30}\n                        bgColor={\"black\"}\n                        color={\"white\"}\n                        radius={\"0px\"}\n                        label={\"Re-order\"}\n                      />\n                    </ButtonGroup>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n\nOrderHistory.propTypes = {\n  user: PropTypes.object.isRequired,\n  getOrderHistoryAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n});\n\nexport default withRouter(\n  withAuth(connect(mapStateToProps, { getOrderHistoryAPI })(OrderHistory))\n);\n"]},"metadata":{},"sourceType":"module"}