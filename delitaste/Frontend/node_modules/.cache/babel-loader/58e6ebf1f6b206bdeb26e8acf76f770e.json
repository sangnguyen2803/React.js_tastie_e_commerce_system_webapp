{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/ProviderDetail/PDBody/PDProductDetail/PDProductDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { faPlus, faMinus, faExpand, faCompress, faChevronDown, faChevronUp } from \"@fortawesome/fontawesome-free-solid\";\nimport DialogBox from \"components/Commons/Overlay/DialogBox/DialogBox\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport \"./PDProductDetail.scss\";\nimport { addToCart, getCart, updateCart } from \"store/actions/CartAction/CartAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PDProductDetail(props) {\n  _s();\n\n  var _productItem$product_;\n\n  const {\n    provider,\n    user,\n    match\n  } = props;\n  const [productItem, setProductItem] = useState(props.productItem);\n  const [quantity, setQuantity] = useState(1);\n  const [totalPrice, setTotalPrice] = useState(productItem.price);\n  const [additionalOptions, setAdditionalOptions] = useState([]);\n  const [heightViewPort, setHeightViewPort] = useState(180);\n  const [isViewPortExpanded, setIsViewPortExpanded] = useState(false);\n  const [note, setNote] = useState(\"\");\n  const heightForExpansion = 120;\n  useEffect(() => {\n    var _user$userCart, _user$userCart$cart;\n\n    const currentCartItem = user === null || user === void 0 ? void 0 : (_user$userCart = user.userCart) === null || _user$userCart === void 0 ? void 0 : (_user$userCart$cart = _user$userCart.cart) === null || _user$userCart$cart === void 0 ? void 0 : _user$userCart$cart.filter(item => parseInt(item.product_id) === productItem.product_id)[0];\n\n    if (currentCartItem) {\n      setQuantity(currentCartItem === null || currentCartItem === void 0 ? void 0 : currentCartItem.quantity);\n      setNote(currentCartItem === null || currentCartItem === void 0 ? void 0 : currentCartItem.note);\n      setAdditionalOptions(currentCartItem === null || currentCartItem === void 0 ? void 0 : currentCartItem.product_options);\n    }\n  }, []);\n\n  const navigateAddToCart = () => {\n    if (match.params.id) {\n      var _user$userCart2, _user$userCart3;\n\n      //to check whether cart provider id is different from provider id in current page\n      if (parseInt(match.params.id || \"||\") !== ((_user$userCart2 = user.userCart) === null || _user$userCart2 === void 0 ? void 0 : _user$userCart2.provider_id) && ((_user$userCart3 = user.userCart) === null || _user$userCart3 === void 0 ? void 0 : _user$userCart3.provider_id) !== -1) {\n        props.setShowProductDetail(false);\n        props.setShowRemoveCartDialog(true);\n        return;\n      }\n    }\n\n    addToCart();\n  };\n\n  const addToCart = () => {\n    var _user$profile, _user$currentProvider, _user$currentProvider2, _user$userCart4, _user$userCart4$cart;\n\n    const {\n      addToCart,\n      updateCart\n    } = props;\n    const cartItem = {\n      provider_id: parseInt(match.params.id),\n      user_id: user === null || user === void 0 ? void 0 : (_user$profile = user.profile) === null || _user$profile === void 0 ? void 0 : _user$profile.user_id,\n      provider_name: user === null || user === void 0 ? void 0 : (_user$currentProvider = user.currentProvider) === null || _user$currentProvider === void 0 ? void 0 : (_user$currentProvider2 = _user$currentProvider.data) === null || _user$currentProvider2 === void 0 ? void 0 : _user$currentProvider2.merchant_name,\n      date: \"\",\n      status: 1,\n      cartItem: {\n        product_id: productItem.product_id,\n        product_name: productItem.product_name,\n        product_image: productItem.product_image,\n        product_price: productItem.price,\n        product_options: additionalOptions,\n        totalPrice: (parseFloat(productItem.price) * quantity).toFixed(2),\n        note: note,\n        quantity: quantity\n      }\n    };\n    let isProductExist = (_user$userCart4 = user.userCart) === null || _user$userCart4 === void 0 ? void 0 : (_user$userCart4$cart = _user$userCart4.cart) === null || _user$userCart4$cart === void 0 ? void 0 : _user$userCart4$cart.some(item => item.product_id === cartItem.cartItem.product_id);\n    var code = \"\";\n\n    if (isProductExist) {\n      var _user$userCart5, _user$userCart5$cart;\n\n      code = user === null || user === void 0 ? void 0 : (_user$userCart5 = user.userCart) === null || _user$userCart5 === void 0 ? void 0 : (_user$userCart5$cart = _user$userCart5.cart) === null || _user$userCart5$cart === void 0 ? void 0 : _user$userCart5$cart.filter(item => item.product_id === cartItem.cartItem.product_id)[0].item_code;\n    }\n\n    isProductExist ? updateCart(cartItem, code) : addToCart(cartItem);\n    props.setShowProductDetail(false);\n    if (props.pushReload) window.location.reload(false);\n  };\n\n  const onValueChange = (event, price) => {\n    let additionalOptionItem = {\n      option_name: event.target.name,\n      value: event.target.value,\n      price: price\n    };\n    additionalOptions === null || additionalOptions === void 0 ? void 0 : additionalOptions.push(additionalOptionItem);\n    setTotalPrice(totalPrice + price);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pd-pr-d-header\",\n      style: {\n        height: `${heightViewPort}px`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"pd-pr-d-image\",\n        alt: \"product_photo\",\n        src: productItem.product_image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-pr-d-icon-abs-wrapper\",\n        style: {\n          marginTop: `calc(${heightViewPort}px - 30px)`\n        },\n        onClick: () => {\n          !isViewPortExpanded ? setHeightViewPort(180 + heightForExpansion) : setHeightViewPort(180);\n          setIsViewPortExpanded(prev => !prev);\n        },\n        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: \"pd-pr-d-icon-abs\",\n          icon: !isViewPortExpanded ? faExpand : faCompress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pd-pr-d-body\",\n      style: {\n        height: !isViewPortExpanded ? \"350px\" : `${350 - heightForExpansion}px`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-pr-d-main-text\",\n        children: productItem.product_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-pr-d-sub-text\",\n        children: productItem.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-pr-option-box-container\",\n        style: {\n          height: isViewPortExpanded ? \"130px\" : `${130 + heightViewPort}px`\n        },\n        children: [productItem === null || productItem === void 0 ? void 0 : (_productItem$product_ = productItem.product_options) === null || _productItem$product_ === void 0 ? void 0 : _productItem$product_.map(option => {\n          var _option$options;\n\n          return option.option_name && /*#__PURE__*/_jsxDEV(Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-box-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"option-question\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-box-title-wrapper-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"option-box-title-main\",\n                    children: option.option_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"option-box-title-sub\",\n                    children: \"Required\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-box-show-more-icon\",\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faChevronDown\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"homebody-sb-radio-detail-wrapper\",\n                children: option === null || option === void 0 ? void 0 : (_option$options = option.options) === null || _option$options === void 0 ? void 0 : _option$options.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-answer \",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"hb-sb-type-wrapper radio\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: option.option_name,\n                      value: item.value,\n                      defaultValue: item.value,\n                      onChange: event => onValueChange(event, item.price)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"hb-sb-label-radio option-box-radio-label\",\n                      children: item.value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"option-price\",\n                      children: item.price !== 0 && `+ $${item.price}.00`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 17\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pd-text-area-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pd-pr-d-sub-text\",\n            style: {\n              fontSize: 13\n            },\n            children: \"Note for your dish:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"pd-textarea\",\n            name: \"description\",\n            value: note || \"\",\n            placeholder: \"Place your note here to notice the shipper for this dish.\",\n            onChange: e => setNote(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pd-pr-d-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pd-pl-quantity-btn-open\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faMinus,\n          className: \"inc-des-button-open-left\",\n          onClick: () => {\n            quantity > 1 && setQuantity(prev => prev - 1);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"inc-des-value\",\n          type: \"number\",\n          id: \"number\",\n          value: quantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faPlus,\n          className: \"inc-des-button-open-right\",\n          onClick: () => {\n            setQuantity(prev => prev + 1);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"white\",\n        bgColor: \"black\",\n        justifyContent: \"center\",\n        gap: \"10px\",\n        width: 180,\n        fontSize: 13,\n        height: 35,\n        label: props.buttonTitle ? props.buttonTitle : `Add to order • € ${(totalPrice * quantity).toFixed(2)}`,\n        onClick: navigateAddToCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PDProductDetail, \"ldZwZN1nFGlcRqSu0ctOES24dhk=\");\n\n_c = PDProductDetail;\nPDProductDetail.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  addToCart: PropTypes.func.isRequired,\n  updateCart: PropTypes.func.isRequired,\n  getCart: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer,\n  product: state.ProductReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  addToCart,\n  updateCart,\n  getCart\n})(PDProductDetail)); //<FontAwesomeIcon className=\"pd-pr-d-icon-abs-compress\" icon={faCompress} />\n\n/*\n */\n\nvar _c;\n\n$RefreshReg$(_c, \"PDProductDetail\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/ProviderDetail/PDBody/PDProductDetail/PDProductDetail.js"],"names":["React","Fragment","useState","useEffect","FontAwesomeIcon","withRouter","connect","PropTypes","faPlus","faMinus","faExpand","faCompress","faChevronDown","faChevronUp","DialogBox","Button","ButtonGroup","addToCart","getCart","updateCart","PDProductDetail","props","provider","user","match","productItem","setProductItem","quantity","setQuantity","totalPrice","setTotalPrice","price","additionalOptions","setAdditionalOptions","heightViewPort","setHeightViewPort","isViewPortExpanded","setIsViewPortExpanded","note","setNote","heightForExpansion","currentCartItem","userCart","cart","filter","item","parseInt","product_id","product_options","navigateAddToCart","params","id","provider_id","setShowProductDetail","setShowRemoveCartDialog","cartItem","user_id","profile","provider_name","currentProvider","data","merchant_name","date","status","product_name","product_image","product_price","parseFloat","toFixed","isProductExist","some","code","item_code","pushReload","window","location","reload","onValueChange","event","additionalOptionItem","option_name","target","name","value","push","height","marginTop","prev","description","map","option","options","fontSize","e","buttonTitle","propTypes","object","isRequired","product","func","mapStateToProps","state","UserReducer","ProductReducer"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,EAAoCC,SAApC,QAAqD,OAArD;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SACEC,MADF,EAEEC,OAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,aALF,EAMEC,WANF,QAOO,qCAPP;AAQA,OAAOC,SAAP,MAAsB,gDAAtB;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,OAAOC,WAAP,MAAwB,mDAAxB;AACA,OAAO,wBAAP;AACA,SACEC,SADF,EAEEC,OAFF,EAGEC,UAHF,QAIO,qCAJP;;;AAMA,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAAA;;AAAA;;AAC9B,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,IAAZ;AAAkBC,IAAAA;AAAlB,MAA4BH,KAAlC;AACA,QAAM,CAACI,WAAD,EAAcC,cAAd,IAAgCxB,QAAQ,CAACmB,KAAK,CAACI,WAAP,CAA9C;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0B1B,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAAC2B,UAAD,EAAaC,aAAb,IAA8B5B,QAAQ,CAACuB,WAAW,CAACM,KAAb,CAA5C;AACA,QAAM,CAACC,iBAAD,EAAoBC,oBAApB,IAA4C/B,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACgC,cAAD,EAAiBC,iBAAjB,IAAsCjC,QAAQ,CAAC,GAAD,CAApD;AACA,QAAM,CAACkC,kBAAD,EAAqBC,qBAArB,IAA8CnC,QAAQ,CAAC,KAAD,CAA5D;AACA,QAAM,CAACoC,IAAD,EAAOC,OAAP,IAAkBrC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAMsC,kBAAkB,GAAG,GAA3B;AAEArC,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACd,UAAMsC,eAAe,GAAGlB,IAAH,aAAGA,IAAH,yCAAGA,IAAI,CAAEmB,QAAT,0EAAG,eAAgBC,IAAnB,wDAAG,oBAAsBC,MAAtB,CACrBC,IAAD,IAAUC,QAAQ,CAACD,IAAI,CAACE,UAAN,CAAR,KAA8BtB,WAAW,CAACsB,UAD9B,EAEtB,CAFsB,CAAxB;;AAGA,QAAIN,eAAJ,EAAqB;AACnBb,MAAAA,WAAW,CAACa,eAAD,aAACA,eAAD,uBAACA,eAAe,CAAEd,QAAlB,CAAX;AACAY,MAAAA,OAAO,CAACE,eAAD,aAACA,eAAD,uBAACA,eAAe,CAAEH,IAAlB,CAAP;AACAL,MAAAA,oBAAoB,CAACQ,eAAD,aAACA,eAAD,uBAACA,eAAe,CAAEO,eAAlB,CAApB;AACD;AACF,GATQ,EASN,EATM,CAAT;;AAUA,QAAMC,iBAAiB,GAAG,MAAM;AAC9B,QAAIzB,KAAK,CAAC0B,MAAN,CAAaC,EAAjB,EAAqB;AAAA;;AACnB;AACA,UACEL,QAAQ,CAACtB,KAAK,CAAC0B,MAAN,CAAaC,EAAb,IAAmB,IAApB,CAAR,yBAAsC5B,IAAI,CAACmB,QAA3C,oDAAsC,gBAAeU,WAArD,KACA,oBAAA7B,IAAI,CAACmB,QAAL,oEAAeU,WAAf,MAA+B,CAAC,CAFlC,EAGE;AACA/B,QAAAA,KAAK,CAACgC,oBAAN,CAA2B,KAA3B;AACAhC,QAAAA,KAAK,CAACiC,uBAAN,CAA8B,IAA9B;AACA;AACD;AACF;;AACDrC,IAAAA,SAAS;AACV,GAbD;;AAcA,QAAMA,SAAS,GAAG,MAAM;AAAA;;AACtB,UAAM;AAAEA,MAAAA,SAAF;AAAaE,MAAAA;AAAb,QAA4BE,KAAlC;AAEA,UAAMkC,QAAQ,GAAG;AACfH,MAAAA,WAAW,EAAEN,QAAQ,CAACtB,KAAK,CAAC0B,MAAN,CAAaC,EAAd,CADN;AAEfK,MAAAA,OAAO,EAAEjC,IAAF,aAAEA,IAAF,wCAAEA,IAAI,CAAEkC,OAAR,kDAAE,cAAeD,OAFT;AAGfE,MAAAA,aAAa,EAAEnC,IAAF,aAAEA,IAAF,gDAAEA,IAAI,CAAEoC,eAAR,oFAAE,sBAAuBC,IAAzB,2DAAE,uBAA6BC,aAH7B;AAIfC,MAAAA,IAAI,EAAE,EAJS;AAKfC,MAAAA,MAAM,EAAE,CALO;AAMfR,MAAAA,QAAQ,EAAE;AACRR,QAAAA,UAAU,EAAEtB,WAAW,CAACsB,UADhB;AAERiB,QAAAA,YAAY,EAAEvC,WAAW,CAACuC,YAFlB;AAGRC,QAAAA,aAAa,EAAExC,WAAW,CAACwC,aAHnB;AAIRC,QAAAA,aAAa,EAAEzC,WAAW,CAACM,KAJnB;AAKRiB,QAAAA,eAAe,EAAEhB,iBALT;AAMRH,QAAAA,UAAU,EAAE,CAACsC,UAAU,CAAC1C,WAAW,CAACM,KAAb,CAAV,GAAgCJ,QAAjC,EAA2CyC,OAA3C,CAAmD,CAAnD,CANJ;AAOR9B,QAAAA,IAAI,EAAEA,IAPE;AAQRX,QAAAA,QAAQ,EAAEA;AARF;AANK,KAAjB;AAiBA,QAAI0C,cAAc,sBAAG9C,IAAI,CAACmB,QAAR,4EAAG,gBAAeC,IAAlB,yDAAG,qBAAqB2B,IAArB,CAClBzB,IAAD,IAAUA,IAAI,CAACE,UAAL,KAAoBQ,QAAQ,CAACA,QAAT,CAAkBR,UAD7B,CAArB;AAGA,QAAIwB,IAAI,GAAG,EAAX;;AACA,QAAIF,cAAJ,EAAoB;AAAA;;AAClBE,MAAAA,IAAI,GAAGhD,IAAH,aAAGA,IAAH,0CAAGA,IAAI,CAAEmB,QAAT,4EAAG,gBAAgBC,IAAnB,yDAAG,qBAAsBC,MAAtB,CACJC,IAAD,IAAUA,IAAI,CAACE,UAAL,KAAoBQ,QAAQ,CAACA,QAAT,CAAkBR,UAD3C,EAEL,CAFK,EAEFyB,SAFL;AAGD;;AACDH,IAAAA,cAAc,GAAGlD,UAAU,CAACoC,QAAD,EAAWgB,IAAX,CAAb,GAAgCtD,SAAS,CAACsC,QAAD,CAAvD;AACAlC,IAAAA,KAAK,CAACgC,oBAAN,CAA2B,KAA3B;AACA,QAAIhC,KAAK,CAACoD,UAAV,EAAsBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACvB,GAhCD;;AAkCA,QAAMC,aAAa,GAAG,CAACC,KAAD,EAAQ/C,KAAR,KAAkB;AACtC,QAAIgD,oBAAoB,GAAG;AACzBC,MAAAA,WAAW,EAAEF,KAAK,CAACG,MAAN,CAAaC,IADD;AAEzBC,MAAAA,KAAK,EAAEL,KAAK,CAACG,MAAN,CAAaE,KAFK;AAGzBpD,MAAAA,KAAK,EAAEA;AAHkB,KAA3B;AAKAC,IAAAA,iBAAiB,SAAjB,IAAAA,iBAAiB,WAAjB,YAAAA,iBAAiB,CAAEoD,IAAnB,CAAwBL,oBAAxB;AACAjD,IAAAA,aAAa,CAACD,UAAU,GAAGE,KAAd,CAAb;AACD,GARD;;AASA,sBACE,QAAC,QAAD;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAgC,MAAA,KAAK,EAAE;AAAEsD,QAAAA,MAAM,EAAG,GAAEnD,cAAe;AAA5B,OAAvC;AAAA,8BACE;AACE,QAAA,SAAS,EAAC,eADZ;AAEE,QAAA,GAAG,EAAC,eAFN;AAGE,QAAA,GAAG,EAAET,WAAW,CAACwC;AAHnB;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AACE,QAAA,SAAS,EAAC,0BADZ;AAEE,QAAA,KAAK,EAAE;AAAEqB,UAAAA,SAAS,EAAG,QAAOpD,cAAe;AAApC,SAFT;AAGE,QAAA,OAAO,EAAE,MAAM;AACb,WAACE,kBAAD,GACID,iBAAiB,CAAC,MAAMK,kBAAP,CADrB,GAEIL,iBAAiB,CAAC,GAAD,CAFrB;AAGAE,UAAAA,qBAAqB,CAAEkD,IAAD,IAAU,CAACA,IAAZ,CAArB;AACD,SARH;AAAA,+BAUE,QAAC,eAAD;AACE,UAAA,SAAS,EAAC,kBADZ;AAEE,UAAA,IAAI,EAAE,CAACnD,kBAAD,GAAsB1B,QAAtB,GAAiCC;AAFzC;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAuBE;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,KAAK,EAAE;AACL0E,QAAAA,MAAM,EAAE,CAACjD,kBAAD,GACJ,OADI,GAEH,GAAE,MAAMI,kBAAmB;AAH3B,OAFT;AAAA,8BAQE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,kBAAoCf,WAAW,CAACuC;AAAhD;AAAA;AAAA;AAAA;AAAA,cARF,eASE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,kBAAmCvC,WAAW,CAAC+D;AAA/C;AAAA;AAAA;AAAA;AAAA,cATF,eAUE;AACE,QAAA,SAAS,EAAC,4BADZ;AAEE,QAAA,KAAK,EAAE;AACLH,UAAAA,MAAM,EAAEjD,kBAAkB,GAAG,OAAH,GAAc,GAAE,MAAMF,cAAe;AAD1D,SAFT;AAAA,mBAMGT,WANH,aAMGA,WANH,gDAMGA,WAAW,CAAEuB,eANhB,0DAMG,sBAA8ByC,GAA9B,CACEC,MAAD;AAAA;;AAAA,iBACEA,MAAM,CAACV,WAAP,iBACE,QAAC,QAAD;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,oBAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,iBAAf;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAC,4BAAf;AAAA,0CACE;AAAM,oBAAA,SAAS,EAAC,uBAAhB;AAAA,8BACGU,MAAM,CAACV;AADV;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AAAM,oBAAA,SAAS,EAAC,sBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAOE;AAAK,kBAAA,SAAS,EAAC,2BAAf;AAAA,yCACE,QAAC,eAAD;AAAiB,oBAAA,IAAI,EAAEpE;AAAvB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAYE;AAAK,gBAAA,SAAS,EAAC,kCAAf;AAAA,0BACG8E,MADH,aACGA,MADH,0CACGA,MAAM,CAAEC,OADX,oDACG,gBAAiBF,GAAjB,CAAsB5C,IAAD,iBACpB;AAAK,kBAAA,SAAS,EAAC,gBAAf;AAAA,yCACE;AAAO,oBAAA,SAAS,EAAC,0BAAjB;AAAA,4CACE;AACE,sBAAA,IAAI,EAAC,OADP;AAEE,sBAAA,IAAI,EAAE6C,MAAM,CAACV,WAFf;AAGE,sBAAA,KAAK,EAAEnC,IAAI,CAACsC,KAHd;AAIE,sBAAA,YAAY,EAAEtC,IAAI,CAACsC,KAJrB;AAKE,sBAAA,QAAQ,EAAGL,KAAD,IACRD,aAAa,CAACC,KAAD,EAAQjC,IAAI,CAACd,KAAb;AANjB;AAAA;AAAA;AAAA;AAAA,4BADF,eAUE;AAAM,sBAAA,SAAS,EAAC,0CAAhB;AAAA,gCACGc,IAAI,CAACsC;AADR;AAAA;AAAA;AAAA;AAAA,4BAVF,eAaE;AAAM,sBAAA,SAAS,EAAC,cAAhB;AAAA,gCACGtC,IAAI,CAACd,KAAL,KAAe,CAAf,IAAqB,MAAKc,IAAI,CAACd,KAAM;AADxC;AAAA;AAAA;AAAA;AAAA,4BAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADD;AADH;AAAA;AAAA;AAAA;AAAA,sBAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA,SADD,CANH,eAiDE;AAAK,UAAA,SAAS,EAAC,sBAAf;AAAA,kCACE;AAAM,YAAA,SAAS,EAAC,kBAAhB;AAAmC,YAAA,KAAK,EAAE;AAAE6D,cAAAA,QAAQ,EAAE;AAAZ,aAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AACE,YAAA,SAAS,EAAC,aADZ;AAEE,YAAA,IAAI,EAAC,aAFP;AAGE,YAAA,KAAK,EAAEtD,IAAI,IAAI,EAHjB;AAIE,YAAA,WAAW,EAAC,2DAJd;AAKE,YAAA,QAAQ,EAAGuD,CAAD,IAAOtD,OAAO,CAACsD,CAAC,CAACZ,MAAF,CAASE,KAAV;AAL1B;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjDF;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA,YAvBF,eAgGE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,yBAAf;AAAA,gCACE,QAAC,eAAD;AACE,UAAA,IAAI,EAAE1E,OADR;AAEE,UAAA,SAAS,EAAC,0BAFZ;AAGE,UAAA,OAAO,EAAE,MAAM;AACbkB,YAAAA,QAAQ,GAAG,CAAX,IAAgBC,WAAW,CAAE2D,IAAD,IAAUA,IAAI,GAAG,CAAlB,CAA3B;AACD;AALH;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE;AACE,UAAA,SAAS,EAAC,eADZ;AAEE,UAAA,IAAI,EAAC,QAFP;AAGE,UAAA,EAAE,EAAC,QAHL;AAIE,UAAA,KAAK,EAAE5D;AAJT;AAAA;AAAA;AAAA;AAAA,gBARF,eAcE,QAAC,eAAD;AACE,UAAA,IAAI,EAAEnB,MADR;AAEE,UAAA,SAAS,EAAC,2BAFZ;AAGE,UAAA,OAAO,EAAE,MAAM;AACboB,YAAAA,WAAW,CAAE2D,IAAD,IAAUA,IAAI,GAAG,CAAlB,CAAX;AACD;AALH;AAAA;AAAA;AAAA;AAAA,gBAdF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAuBE,QAAC,MAAD;AACE,QAAA,KAAK,EAAE,OADT;AAEE,QAAA,OAAO,EAAE,OAFX;AAGE,QAAA,cAAc,EAAE,QAHlB;AAIE,QAAA,GAAG,EAAE,MAJP;AAKE,QAAA,KAAK,EAAE,GALT;AAME,QAAA,QAAQ,EAAE,EANZ;AAOE,QAAA,MAAM,EAAE,EAPV;AAQE,QAAA,KAAK,EACHlE,KAAK,CAACyE,WAAN,GACIzE,KAAK,CAACyE,WADV,GAEK,oBAAmB,CAACjE,UAAU,GAAGF,QAAd,EAAwByC,OAAxB,CAAgC,CAAhC,CAAmC,EAX/D;AAaE,QAAA,OAAO,EAAEnB;AAbX;AAAA;AAAA;AAAA;AAAA,cAvBF;AAAA;AAAA;AAAA;AAAA;AAAA,YAhGF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA0ID;;GAxNQ7B,e;;KAAAA,e;AA0NTA,eAAe,CAAC2E,SAAhB,GAA4B;AAC1BxE,EAAAA,IAAI,EAAEhB,SAAS,CAACyF,MAAV,CAAiBC,UADG;AAE1BC,EAAAA,OAAO,EAAE3F,SAAS,CAACyF,MAAV,CAAiBC,UAFA;AAG1BhF,EAAAA,SAAS,EAAEV,SAAS,CAAC4F,IAAV,CAAeF,UAHA;AAI1B9E,EAAAA,UAAU,EAAEZ,SAAS,CAAC4F,IAAV,CAAeF,UAJD;AAK1B/E,EAAAA,OAAO,EAAEX,SAAS,CAAC4F,IAAV,CAAeF;AALE,CAA5B;;AAQA,MAAMG,eAAe,GAAIC,KAAD,KAAY;AAClC9E,EAAAA,IAAI,EAAE8E,KAAK,CAACC,WADsB;AAElCJ,EAAAA,OAAO,EAAEG,KAAK,CAACE;AAFmB,CAAZ,CAAxB;;AAKA,eAAelG,UAAU,CACvBC,OAAO,CAAC8F,eAAD,EAAkB;AAAEnF,EAAAA,SAAF;AAAaE,EAAAA,UAAb;AAAyBD,EAAAA;AAAzB,CAAlB,CAAP,CAA6DE,eAA7D,CADuB,CAAzB,C,CAGA;;AAEA;AACA","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {\n  faPlus,\n  faMinus,\n  faExpand,\n  faCompress,\n  faChevronDown,\n  faChevronUp,\n} from \"@fortawesome/fontawesome-free-solid\";\nimport DialogBox from \"components/Commons/Overlay/DialogBox/DialogBox\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport \"./PDProductDetail.scss\";\nimport {\n  addToCart,\n  getCart,\n  updateCart,\n} from \"store/actions/CartAction/CartAction\";\n\nfunction PDProductDetail(props) {\n  const { provider, user, match } = props;\n  const [productItem, setProductItem] = useState(props.productItem);\n  const [quantity, setQuantity] = useState(1);\n  const [totalPrice, setTotalPrice] = useState(productItem.price);\n  const [additionalOptions, setAdditionalOptions] = useState([]);\n  const [heightViewPort, setHeightViewPort] = useState(180);\n  const [isViewPortExpanded, setIsViewPortExpanded] = useState(false);\n  const [note, setNote] = useState(\"\");\n  const heightForExpansion = 120;\n\n  useEffect(() => {\n    const currentCartItem = user?.userCart?.cart?.filter(\n      (item) => parseInt(item.product_id) === productItem.product_id\n    )[0];\n    if (currentCartItem) {\n      setQuantity(currentCartItem?.quantity);\n      setNote(currentCartItem?.note);\n      setAdditionalOptions(currentCartItem?.product_options);\n    }\n  }, []);\n  const navigateAddToCart = () => {\n    if (match.params.id) {\n      //to check whether cart provider id is different from provider id in current page\n      if (\n        parseInt(match.params.id || \"||\") !== user.userCart?.provider_id &&\n        user.userCart?.provider_id !== -1\n      ) {\n        props.setShowProductDetail(false);\n        props.setShowRemoveCartDialog(true);\n        return;\n      }\n    }\n    addToCart();\n  };\n  const addToCart = () => {\n    const { addToCart, updateCart } = props;\n\n    const cartItem = {\n      provider_id: parseInt(match.params.id),\n      user_id: user?.profile?.user_id,\n      provider_name: user?.currentProvider?.data?.merchant_name,\n      date: \"\",\n      status: 1,\n      cartItem: {\n        product_id: productItem.product_id,\n        product_name: productItem.product_name,\n        product_image: productItem.product_image,\n        product_price: productItem.price,\n        product_options: additionalOptions,\n        totalPrice: (parseFloat(productItem.price) * quantity).toFixed(2),\n        note: note,\n        quantity: quantity,\n      },\n    };\n    let isProductExist = user.userCart?.cart?.some(\n      (item) => item.product_id === cartItem.cartItem.product_id\n    );\n    var code = \"\";\n    if (isProductExist) {\n      code = user?.userCart?.cart?.filter(\n        (item) => item.product_id === cartItem.cartItem.product_id\n      )[0].item_code;\n    }\n    isProductExist ? updateCart(cartItem, code) : addToCart(cartItem);\n    props.setShowProductDetail(false);\n    if (props.pushReload) window.location.reload(false);\n  };\n\n  const onValueChange = (event, price) => {\n    let additionalOptionItem = {\n      option_name: event.target.name,\n      value: event.target.value,\n      price: price,\n    };\n    additionalOptions?.push(additionalOptionItem);\n    setTotalPrice(totalPrice + price);\n  };\n  return (\n    <Fragment>\n      <div className=\"pd-pr-d-header\" style={{ height: `${heightViewPort}px` }}>\n        <img\n          className=\"pd-pr-d-image\"\n          alt=\"product_photo\"\n          src={productItem.product_image}\n        />\n        <div\n          className=\"pd-pr-d-icon-abs-wrapper\"\n          style={{ marginTop: `calc(${heightViewPort}px - 30px)` }}\n          onClick={() => {\n            !isViewPortExpanded\n              ? setHeightViewPort(180 + heightForExpansion)\n              : setHeightViewPort(180);\n            setIsViewPortExpanded((prev) => !prev);\n          }}\n        >\n          <FontAwesomeIcon\n            className=\"pd-pr-d-icon-abs\"\n            icon={!isViewPortExpanded ? faExpand : faCompress}\n          />\n        </div>\n      </div>\n      <div\n        className=\"pd-pr-d-body\"\n        style={{\n          height: !isViewPortExpanded\n            ? \"350px\"\n            : `${350 - heightForExpansion}px`,\n        }}\n      >\n        <div className=\"pd-pr-d-main-text\">{productItem.product_name}</div>\n        <div className=\"pd-pr-d-sub-text\">{productItem.description}</div>\n        <div\n          className=\"pd-pr-option-box-container\"\n          style={{\n            height: isViewPortExpanded ? \"130px\" : `${130 + heightViewPort}px`,\n          }}\n        >\n          {productItem?.product_options?.map(\n            (option) =>\n              option.option_name && (\n                <Fragment>\n                  <div className=\"option-box-wrapper\">\n                    <div className=\"option-question\">\n                      <div className=\"option-box-title-wrapper-1\">\n                        <span className=\"option-box-title-main\">\n                          {option.option_name}\n                        </span>\n                        <span className=\"option-box-title-sub\">Required</span>\n                      </div>\n                      <div className=\"option-box-show-more-icon\">\n                        <FontAwesomeIcon icon={faChevronDown} />\n                      </div>\n                    </div>\n                    <div className=\"homebody-sb-radio-detail-wrapper\">\n                      {option?.options?.map((item) => (\n                        <div className=\"option-answer \">\n                          <label className=\"hb-sb-type-wrapper radio\">\n                            <input\n                              type=\"radio\"\n                              name={option.option_name}\n                              value={item.value}\n                              defaultValue={item.value}\n                              onChange={(event) =>\n                                onValueChange(event, item.price)\n                              }\n                            />\n                            <span className=\"hb-sb-label-radio option-box-radio-label\">\n                              {item.value}\n                            </span>\n                            <span className=\"option-price\">\n                              {item.price !== 0 && `+ $${item.price}.00`}\n                            </span>\n                          </label>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </Fragment>\n              )\n          )}\n          <div className=\"pd-text-area-wrapper\">\n            <span className=\"pd-pr-d-sub-text\" style={{ fontSize: 13 }}>\n              Note for your dish:\n            </span>\n            <textarea\n              className=\"pd-textarea\"\n              name=\"description\"\n              value={note || \"\"}\n              placeholder=\"Place your note here to notice the shipper for this dish.\"\n              onChange={(e) => setNote(e.target.value)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"pd-pr-d-footer\">\n        <div className=\"pd-pl-quantity-btn-open\">\n          <FontAwesomeIcon\n            icon={faMinus}\n            className=\"inc-des-button-open-left\"\n            onClick={() => {\n              quantity > 1 && setQuantity((prev) => prev - 1);\n            }}\n          />\n          <input\n            className=\"inc-des-value\"\n            type=\"number\"\n            id=\"number\"\n            value={quantity}\n          />\n          <FontAwesomeIcon\n            icon={faPlus}\n            className=\"inc-des-button-open-right\"\n            onClick={() => {\n              setQuantity((prev) => prev + 1);\n            }}\n          />\n        </div>\n        <Button\n          color={\"white\"}\n          bgColor={\"black\"}\n          justifyContent={\"center\"}\n          gap={\"10px\"}\n          width={180}\n          fontSize={13}\n          height={35}\n          label={\n            props.buttonTitle\n              ? props.buttonTitle\n              : `Add to order • € ${(totalPrice * quantity).toFixed(2)}`\n          }\n          onClick={navigateAddToCart}\n        />\n      </div>\n    </Fragment>\n  );\n}\n\nPDProductDetail.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  addToCart: PropTypes.func.isRequired,\n  updateCart: PropTypes.func.isRequired,\n  getCart: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n  product: state.ProductReducer,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, { addToCart, updateCart, getCart })(PDProductDetail)\n);\n//<FontAwesomeIcon className=\"pd-pr-d-icon-abs-compress\" icon={faCompress} />\n\n/*\n */\n"]},"metadata":{},"sourceType":"module"}