{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/MerchantDashboard/DashboardFeatures/MDMarketing/VoucherHandlers/UpdatePromotion.js\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Formik, Form, Field } from \"formik\";\nimport \"./VoucherHandlers.scss\";\nimport { formatDate } from \"utils/DateUtils\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport SwitchSelector from \"react-switch-selector\";\nimport { updateDiscountAPI, updatePromotionAPI } from \"store/actions/ProviderAction/ProviderAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UpdatePromotion(props) {\n  const {\n    promotionType,\n    selectedPromotion\n  } = props;\n  const initialValues = {\n    //  provider_id: 1000001,\n    promotion_id: selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.promotion_id,\n    promotion_code: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.promotion_code) || \"\",\n    promotion_name: promotionType === 1 ? selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.discount_name : (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.promotion_name) || \"\",\n    start_at: new Date(selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.start_at) || new Date(),\n    expire_at: new Date(selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.expire_at) || new Date(),\n    promotion_value: promotionType === 1 ? selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.discount_value : (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.promotion_value) || 0,\n    min_order_value: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.min_order_value) || \"2.00\",\n    max_discount_value: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.max_discount_value) || \"50.00\",\n    payment_method_id: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.payment_method_id) || 1,\n    limited_offer: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.limited_offer) || 1,\n    weekly_usage_limit: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.weekly_usage_limit_per_user) || 1,\n    promotion_description: promotionType === 1 ? selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.discount_description : (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.promotion_description) || \"\",\n    delivery_mode: (selectedPromotion === null || selectedPromotion === void 0 ? void 0 : selectedPromotion.delivery_mode) || 1\n  };\n\n  const handleSubmitForm = async values => {\n    if (promotionType === 1) {\n      const data = {\n        discount_id: selectedPromotion.discount_id,\n        provider_id: selectedPromotion.provider_id,\n        discount_name: values.promotion_name,\n        discount_value: parseFloat(values.promotion_value),\n        discount_description: values.promotion_description,\n        start_at: values.start_at,\n        expire_at: values.expire_at\n      };\n      const status = await props.updateDiscountAPI(data);\n      if (status) props.setVisible(false);\n      return;\n    }\n\n    const data = {\n      promotion_id: selectedPromotion.promotion_id,\n      provider_id: selectedPromotion.provider_id,\n      promotion_code: values.promotion_code,\n      promotion_name: values.promotion_name,\n      promotion_value: parseFloat(values.promotion_value),\n      promotion_description: values.promotion_description,\n      min_order_value: values.min_order_value,\n      max_discount_value: values.max_discount_value,\n      start_at: values.start_at,\n      expire_at: values.expire_at,\n      payment_method_id: values.payment_method_id,\n      limited_offer: parseInt(values.limited_offer),\n      weekly_usage_limit_per_user: parseInt(values.weekly_usage_limit),\n      delivery_mode: parseInt(values.delivery_mode),\n      update_at: formatDate(new Date())\n    };\n    const status = await props.updatePromotionAPI(data);\n    console.log(status);\n    if (status) props.setVisible(false);\n    return;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      openModal: props.visible,\n      closeModal: () => {\n        props.setVisible(false);\n      },\n      title: \"Update promotion\",\n      width: 50,\n      height: promotionType === 1 ? 420 : 580,\n      padding: \"5px 50px\",\n      transparent: \"30%\",\n      hideHeader: true,\n      children: /*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: initialValues,\n        validateOnChange: false,\n        children: formikProps => {\n          const {\n            values,\n            errors,\n            touched\n          } = formikProps;\n          return /*#__PURE__*/_jsxDEV(Form, {\n            className: \"modal-form-input-wrapper\",\n            style: {\n              height: 300\n            },\n            children: /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                style: {\n                  marginTop: 20\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Voucher name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"promotion_name\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 19\n              }, this), promotionType !== 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Voucher code:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"promotion_code\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Usage period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"date\",\n                  name: \"start_at\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher code\",\n                  style: {\n                    width: \"calc(48% - 75px)\",\n                    marginRight: 5\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 21\n                }, this), \"\\u2014\", /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"date\",\n                  name: \"expire_at\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Voucher code\",\n                  style: {\n                    width: \"calc(48% - 75px)\",\n                    marginLeft: 5\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Discount amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"promotion_value\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Discount ammount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 19\n              }, this), promotionType !== 1 && /*#__PURE__*/_jsxDEV(Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-input-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"modal-input-label\",\n                    children: \"Minimum basket discount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"text\",\n                    name: \"min_order_value\",\n                    className: \"modal-input-field\",\n                    placeholder: \"Discount ammount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-input-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"modal-input-label\",\n                    children: \"Maximum discount amount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"text\",\n                    name: \"max_discount_value\",\n                    className: \"modal-input-field\",\n                    placeholder: \"Discount ammount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-input-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"modal-input-label\",\n                    children: \"Usage quantity:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    type: \"text\",\n                    name: \"limited_offer\",\n                    className: \"modal-input-field\",\n                    placeholder: \"Litmited offer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Weekly usage limit:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  type: \"text\",\n                  name: \"weekly_usage_limit\",\n                  className: \"modal-input-field\",\n                  placeholder: \"Weekly usage limit per customer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-input-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-input-label\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  className: \"modal-textarea-field\",\n                  as: \"textarea\",\n                  name: \"promotion_description\",\n                  placeholder: \"Description about your product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                width: 100,\n                mgTop: 5,\n                float: \"center\",\n                mgBottom: 15,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  color: \"white\",\n                  bgColor: \"#101010\",\n                  justifyContent: \"center\",\n                  gap: \"10px\",\n                  width: 130,\n                  height: 35,\n                  label: `Update ${promotionType ? \"Discount\" : \"Voucher\"}`,\n                  onClick: () => handleSubmitForm(values)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_c = UpdatePromotion;\nUpdatePromotion.propTypes = {\n  user: PropTypes.object.isRequired,\n  updateDiscountAPI: PropTypes.func.isRequired,\n  updatePromotionAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  updatePromotionAPI,\n  updateDiscountAPI\n})(UpdatePromotion));\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdatePromotion\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/MerchantDashboard/DashboardFeatures/MDMarketing/VoucherHandlers/UpdatePromotion.js"],"names":["React","Fragment","useState","useEffect","Button","ButtonGroup","withRouter","connect","PropTypes","Formik","Form","Field","formatDate","Modal","SwitchSelector","updateDiscountAPI","updatePromotionAPI","UpdatePromotion","props","promotionType","selectedPromotion","initialValues","promotion_id","promotion_code","promotion_name","discount_name","start_at","Date","expire_at","promotion_value","discount_value","min_order_value","max_discount_value","payment_method_id","limited_offer","weekly_usage_limit","weekly_usage_limit_per_user","promotion_description","discount_description","delivery_mode","handleSubmitForm","values","data","discount_id","provider_id","parseFloat","status","setVisible","parseInt","update_at","console","log","visible","formikProps","errors","touched","height","marginTop","width","marginRight","marginLeft","propTypes","user","object","isRequired","func","mapStateToProps","state","UserReducer"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Formik, Form, Field } from \"formik\";\nimport \"./VoucherHandlers.scss\";\nimport { formatDate } from \"utils/DateUtils\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport SwitchSelector from \"react-switch-selector\";\nimport {\n  updateDiscountAPI,\n  updatePromotionAPI,\n} from \"store/actions/ProviderAction/ProviderAction\";\n\nfunction UpdatePromotion(props) {\n  const { promotionType, selectedPromotion } = props;\n  const initialValues = {\n    //  provider_id: 1000001,\n    promotion_id: selectedPromotion?.promotion_id,\n    promotion_code: selectedPromotion?.promotion_code || \"\",\n    promotion_name:\n      promotionType === 1\n        ? selectedPromotion?.discount_name\n        : selectedPromotion?.promotion_name || \"\",\n    start_at: new Date(selectedPromotion?.start_at) || new Date(),\n    expire_at: new Date(selectedPromotion?.expire_at) || new Date(),\n    promotion_value:\n      promotionType === 1\n        ? selectedPromotion?.discount_value\n        : selectedPromotion?.promotion_value || 0,\n    min_order_value: selectedPromotion?.min_order_value || \"2.00\",\n    max_discount_value: selectedPromotion?.max_discount_value || \"50.00\",\n    payment_method_id: selectedPromotion?.payment_method_id || 1,\n    limited_offer: selectedPromotion?.limited_offer || 1,\n    weekly_usage_limit: selectedPromotion?.weekly_usage_limit_per_user || 1,\n    promotion_description:\n      promotionType === 1\n        ? selectedPromotion?.discount_description\n        : selectedPromotion?.promotion_description || \"\",\n    delivery_mode: selectedPromotion?.delivery_mode || 1,\n  };\n  const handleSubmitForm = async (values) => {\n    if (promotionType === 1) {\n      const data = {\n        discount_id: selectedPromotion.discount_id,\n        provider_id: selectedPromotion.provider_id,\n        discount_name: values.promotion_name,\n        discount_value: parseFloat(values.promotion_value),\n        discount_description: values.promotion_description,\n        start_at: values.start_at,\n        expire_at: values.expire_at,\n      };\n      const status = await props.updateDiscountAPI(data);\n      if (status) props.setVisible(false);\n      return;\n    }\n    const data = {\n      promotion_id: selectedPromotion.promotion_id,\n      provider_id: selectedPromotion.provider_id,\n      promotion_code: values.promotion_code,\n      promotion_name: values.promotion_name,\n      promotion_value: parseFloat(values.promotion_value),\n      promotion_description: values.promotion_description,\n      min_order_value: values.min_order_value,\n      max_discount_value: values.max_discount_value,\n      start_at: values.start_at,\n      expire_at: values.expire_at,\n      payment_method_id: values.payment_method_id,\n      limited_offer: parseInt(values.limited_offer),\n      weekly_usage_limit_per_user: parseInt(values.weekly_usage_limit),\n      delivery_mode: parseInt(values.delivery_mode),\n      update_at: formatDate(new Date()),\n    };\n    const status = await props.updatePromotionAPI(data);\n    console.log(status);\n    if (status) props.setVisible(false);\n    return;\n  };\n  return (\n    <Fragment>\n      <Modal\n        openModal={props.visible}\n        closeModal={() => {\n          props.setVisible(false);\n        }}\n        title={\"Update promotion\"}\n        width={50}\n        height={promotionType === 1 ? 420 : 580}\n        padding=\"5px 50px\"\n        transparent=\"30%\"\n        hideHeader={true}\n      >\n        <Formik initialValues={initialValues} validateOnChange={false}>\n          {(formikProps) => {\n            const { values, errors, touched } = formikProps;\n            return (\n              <Form\n                className=\"modal-form-input-wrapper\"\n                style={{ height: 300 }}\n              >\n                <Fragment>\n                  <div className=\"modal-input-row\" style={{ marginTop: 20 }}>\n                    <span className=\"modal-input-label\">Voucher name:</span>\n                    <Field\n                      type=\"text\"\n                      name=\"promotion_name\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Voucher name\"}\n                    />\n                  </div>\n                  {promotionType !== 1 && (\n                    <div className=\"modal-input-row\">\n                      <span className=\"modal-input-label\">Voucher code:</span>\n                      <Field\n                        type=\"text\"\n                        name=\"promotion_code\"\n                        className=\"modal-input-field\"\n                        placeholder={\"Voucher code\"}\n                      />\n                    </div>\n                  )}\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">Usage period:</span>\n                    <Field\n                      type=\"date\"\n                      name=\"start_at\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Voucher code\"}\n                      style={{ width: \"calc(48% - 75px)\", marginRight: 5 }}\n                    />\n                    —\n                    <Field\n                      type=\"date\"\n                      name=\"expire_at\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Voucher code\"}\n                      style={{ width: \"calc(48% - 75px)\", marginLeft: 5 }}\n                    />\n                  </div>\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">Discount amount:</span>\n                    <Field\n                      type=\"text\"\n                      name=\"promotion_value\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Discount ammount\"}\n                    />\n                  </div>\n\n                  {promotionType !== 1 && (\n                    <Fragment>\n                      <div className=\"modal-input-row\">\n                        <span className=\"modal-input-label\">\n                          Minimum basket discount:\n                        </span>\n                        <Field\n                          type=\"text\"\n                          name=\"min_order_value\"\n                          className=\"modal-input-field\"\n                          placeholder={\"Discount ammount\"}\n                        />\n                      </div>\n                      <div className=\"modal-input-row\">\n                        <span className=\"modal-input-label\">\n                          Maximum discount amount:\n                        </span>\n                        <Field\n                          type=\"text\"\n                          name=\"max_discount_value\"\n                          className=\"modal-input-field\"\n                          placeholder={\"Discount ammount\"}\n                        />\n                      </div>\n                      <div className=\"modal-input-row\">\n                        <span className=\"modal-input-label\">\n                          Usage quantity:\n                        </span>\n                        <Field\n                          type=\"text\"\n                          name=\"limited_offer\"\n                          className=\"modal-input-field\"\n                          placeholder={\"Litmited offer\"}\n                        />\n                      </div>\n                    </Fragment>\n                  )}\n\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">\n                      Weekly usage limit:\n                    </span>\n                    <Field\n                      type=\"text\"\n                      name=\"weekly_usage_limit\"\n                      className=\"modal-input-field\"\n                      placeholder={\"Weekly usage limit per customer\"}\n                    />\n                  </div>\n                  <div className=\"modal-input-row\">\n                    <span className=\"modal-input-label\">Description</span>\n                    <Field\n                      className=\"modal-textarea-field\"\n                      as=\"textarea\"\n                      name=\"promotion_description\"\n                      placeholder=\"Description about your product\"\n                    />\n                  </div>\n                  <ButtonGroup\n                    width={100}\n                    mgTop={5}\n                    float=\"center\"\n                    mgBottom={15}\n                  >\n                    <Button\n                      color={\"white\"}\n                      bgColor={\"#101010\"}\n                      justifyContent={\"center\"}\n                      gap={\"10px\"}\n                      width={130}\n                      height={35}\n                      label={`Update ${promotionType ? \"Discount\" : \"Voucher\"}`}\n                      onClick={() => handleSubmitForm(values)}\n                    />\n                  </ButtonGroup>\n                </Fragment>\n              </Form>\n            );\n          }}\n        </Formik>\n      </Modal>\n    </Fragment>\n  );\n}\n\nUpdatePromotion.propTypes = {\n  user: PropTypes.object.isRequired,\n  updateDiscountAPI: PropTypes.func.isRequired,\n  updatePromotionAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n});\nexport default withRouter(\n  connect(mapStateToProps, { updatePromotionAPI, updateDiscountAPI })(\n    UpdatePromotion\n  )\n);\n"]},"metadata":{},"sourceType":"module"}