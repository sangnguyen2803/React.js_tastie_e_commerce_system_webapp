{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/OrderCheckout/OrderCheckout.js\",\n    _s = $RefreshSig$();\n\nimport withAuth from \"components/HigherOrderComponents(HOC)/withAuth\";\nimport NavBar from \"../Commons/Layout/NavBar/NavBar\";\nimport Footer from \"../Commons/Layout/Footer/Footer\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport ToolBar from \"../Commons/Layout/Toolbar/Toolbar\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport \"./OrderCheckout.scss\";\nimport OrderDetail from \"components/OrderCheckout/OrderDetail/OrderDetail\";\nimport OrderReview from \"components/OrderCheckout/OrderReview/OrderReview\";\nimport { getCart } from \"store/actions/CartAction/CartAction\";\nimport { getPromotionAmountAPI } from \"store/actions/OrderAction/OrderAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OrderCheckout(props) {\n  _s();\n\n  useEffect(() => {\n    if (props.user.profile.user_id !== -1 && props.user.profile.user_id !== undefined) {\n      if (String(props.user.profile.user_id) !== props.match.params.uid) props.history.replace(\"/\");\n    }\n  }, [props.user.profile.user_id]);\n  const [promotionAmount, setPromotionAmount] = useState(0);\n  const {\n    user,\n    getCart\n  } = props;\n  const [orderForm, setOrderForm] = useState({\n    delivery_mode: 1,\n    customer_id: props.match.params.uid,\n    customer_phone: \"\",\n    delivery_address: \"\",\n    delivery_method: 1,\n    delivery_fee: 0,\n    ecoupon_code: \"\",\n    payment_method: 1,\n    payment_status: 1,\n    promotion_code: \"\",\n    schedule_time: \"\",\n    subtotal: 0,\n    tips: 0,\n    total: 0\n  });\n  useEffect(() => {\n    async function getPromotionAmount() {\n      const amount = await props.getPromotionAmountAPI(orderForm.promotion_code, parseFloat(orderForm.subtotal));\n      setPromotionAmount(amount);\n    }\n\n    if (orderForm.promotion_code !== \"\") {\n      getPromotionAmount();\n    }\n  }, [orderForm === null || orderForm === void 0 ? void 0 : orderForm.promotion_code]);\n  const [deliveryOption, setDeliveryOption] = useState(0);\n  useEffect(() => {\n    if (deliveryOption === 1) setOrderForm(prevState => ({ ...prevState,\n      delivery_mode: 2\n    }));else setOrderForm(prevState => ({ ...prevState,\n      delivery_mode: 1\n    }));\n  }, [deliveryOption]);\n  const [deliveryFee, setDeliveryFee] = useState(0); //(1)\n\n  const [orderItem, setOrderItem] = useState([]);\n  const [arrivalCoordinates, setArrivalCoordinates] = useState([106.68060027236189, 10.75909421616193]);\n  const [departureCoordinates, setDepartureCoordinates] = useState([106.68057155417674, 10.768685473523648]);\n  useEffect(() => {\n    async function fetchingCart(id) {\n      const cart = await getCart(id);\n      setOrderItem(cart);\n      setArrivalCoordinates([parseFloat(cart.longitude), parseFloat(cart.latitude)]);\n    }\n\n    if (user.isUserAuthenticated) {\n      fetchingCart(props.match.params.uid || user.profile.user_id);\n    }\n  }, []);\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"auto\"\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      fixed: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-checkout-container\",\n      children: [/*#__PURE__*/_jsxDEV(OrderDetail, {\n        orderForm: orderForm,\n        setOrderForm: setOrderForm,\n        deliveryFee: deliveryFee,\n        setDeliveryFee: setDeliveryFee,\n        departureCoordinates: departureCoordinates,\n        setDepartureCoordinates: setDepartureCoordinates,\n        arrivalCoordinates: arrivalCoordinates,\n        setArrivalCoordinates: setArrivalCoordinates,\n        deliveryOption: deliveryOption,\n        setDeliveryOption: setDeliveryOption,\n        setPromotionAmount: setPromotionAmount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(OrderReview, {\n        promotionAmount: promotionAmount,\n        orderForm: orderForm,\n        setOrderForm: setOrderForm,\n        deliveryFee: deliveryFee,\n        setDeliveryFee: setDeliveryFee,\n        deliveryOption: deliveryOption,\n        setDeliveryOption: setDeliveryOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToolBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderCheckout, \"M58hebKntFtDks4lMtvZDiAWjaM=\");\n\n_c = OrderCheckout;\nOrderCheckout.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  getCart: PropTypes.func.isRequired,\n  getPromotionAmountAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer,\n  product: state.ProductReducer\n});\n\nexport default withRouter(withAuth(connect(mapStateToProps, {\n  getCart,\n  getPromotionAmountAPI\n})(OrderCheckout)));\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderCheckout\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/OrderCheckout/OrderCheckout.js"],"names":["withAuth","NavBar","Footer","React","Fragment","useState","useEffect","ToolBar","withRouter","connect","PropTypes","OrderDetail","OrderReview","getCart","getPromotionAmountAPI","OrderCheckout","props","user","profile","user_id","undefined","String","match","params","uid","history","replace","promotionAmount","setPromotionAmount","orderForm","setOrderForm","delivery_mode","customer_id","customer_phone","delivery_address","delivery_method","delivery_fee","ecoupon_code","payment_method","payment_status","promotion_code","schedule_time","subtotal","tips","total","getPromotionAmount","amount","parseFloat","deliveryOption","setDeliveryOption","prevState","deliveryFee","setDeliveryFee","orderItem","setOrderItem","arrivalCoordinates","setArrivalCoordinates","departureCoordinates","setDepartureCoordinates","fetchingCart","id","cart","longitude","latitude","isUserAuthenticated","window","scrollTo","top","behavior","propTypes","object","isRequired","product","func","mapStateToProps","state","UserReducer","ProductReducer"],"mappings":"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","sourcesContent":["import withAuth from \"components/HigherOrderComponents(HOC)/withAuth\";\nimport NavBar from \"../Commons/Layout/NavBar/NavBar\";\nimport Footer from \"../Commons/Layout/Footer/Footer\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport ToolBar from \"../Commons/Layout/Toolbar/Toolbar\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport \"./OrderCheckout.scss\";\nimport OrderDetail from \"components/OrderCheckout/OrderDetail/OrderDetail\";\nimport OrderReview from \"components/OrderCheckout/OrderReview/OrderReview\";\nimport { getCart } from \"store/actions/CartAction/CartAction\";\nimport { getPromotionAmountAPI } from \"store/actions/OrderAction/OrderAction\";\n\nfunction OrderCheckout(props) {\n  useEffect(() => {\n    if (\n      props.user.profile.user_id !== -1 &&\n      props.user.profile.user_id !== undefined\n    ) {\n      if (String(props.user.profile.user_id) !== props.match.params.uid)\n        props.history.replace(\"/\");\n    }\n  }, [props.user.profile.user_id]);\n  const [promotionAmount, setPromotionAmount] = useState(0);\n  const { user, getCart } = props;\n  const [orderForm, setOrderForm] = useState({\n    delivery_mode: 1,\n    customer_id: props.match.params.uid,\n    customer_phone: \"\",\n    delivery_address: \"\",\n    delivery_method: 1,\n    delivery_fee: 0,\n    ecoupon_code: \"\",\n    payment_method: 1,\n    payment_status: 1,\n    promotion_code: \"\",\n    schedule_time: \"\",\n    subtotal: 0,\n    tips: 0,\n    total: 0,\n  });\n\n  useEffect(() => {\n    async function getPromotionAmount() {\n      const amount = await props.getPromotionAmountAPI(\n        orderForm.promotion_code,\n        parseFloat(orderForm.subtotal)\n      );\n      setPromotionAmount(amount);\n    }\n    if (orderForm.promotion_code !== \"\") {\n      getPromotionAmount();\n    }\n  }, [orderForm?.promotion_code]);\n  const [deliveryOption, setDeliveryOption] = useState(0);\n  useEffect(() => {\n    if (deliveryOption === 1)\n      setOrderForm((prevState) => ({\n        ...prevState,\n        delivery_mode: 2,\n      }));\n    else\n      setOrderForm((prevState) => ({\n        ...prevState,\n        delivery_mode: 1,\n      }));\n  }, [deliveryOption]);\n  const [deliveryFee, setDeliveryFee] = useState(0); //(1)\n  const [orderItem, setOrderItem] = useState([]);\n  const [arrivalCoordinates, setArrivalCoordinates] = useState([\n    106.68060027236189, 10.75909421616193,\n  ]);\n  const [departureCoordinates, setDepartureCoordinates] = useState([\n    106.68057155417674, 10.768685473523648,\n  ]);\n  useEffect(() => {\n    async function fetchingCart(id) {\n      const cart = await getCart(id);\n      setOrderItem(cart);\n      setArrivalCoordinates([\n        parseFloat(cart.longitude),\n        parseFloat(cart.latitude),\n      ]);\n    }\n    if (user.isUserAuthenticated) {\n      fetchingCart(props.match.params.uid || user.profile.user_id);\n    }\n  }, []);\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"auto\" });\n  }, []);\n  return (\n    <Fragment>\n      <NavBar fixed={true} />\n      <div className=\"order-checkout-container\">\n        <OrderDetail\n          orderForm={orderForm}\n          setOrderForm={setOrderForm}\n          deliveryFee={deliveryFee}\n          setDeliveryFee={setDeliveryFee}\n          departureCoordinates={departureCoordinates}\n          setDepartureCoordinates={setDepartureCoordinates}\n          arrivalCoordinates={arrivalCoordinates}\n          setArrivalCoordinates={setArrivalCoordinates}\n          deliveryOption={deliveryOption}\n          setDeliveryOption={setDeliveryOption}\n          setPromotionAmount={setPromotionAmount}\n        />\n        <OrderReview\n          promotionAmount={promotionAmount}\n          orderForm={orderForm}\n          setOrderForm={setOrderForm}\n          deliveryFee={deliveryFee}\n          setDeliveryFee={setDeliveryFee}\n          deliveryOption={deliveryOption}\n          setDeliveryOption={setDeliveryOption}\n        />\n      </div>\n      <Footer />\n      <ToolBar />\n    </Fragment>\n  );\n}\n\nOrderCheckout.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  getCart: PropTypes.func.isRequired,\n  getPromotionAmountAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n  product: state.ProductReducer,\n});\n\nexport default withRouter(\n  withAuth(\n    connect(mapStateToProps, { getCart, getPromotionAmountAPI })(OrderCheckout)\n  )\n);\n"]},"metadata":{},"sourceType":"module"}