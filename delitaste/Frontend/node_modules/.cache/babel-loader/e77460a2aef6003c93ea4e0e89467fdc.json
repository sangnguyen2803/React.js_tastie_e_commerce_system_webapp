{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/Shipper/Shipper.js\",\n    _s = $RefreshSig$();\n\nimport { withRouter } from \"react-router-dom\";\nimport NavBar from \"../Commons/Layout/NavBar/NavBar\";\nimport Footer from \"../Commons/Layout/Footer/Footer\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport ToolBar from \"../Commons/Layout/Toolbar/Toolbar\";\nimport \"./Shipper.scss\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\nimport CartImage from \"assets/cart.svg\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { ShipperLocation } from \"assets/dummy/ShipperLocations\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCartArrowDown } from \"@fortawesome/fontawesome-free-solid\";\nimport Avatar from \"assets/avatar.jpg\";\nimport { addNotificationAPI } from \"store/actions/OrderAction/OrderAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst shipper_info = {\n  name: \"Terry Harrison\",\n  license_plate: \"64B1 - 03663\",\n  rating: 5,\n  profile_image: \"https://pyxis.nymag.com/v1/imgs/231/dd4/b1d43dd12227a68877644b36e1b6c9850e-13-zayn-malik.rsquare.w330.jpg\"\n};\n\nfunction Shipper(props) {\n  _s();\n\n  const {\n    shipper\n  } = props;\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [orderCode, setOrderCode] = useState(\"\");\n  const [orderData, setOrderData] = useState({});\n  const [shipperConfirmBox, setShipperConfirmBox] = useState(false);\n  useEffect(() => {\n    shipper.socket.on(\"shipper-received-order\", (order, customer, provider, order_code) => {\n      setOrderData({\n        provider: {\n          name: provider.name,\n          phone: 1234567890,\n          address: provider.address,\n          location: provider.location,\n          provider_id: provider.provider_id\n        },\n        customer: {\n          user_id: customer.user_id,\n          name: customer.name,\n          phone: customer.phone,\n          address: customer.address,\n          location: customer.location\n        },\n        order: {\n          cart: [...order],\n          order_code: order_code\n        }\n      });\n      setShipperConfirmBox(true); // console.log(data);\n      // dispatch(ReceiveOrder(data));\n    });\n    return () => {\n      shipper.socket.disconnect();\n    };\n  }, []);\n\n  const sendMessage = text => {\n    if (text !== \"\") {\n      setMessages(prev => [...prev, text]);\n      setMessage(\"\");\n    }\n  };\n\n  useEffect(() => {\n    shipper.socket.emit(\"join-room\", orderCode);\n    shipper.socket.on(\"receive-customer-inbox\", message => {\n      console.log(messages);\n      setMessages(prev => [...prev, {\n        sender: \"customer\",\n        message: message.message\n      }]);\n    });\n  }, [orderCode]);\n\n  async function addNotification(data) {\n    const notification_id = await props.addNotificationAPI(data);\n    return notification_id;\n  }\n\n  const shipperAcceptOrder = async orderData => {\n    //user_notification\n    const user_notification_form = {\n      user_id: orderData.customer.user_id,\n      provider_id: null,\n      role: 1,\n      subject: shipper_info.name,\n      content: ` is taking care of your order ${orderData.order.order_code} at ${orderData.provider.name}.`,\n      //notification content\n      order_code: orderData.order.order_code,\n      read_status: false,\n      type: 1\n    };\n    const user_notification_id = await addNotification(user_notification_form);\n    user_notification_form.id = user_notification_id; //provider_notification\n\n    const provider_notification_form = {\n      user_id: null,\n      provider_id: orderData.provider.provider_id,\n      role: 2,\n      subject: `A new order ${orderData.order.order_code}`,\n      content: ` has been submitted to your restaurant. Check it out now.`,\n      //notification content\n      order_code: orderData.order.order_code,\n      read_status: false,\n      type: 2\n    };\n    const provider_notification_id = await addNotification(provider_notification_form);\n    provider_notification_form.id = provider_notification_id;\n    shipper.socket.emit(\"shipper-accepted-order\", orderData.order, orderData.customer, orderData.provider, orderData.order.order_code, user_notification_form, provider_notification_form);\n    setOrderCode(orderData.order.order_code);\n\n    try {\n      await axios.post(`/v1/api/tastie/order/update_order_status`, {\n        order_code: orderData.order.order_code,\n        status: 2,\n        // picked\n        shipper_id: null,\n        // edit actual shiper_id here\n        update_at: \"2022-04-21 20:11:11\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n\n    setShipperConfirmBox(false);\n  };\n\n  const shipperDeclineOrder = async orderData => {\n    shipper.socket.emit(\"shipper-decline-order\", orderData.order, orderData.customer, orderData.provider, orderData.order.order_code);\n    setShipperConfirmBox(false);\n  };\n\n  const shipperOnTheWay = async () => {\n    shipper.socket.emit(\"On-the-way\", orderData.order.order_code);\n\n    try {\n      await axios.post(`/v1/api/tastie/order/update_order_status`, {\n        order_code: orderData.order.order_code,\n        status: 4,\n        // picked\n        shipper_id: null,\n        // edit actual shiper_id here\n        update_at: \"2022-04-21 20:11:11\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const shipperFinishOrder = async () => {\n    shipper.socket.emit(\"Shipper-arrived\", \"The shipper has arrived at your place\", orderData.order.order_code);\n\n    try {\n      await axios.post(`/v1/api/tastie/order/update_order_status`, {\n        order_code: orderData.order.order_code,\n        status: 5,\n        shipper_id: null,\n        // edit actual shiper_id here\n        update_at: \"2022-04-21 20:11:11\"\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      fixed: true,\n      hideBreadcrumb: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shipper-main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shipper-container\",\n        children: [shipperConfirmBox ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shipper-utility-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"shi-uti-text\",\n            children: [\"You received a new order at \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: orderData.provider.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"shi-uti-text-medium\",\n            children: [\"Order code: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: orderData.order.order_code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"shi-uti-text-medium\",\n            children: \"Customer information:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"shi-uti-text-small\",\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), \" \", orderData.customer.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Phone number:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this), \" \", orderData.customer.phone, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), \" \", orderData.customer.address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n            float: \"center\",\n            width: 100,\n            mgTop: 5,\n            mgBottom: 5,\n            gap: 10,\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              color: \"white\",\n              bgColor: \"#710000\",\n              justifyContent: \"center\",\n              gap: \"10px\",\n              width: 100,\n              fontSize: 14,\n              height: 30,\n              label: \"Accept\",\n              onClick: () => shipperAcceptOrder(orderData)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"#101010\",\n              bgColor: \"#d6d6d6\",\n              justifyContent: \"center\",\n              gap: \"10px\",\n              width: 100,\n              fontSize: 14,\n              height: 30,\n              label: \"Decline\",\n              onClick: () => shipperDeclineOrder(orderData)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shipper-utility-row\",\n            style: {\n              height: \"200px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-body\",\n              style: {\n                justifyContent: \"center\",\n                width: \"100%\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: CartImage,\n                alt: \"cart_image\",\n                className: \"cart-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-image-description\",\n                style: {\n                  fontSize: 14\n                },\n                children: \"You have no new order at the moment.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shipper-utility-row\",\n          children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n            float: \"center\",\n            width: 100,\n            mgTop: 5,\n            mgBottom: 5,\n            gap: 15,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"shi-uti-text-medium\",\n              children: \"Shipper actions: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"white\",\n              bgColor: \"#710000\",\n              justifyContent: \"center\",\n              gap: \"10px\",\n              width: 140,\n              fontSize: 13,\n              height: 30,\n              label: \"Go to restaurant\",\n              onClick: () => shipperAcceptOrder()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"white\",\n              bgColor: \"#710000\",\n              justifyContent: \"center\",\n              gap: \"10px\",\n              width: 140,\n              fontSize: 13,\n              height: 30,\n              label: \"On the way\",\n              onClick: () => shipperOnTheWay()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"white\",\n              bgColor: \"#710000\",\n              justifyContent: \"center\",\n              gap: \"10px\",\n              width: 140,\n              fontSize: 13,\n              height: 30,\n              label: \"Complete order\",\n              onClick: () => shipperFinishOrder()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"or-st-ship-conversation\",\n          children: messages === null || messages === void 0 ? void 0 : messages.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `or-st-chat-item-${item.sender}`,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"or-st-chat-avatar\",\n              src: item.sender === \"shipper\" ? shipper.profile_image : Avatar,\n              alt: \"shipper_image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"or-st-chat-item-content\",\n              children: item.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"or-st-ship-chat-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"or-st-chat-content\",\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            name: \"chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"or-st-chat-submit\",\n            onClick: () => {\n              if (message !== \"\") {\n                setMessages(prev => [...prev, {\n                  sender: \"shipper\",\n                  message: message\n                }]);\n                shipper.socket.emit(\"shipper-inbox\", message, orderCode);\n                setMessage(\"\");\n              }\n            },\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToolBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Shipper, \"yfMeZ96DVoGHd4FkOgURHlQZUns=\");\n\n_c = Shipper;\nShipper.propTypes = {\n  user: PropTypes.object.isRequired,\n  shipper: PropTypes.object.isRequired,\n  addNotificationAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer,\n  shipper: state.ShipperReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  addNotificationAPI\n})(Shipper));\n\nvar _c;\n\n$RefreshReg$(_c, \"Shipper\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/Shipper/Shipper.js"],"names":["withRouter","NavBar","Footer","React","Fragment","useEffect","useState","ToolBar","Button","ButtonGroup","io","axios","PropTypes","connect","ShipperLocation","FontAwesomeIcon","faCartArrowDown","Avatar","addNotificationAPI","shipper_info","name","license_plate","rating","profile_image","Shipper","props","shipper","messages","setMessages","message","setMessage","orderCode","setOrderCode","orderData","setOrderData","shipperConfirmBox","setShipperConfirmBox","socket","on","order","customer","provider","order_code","phone","address","location","provider_id","user_id","cart","disconnect","sendMessage","text","prev","emit","console","log","sender","addNotification","data","notification_id","shipperAcceptOrder","user_notification_form","role","subject","content","read_status","type","user_notification_id","id","provider_notification_form","provider_notification_id","post","status","shipper_id","update_at","error","shipperDeclineOrder","shipperOnTheWay","shipperFinishOrder","height","justifyContent","width","CartImage","fontSize","map","item","index","e","target","value","propTypes","user","object","isRequired","func","mapStateToProps","state","UserReducer","ShipperReducer"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,kBAA3B;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,OAAO,gBAAP;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,OAAOC,WAAP,MAAwB,mDAAxB;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,eAAT,QAAgC,+BAAhC;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,eAAT,QAAgC,qCAAhC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,kBAAT,QAAmC,uCAAnC;;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAE,gBADa;AAEnBC,EAAAA,aAAa,EAAE,cAFI;AAGnBC,EAAAA,MAAM,EAAE,CAHW;AAInBC,EAAAA,aAAa,EACX;AALiB,CAArB;;AAQA,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAAA;;AACtB,QAAM;AAAEC,IAAAA;AAAF,MAAcD,KAApB;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0BtB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACuB,OAAD,EAAUC,UAAV,IAAwBxB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACyB,SAAD,EAAYC,YAAZ,IAA4B1B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC2B,SAAD,EAAYC,YAAZ,IAA4B5B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC6B,iBAAD,EAAoBC,oBAApB,IAA4C9B,QAAQ,CAAC,KAAD,CAA1D;AACAD,EAAAA,SAAS,CAAC,MAAM;AACdqB,IAAAA,OAAO,CAACW,MAAR,CAAeC,EAAf,CACE,wBADF,EAEE,CAACC,KAAD,EAAQC,QAAR,EAAkBC,QAAlB,EAA4BC,UAA5B,KAA2C;AACzCR,MAAAA,YAAY,CAAC;AACXO,QAAAA,QAAQ,EAAE;AACRrB,UAAAA,IAAI,EAAEqB,QAAQ,CAACrB,IADP;AAERuB,UAAAA,KAAK,EAAE,UAFC;AAGRC,UAAAA,OAAO,EAAEH,QAAQ,CAACG,OAHV;AAIRC,UAAAA,QAAQ,EAAEJ,QAAQ,CAACI,QAJX;AAKRC,UAAAA,WAAW,EAAEL,QAAQ,CAACK;AALd,SADC;AAQXN,QAAAA,QAAQ,EAAE;AACRO,UAAAA,OAAO,EAAEP,QAAQ,CAACO,OADV;AAER3B,UAAAA,IAAI,EAAEoB,QAAQ,CAACpB,IAFP;AAGRuB,UAAAA,KAAK,EAAEH,QAAQ,CAACG,KAHR;AAIRC,UAAAA,OAAO,EAAEJ,QAAQ,CAACI,OAJV;AAKRC,UAAAA,QAAQ,EAAEL,QAAQ,CAACK;AALX,SARC;AAeXN,QAAAA,KAAK,EAAE;AAAES,UAAAA,IAAI,EAAE,CAAC,GAAGT,KAAJ,CAAR;AAAoBG,UAAAA,UAAU,EAAEA;AAAhC;AAfI,OAAD,CAAZ;AAiBAN,MAAAA,oBAAoB,CAAC,IAAD,CAApB,CAlByC,CAmBzC;AACA;AACD,KAvBH;AAyBA,WAAO,MAAM;AACXV,MAAAA,OAAO,CAACW,MAAR,CAAeY,UAAf;AACD,KAFD;AAGD,GA7BQ,EA6BN,EA7BM,CAAT;;AA8BA,QAAMC,WAAW,GAAIC,IAAD,IAAU;AAC5B,QAAIA,IAAI,KAAK,EAAb,EAAiB;AACfvB,MAAAA,WAAW,CAAEwB,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAUD,IAAV,CAAX,CAAX;AACArB,MAAAA,UAAU,CAAC,EAAD,CAAV;AACD;AACF,GALD;;AAOAzB,EAAAA,SAAS,CAAC,MAAM;AACdqB,IAAAA,OAAO,CAACW,MAAR,CAAegB,IAAf,CAAoB,WAApB,EAAiCtB,SAAjC;AACAL,IAAAA,OAAO,CAACW,MAAR,CAAeC,EAAf,CAAkB,wBAAlB,EAA6CT,OAAD,IAAa;AACvDyB,MAAAA,OAAO,CAACC,GAAR,CAAY5B,QAAZ;AACAC,MAAAA,WAAW,CAAEwB,IAAD,IAAU,CACpB,GAAGA,IADiB,EAEpB;AAAEI,QAAAA,MAAM,EAAE,UAAV;AAAsB3B,QAAAA,OAAO,EAAEA,OAAO,CAACA;AAAvC,OAFoB,CAAX,CAAX;AAID,KAND;AAOD,GATQ,EASN,CAACE,SAAD,CATM,CAAT;;AAWA,iBAAe0B,eAAf,CAA+BC,IAA/B,EAAqC;AACnC,UAAMC,eAAe,GAAG,MAAMlC,KAAK,CAACP,kBAAN,CAAyBwC,IAAzB,CAA9B;AACA,WAAOC,eAAP;AACD;;AAED,QAAMC,kBAAkB,GAAG,MAAO3B,SAAP,IAAqB;AAC9C;AACA,UAAM4B,sBAAsB,GAAG;AAC7Bd,MAAAA,OAAO,EAAEd,SAAS,CAACO,QAAV,CAAmBO,OADC;AAE7BD,MAAAA,WAAW,EAAE,IAFgB;AAG7BgB,MAAAA,IAAI,EAAE,CAHuB;AAI7BC,MAAAA,OAAO,EAAE5C,YAAY,CAACC,IAJO;AAK7B4C,MAAAA,OAAO,EAAG,iCAAgC/B,SAAS,CAACM,KAAV,CAAgBG,UAAW,OAAMT,SAAS,CAACQ,QAAV,CAAmBrB,IAAK,GALtE;AAK0E;AACvGsB,MAAAA,UAAU,EAAET,SAAS,CAACM,KAAV,CAAgBG,UANC;AAO7BuB,MAAAA,WAAW,EAAE,KAPgB;AAQ7BC,MAAAA,IAAI,EAAE;AARuB,KAA/B;AAUA,UAAMC,oBAAoB,GAAG,MAAMV,eAAe,CAACI,sBAAD,CAAlD;AACAA,IAAAA,sBAAsB,CAACO,EAAvB,GAA4BD,oBAA5B,CAb8C,CAc9C;;AACA,UAAME,0BAA0B,GAAG;AACjCtB,MAAAA,OAAO,EAAE,IADwB;AAEjCD,MAAAA,WAAW,EAAEb,SAAS,CAACQ,QAAV,CAAmBK,WAFC;AAGjCgB,MAAAA,IAAI,EAAE,CAH2B;AAIjCC,MAAAA,OAAO,EAAG,eAAc9B,SAAS,CAACM,KAAV,CAAgBG,UAAW,EAJlB;AAKjCsB,MAAAA,OAAO,EAAG,2DALuB;AAKqC;AACtEtB,MAAAA,UAAU,EAAET,SAAS,CAACM,KAAV,CAAgBG,UANK;AAOjCuB,MAAAA,WAAW,EAAE,KAPoB;AAQjCC,MAAAA,IAAI,EAAE;AAR2B,KAAnC;AAUA,UAAMI,wBAAwB,GAAG,MAAMb,eAAe,CACpDY,0BADoD,CAAtD;AAGAA,IAAAA,0BAA0B,CAACD,EAA3B,GAAgCE,wBAAhC;AAEA5C,IAAAA,OAAO,CAACW,MAAR,CAAegB,IAAf,CACE,wBADF,EAEEpB,SAAS,CAACM,KAFZ,EAGEN,SAAS,CAACO,QAHZ,EAIEP,SAAS,CAACQ,QAJZ,EAKER,SAAS,CAACM,KAAV,CAAgBG,UALlB,EAMEmB,sBANF,EAOEQ,0BAPF;AASArC,IAAAA,YAAY,CAACC,SAAS,CAACM,KAAV,CAAgBG,UAAjB,CAAZ;;AACA,QAAI;AACF,YAAM/B,KAAK,CAAC4D,IAAN,CAAY,0CAAZ,EAAuD;AAC3D7B,QAAAA,UAAU,EAAET,SAAS,CAACM,KAAV,CAAgBG,UAD+B;AAE3D8B,QAAAA,MAAM,EAAE,CAFmD;AAEhD;AACXC,QAAAA,UAAU,EAAE,IAH+C;AAGzC;AAClBC,QAAAA,SAAS,EAAE;AAJgD,OAAvD,CAAN;AAMD,KAPD,CAOE,OAAOC,KAAP,EAAc;AACdrB,MAAAA,OAAO,CAACqB,KAAR,CAAcA,KAAd;AACD;;AACDvC,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACD,GAnDD;;AAoDA,QAAMwC,mBAAmB,GAAG,MAAO3C,SAAP,IAAqB;AAC/CP,IAAAA,OAAO,CAACW,MAAR,CAAegB,IAAf,CACE,uBADF,EAEEpB,SAAS,CAACM,KAFZ,EAGEN,SAAS,CAACO,QAHZ,EAIEP,SAAS,CAACQ,QAJZ,EAKER,SAAS,CAACM,KAAV,CAAgBG,UALlB;AAOAN,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACD,GATD;;AAUA,QAAMyC,eAAe,GAAG,YAAY;AAClCnD,IAAAA,OAAO,CAACW,MAAR,CAAegB,IAAf,CAAoB,YAApB,EAAkCpB,SAAS,CAACM,KAAV,CAAgBG,UAAlD;;AACA,QAAI;AACF,YAAM/B,KAAK,CAAC4D,IAAN,CAAY,0CAAZ,EAAuD;AAC3D7B,QAAAA,UAAU,EAAET,SAAS,CAACM,KAAV,CAAgBG,UAD+B;AAE3D8B,QAAAA,MAAM,EAAE,CAFmD;AAEhD;AACXC,QAAAA,UAAU,EAAE,IAH+C;AAGzC;AAClBC,QAAAA,SAAS,EAAE;AAJgD,OAAvD,CAAN;AAMD,KAPD,CAOE,OAAOC,KAAP,EAAc;AACdrB,MAAAA,OAAO,CAACqB,KAAR,CAAcA,KAAd;AACD;AACF,GAZD;;AAaA,QAAMG,kBAAkB,GAAG,YAAY;AACrCpD,IAAAA,OAAO,CAACW,MAAR,CAAegB,IAAf,CACE,iBADF,EAEE,uCAFF,EAGEpB,SAAS,CAACM,KAAV,CAAgBG,UAHlB;;AAKA,QAAI;AACF,YAAM/B,KAAK,CAAC4D,IAAN,CAAY,0CAAZ,EAAuD;AAC3D7B,QAAAA,UAAU,EAAET,SAAS,CAACM,KAAV,CAAgBG,UAD+B;AAE3D8B,QAAAA,MAAM,EAAE,CAFmD;AAG3DC,QAAAA,UAAU,EAAE,IAH+C;AAGzC;AAClBC,QAAAA,SAAS,EAAE;AAJgD,OAAvD,CAAN;AAMD,KAPD,CAOE,OAAOC,KAAP,EAAc;AACdrB,MAAAA,OAAO,CAACqB,KAAR,CAAcA,KAAd;AACD;AACF,GAhBD;;AAkBA,sBACE,QAAC,QAAD;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,KAAK,EAAE,IAAf;AAAqB,MAAA,cAAc,EAAE;AAArC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,mBACGxC,iBAAiB,gBAChB;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA,kCACE;AAAM,YAAA,SAAS,EAAC,cAAhB;AAAA,oEAC8B;AAAA,wBAAIF,SAAS,CAACQ,QAAV,CAAmBrB;AAAvB;AAAA;AAAA;AAAA;AAAA,oBAD9B;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AAAM,YAAA,SAAS,EAAC,qBAAhB;AAAA,oDACc;AAAA,wBAAIa,SAAS,CAACM,KAAV,CAAgBG;AAApB;AAAA;AAAA;AAAA;AAAA,oBADd;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,eAOE;AAAM,YAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,eAQE;AAAM,YAAA,SAAS,EAAC,oBAAhB;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,OACgBT,SAAS,CAACO,QAAV,CAAmBpB,IADnC,eAEE;AAAA;AAAA;AAAA;AAAA,oBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF,OAGwBa,SAAS,CAACO,QAAV,CAAmBG,KAH3C,eAIE;AAAA;AAAA;AAAA;AAAA,oBAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,OAKmBV,SAAS,CAACO,QAAV,CAAmBI,OALtC;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,eAeE,QAAC,WAAD;AACE,YAAA,KAAK,EAAC,QADR;AAEE,YAAA,KAAK,EAAE,GAFT;AAGE,YAAA,KAAK,EAAE,CAHT;AAIE,YAAA,QAAQ,EAAE,CAJZ;AAKE,YAAA,GAAG,EAAE,EALP;AAAA,oCAOE,QAAC,MAAD;AACE,cAAA,KAAK,EAAE,OADT;AAEE,cAAA,OAAO,EAAE,SAFX;AAGE,cAAA,cAAc,EAAE,QAHlB;AAIE,cAAA,GAAG,EAAE,MAJP;AAKE,cAAA,KAAK,EAAE,GALT;AAME,cAAA,QAAQ,EAAE,EANZ;AAOE,cAAA,MAAM,EAAE,EAPV;AAQE,cAAA,KAAK,EAAE,QART;AASE,cAAA,OAAO,EAAE,MAAMgB,kBAAkB,CAAC3B,SAAD;AATnC;AAAA;AAAA;AAAA;AAAA,oBAPF,eAmBE,QAAC,MAAD;AACE,cAAA,KAAK,EAAE,SADT;AAEE,cAAA,OAAO,EAAE,SAFX;AAGE,cAAA,cAAc,EAAE,QAHlB;AAIE,cAAA,GAAG,EAAE,MAJP;AAKE,cAAA,KAAK,EAAE,GALT;AAME,cAAA,QAAQ,EAAE,EANZ;AAOE,cAAA,MAAM,EAAE,EAPV;AAQE,cAAA,KAAK,EAAE,SART;AASE,cAAA,OAAO,EAAE,MAAM2C,mBAAmB,CAAC3C,SAAD;AATpC;AAAA;AAAA;AAAA;AAAA,oBAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAfF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADgB,gBAiDhB,QAAC,QAAD;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,qBAAf;AAAqC,YAAA,KAAK,EAAE;AAAE8C,cAAAA,MAAM,EAAE;AAAV,aAA5C;AAAA,mCACE;AACE,cAAA,SAAS,EAAC,WADZ;AAEE,cAAA,KAAK,EAAE;AAAEC,gBAAAA,cAAc,EAAE,QAAlB;AAA4BC,gBAAAA,KAAK,EAAE;AAAnC,eAFT;AAAA,sCAIE;AACE,gBAAA,GAAG,EAAEC,SADP;AAEE,gBAAA,GAAG,EAAC,YAFN;AAGE,gBAAA,SAAS,EAAC;AAHZ;AAAA;AAAA;AAAA;AAAA,sBAJF,eASE;AACE,gBAAA,SAAS,EAAC,wBADZ;AAEE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,QAAQ,EAAE;AAAZ,iBAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAlDJ,eAuEE;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA,iCACE,QAAC,WAAD;AACE,YAAA,KAAK,EAAC,QADR;AAEE,YAAA,KAAK,EAAE,GAFT;AAGE,YAAA,KAAK,EAAE,CAHT;AAIE,YAAA,QAAQ,EAAE,CAJZ;AAKE,YAAA,GAAG,EAAE,EALP;AAAA,oCAOE;AAAM,cAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPF,eAQE,QAAC,MAAD;AACE,cAAA,KAAK,EAAE,OADT;AAEE,cAAA,OAAO,EAAE,SAFX;AAGE,cAAA,cAAc,EAAE,QAHlB;AAIE,cAAA,GAAG,EAAE,MAJP;AAKE,cAAA,KAAK,EAAE,GALT;AAME,cAAA,QAAQ,EAAE,EANZ;AAOE,cAAA,MAAM,EAAE,EAPV;AAQE,cAAA,KAAK,EAAE,kBART;AASE,cAAA,OAAO,EAAE,MAAMvB,kBAAkB;AATnC;AAAA;AAAA;AAAA;AAAA,oBARF,eAoBE,QAAC,MAAD;AACE,cAAA,KAAK,EAAE,OADT;AAEE,cAAA,OAAO,EAAE,SAFX;AAGE,cAAA,cAAc,EAAE,QAHlB;AAIE,cAAA,GAAG,EAAE,MAJP;AAKE,cAAA,KAAK,EAAE,GALT;AAME,cAAA,QAAQ,EAAE,EANZ;AAOE,cAAA,MAAM,EAAE,EAPV;AAQE,cAAA,KAAK,EAAE,YART;AASE,cAAA,OAAO,EAAE,MAAMiB,eAAe;AAThC;AAAA;AAAA;AAAA;AAAA,oBApBF,eAgCE,QAAC,MAAD;AACE,cAAA,KAAK,EAAE,OADT;AAEE,cAAA,OAAO,EAAE,SAFX;AAGE,cAAA,cAAc,EAAE,QAHlB;AAIE,cAAA,GAAG,EAAE,MAJP;AAKE,cAAA,KAAK,EAAE,GALT;AAME,cAAA,QAAQ,EAAE,EANZ;AAOE,cAAA,MAAM,EAAE,EAPV;AAQE,cAAA,KAAK,EAAE,gBART;AASE,cAAA,OAAO,EAAE,MAAMC,kBAAkB;AATnC;AAAA;AAAA;AAAA;AAAA,oBAhCF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAvEF,eAqHE;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,oBACGnD,QADH,aACGA,QADH,uBACGA,QAAQ,CAAEyD,GAAV,CAAc,CAACC,IAAD,EAAOC,KAAP,kBACb;AAAiB,YAAA,SAAS,EAAG,mBAAkBD,IAAI,CAAC7B,MAAO,EAA3D;AAAA,oCACE;AACE,cAAA,SAAS,EAAC,mBADZ;AAEE,cAAA,GAAG,EACD6B,IAAI,CAAC7B,MAAL,KAAgB,SAAhB,GAA4B9B,OAAO,CAACH,aAApC,GAAoDN,MAHxD;AAKE,cAAA,GAAG,EAAC;AALN;AAAA;AAAA;AAAA;AAAA,oBADF,eAQE;AAAM,cAAA,SAAS,EAAC,yBAAhB;AAAA,wBAA2CoE,IAAI,CAACxD;AAAhD;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA,aAAUyD,KAAV;AAAA;AAAA;AAAA;AAAA,kBADD;AADH;AAAA;AAAA;AAAA;AAAA,gBArHF,eAmIE;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA,kCACE;AACE,YAAA,SAAS,EAAC,oBADZ;AAEE,YAAA,KAAK,EAAEzD,OAFT;AAGE,YAAA,QAAQ,EAAG0D,CAAD,IAAOzD,UAAU,CAACyD,CAAC,CAACC,MAAF,CAASC,KAAV,CAH7B;AAIE,YAAA,IAAI,EAAC;AAJP;AAAA;AAAA;AAAA;AAAA,kBADF,eAOE;AACE,YAAA,SAAS,EAAC,mBADZ;AAEE,YAAA,OAAO,EAAE,MAAM;AACb,kBAAI5D,OAAO,KAAK,EAAhB,EAAoB;AAClBD,gBAAAA,WAAW,CAAEwB,IAAD,IAAU,CACpB,GAAGA,IADiB,EAEpB;AAAEI,kBAAAA,MAAM,EAAE,SAAV;AAAqB3B,kBAAAA,OAAO,EAAEA;AAA9B,iBAFoB,CAAX,CAAX;AAIAH,gBAAAA,OAAO,CAACW,MAAR,CAAegB,IAAf,CAAoB,eAApB,EAAqCxB,OAArC,EAA8CE,SAA9C;AACAD,gBAAAA,UAAU,CAAC,EAAD,CAAV;AACD;AACF,aAXH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnIF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF,eA+JE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YA/JF,eAgKE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,YAhKF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoKD;;GA7TQN,O;;KAAAA,O;AA+TTA,OAAO,CAACkE,SAAR,GAAoB;AAClBC,EAAAA,IAAI,EAAE/E,SAAS,CAACgF,MAAV,CAAiBC,UADL;AAElBnE,EAAAA,OAAO,EAAEd,SAAS,CAACgF,MAAV,CAAiBC,UAFR;AAGlB3E,EAAAA,kBAAkB,EAAEN,SAAS,CAACkF,IAAV,CAAeD;AAHjB,CAApB;;AAMA,MAAME,eAAe,GAAIC,KAAD,KAAY;AAClCL,EAAAA,IAAI,EAAEK,KAAK,CAACC,WADsB;AAElCvE,EAAAA,OAAO,EAAEsE,KAAK,CAACE;AAFmB,CAAZ,CAAxB;;AAKA,eAAelG,UAAU,CACvBa,OAAO,CAACkF,eAAD,EAAkB;AAAE7E,EAAAA;AAAF,CAAlB,CAAP,CAAiDM,OAAjD,CADuB,CAAzB","sourcesContent":["import { withRouter } from \"react-router-dom\";\nimport NavBar from \"../Commons/Layout/NavBar/NavBar\";\nimport Footer from \"../Commons/Layout/Footer/Footer\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport ToolBar from \"../Commons/Layout/Toolbar/Toolbar\";\nimport \"./Shipper.scss\";\nimport Button from \"components/Commons/Button/Button\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\nimport CartImage from \"assets/cart.svg\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { ShipperLocation } from \"assets/dummy/ShipperLocations\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCartArrowDown } from \"@fortawesome/fontawesome-free-solid\";\nimport Avatar from \"assets/avatar.jpg\";\nimport { addNotificationAPI } from \"store/actions/OrderAction/OrderAction\";\nconst shipper_info = {\n  name: \"Terry Harrison\",\n  license_plate: \"64B1 - 03663\",\n  rating: 5,\n  profile_image:\n    \"https://pyxis.nymag.com/v1/imgs/231/dd4/b1d43dd12227a68877644b36e1b6c9850e-13-zayn-malik.rsquare.w330.jpg\",\n};\n\nfunction Shipper(props) {\n  const { shipper } = props;\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [orderCode, setOrderCode] = useState(\"\");\n  const [orderData, setOrderData] = useState({});\n  const [shipperConfirmBox, setShipperConfirmBox] = useState(false);\n  useEffect(() => {\n    shipper.socket.on(\n      \"shipper-received-order\",\n      (order, customer, provider, order_code) => {\n        setOrderData({\n          provider: {\n            name: provider.name,\n            phone: 1234567890,\n            address: provider.address,\n            location: provider.location,\n            provider_id: provider.provider_id,\n          },\n          customer: {\n            user_id: customer.user_id,\n            name: customer.name,\n            phone: customer.phone,\n            address: customer.address,\n            location: customer.location,\n          },\n          order: { cart: [...order], order_code: order_code },\n        });\n        setShipperConfirmBox(true);\n        // console.log(data);\n        // dispatch(ReceiveOrder(data));\n      }\n    );\n    return () => {\n      shipper.socket.disconnect();\n    };\n  }, []);\n  const sendMessage = (text) => {\n    if (text !== \"\") {\n      setMessages((prev) => [...prev, text]);\n      setMessage(\"\");\n    }\n  };\n\n  useEffect(() => {\n    shipper.socket.emit(\"join-room\", orderCode);\n    shipper.socket.on(\"receive-customer-inbox\", (message) => {\n      console.log(messages);\n      setMessages((prev) => [\n        ...prev,\n        { sender: \"customer\", message: message.message },\n      ]);\n    });\n  }, [orderCode]);\n\n  async function addNotification(data) {\n    const notification_id = await props.addNotificationAPI(data);\n    return notification_id;\n  }\n\n  const shipperAcceptOrder = async (orderData) => {\n    //user_notification\n    const user_notification_form = {\n      user_id: orderData.customer.user_id,\n      provider_id: null,\n      role: 1,\n      subject: shipper_info.name,\n      content: ` is taking care of your order ${orderData.order.order_code} at ${orderData.provider.name}.`, //notification content\n      order_code: orderData.order.order_code,\n      read_status: false,\n      type: 1,\n    };\n    const user_notification_id = await addNotification(user_notification_form);\n    user_notification_form.id = user_notification_id;\n    //provider_notification\n    const provider_notification_form = {\n      user_id: null,\n      provider_id: orderData.provider.provider_id,\n      role: 2,\n      subject: `A new order ${orderData.order.order_code}`,\n      content: ` has been submitted to your restaurant. Check it out now.`, //notification content\n      order_code: orderData.order.order_code,\n      read_status: false,\n      type: 2,\n    };\n    const provider_notification_id = await addNotification(\n      provider_notification_form\n    );\n    provider_notification_form.id = provider_notification_id;\n\n    shipper.socket.emit(\n      \"shipper-accepted-order\",\n      orderData.order,\n      orderData.customer,\n      orderData.provider,\n      orderData.order.order_code,\n      user_notification_form,\n      provider_notification_form\n    );\n    setOrderCode(orderData.order.order_code);\n    try {\n      await axios.post(`/v1/api/tastie/order/update_order_status`, {\n        order_code: orderData.order.order_code,\n        status: 2, // picked\n        shipper_id: null, // edit actual shiper_id here\n        update_at: \"2022-04-21 20:11:11\",\n      });\n    } catch (error) {\n      console.error(error);\n    }\n    setShipperConfirmBox(false);\n  };\n  const shipperDeclineOrder = async (orderData) => {\n    shipper.socket.emit(\n      \"shipper-decline-order\",\n      orderData.order,\n      orderData.customer,\n      orderData.provider,\n      orderData.order.order_code\n    );\n    setShipperConfirmBox(false);\n  };\n  const shipperOnTheWay = async () => {\n    shipper.socket.emit(\"On-the-way\", orderData.order.order_code);\n    try {\n      await axios.post(`/v1/api/tastie/order/update_order_status`, {\n        order_code: orderData.order.order_code,\n        status: 4, // picked\n        shipper_id: null, // edit actual shiper_id here\n        update_at: \"2022-04-21 20:11:11\",\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const shipperFinishOrder = async () => {\n    shipper.socket.emit(\n      \"Shipper-arrived\",\n      \"The shipper has arrived at your place\",\n      orderData.order.order_code\n    );\n    try {\n      await axios.post(`/v1/api/tastie/order/update_order_status`, {\n        order_code: orderData.order.order_code,\n        status: 5,\n        shipper_id: null, // edit actual shiper_id here\n        update_at: \"2022-04-21 20:11:11\",\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Fragment>\n      <NavBar fixed={true} hideBreadcrumb={true} />\n      <div className=\"shipper-main\">\n        <div className=\"shipper-container\">\n          {shipperConfirmBox ? (\n            <div className=\"shipper-utility-row\">\n              <span className=\"shi-uti-text\">\n                You received a new order at <b>{orderData.provider.name}</b>\n              </span>\n              <span className=\"shi-uti-text-medium\">\n                Order code: <b>{orderData.order.order_code}</b>\n              </span>\n              <span className=\"shi-uti-text-medium\">Customer information:</span>\n              <span className=\"shi-uti-text-small\">\n                <b>Name:</b> {orderData.customer.name}\n                <br />\n                <b>Phone number:</b> {orderData.customer.phone}\n                <br />\n                <b>Address:</b> {orderData.customer.address}\n              </span>\n              <ButtonGroup\n                float=\"center\"\n                width={100}\n                mgTop={5}\n                mgBottom={5}\n                gap={10}\n              >\n                <Button\n                  color={\"white\"}\n                  bgColor={\"#710000\"}\n                  justifyContent={\"center\"}\n                  gap={\"10px\"}\n                  width={100}\n                  fontSize={14}\n                  height={30}\n                  label={\"Accept\"}\n                  onClick={() => shipperAcceptOrder(orderData)}\n                />\n\n                <Button\n                  color={\"#101010\"}\n                  bgColor={\"#d6d6d6\"}\n                  justifyContent={\"center\"}\n                  gap={\"10px\"}\n                  width={100}\n                  fontSize={14}\n                  height={30}\n                  label={\"Decline\"}\n                  onClick={() => shipperDeclineOrder(orderData)}\n                />\n              </ButtonGroup>\n            </div>\n          ) : (\n            <Fragment>\n              <div className=\"shipper-utility-row\" style={{ height: \"200px\" }}>\n                <div\n                  className=\"cart-body\"\n                  style={{ justifyContent: \"center\", width: \"100%\" }}\n                >\n                  <img\n                    src={CartImage}\n                    alt=\"cart_image\"\n                    className=\"cart-image\"\n                  />\n                  <span\n                    className=\"cart-image-description\"\n                    style={{ fontSize: 14 }}\n                  >\n                    You have no new order at the moment.\n                  </span>\n                </div>\n              </div>\n            </Fragment>\n          )}\n          <div className=\"shipper-utility-row\">\n            <ButtonGroup\n              float=\"center\"\n              width={100}\n              mgTop={5}\n              mgBottom={5}\n              gap={15}\n            >\n              <span className=\"shi-uti-text-medium\">Shipper actions: </span>\n              <Button\n                color={\"white\"}\n                bgColor={\"#710000\"}\n                justifyContent={\"center\"}\n                gap={\"10px\"}\n                width={140}\n                fontSize={13}\n                height={30}\n                label={\"Go to restaurant\"}\n                onClick={() => shipperAcceptOrder()}\n              />\n\n              <Button\n                color={\"white\"}\n                bgColor={\"#710000\"}\n                justifyContent={\"center\"}\n                gap={\"10px\"}\n                width={140}\n                fontSize={13}\n                height={30}\n                label={\"On the way\"}\n                onClick={() => shipperOnTheWay()}\n              />\n\n              <Button\n                color={\"white\"}\n                bgColor={\"#710000\"}\n                justifyContent={\"center\"}\n                gap={\"10px\"}\n                width={140}\n                fontSize={13}\n                height={30}\n                label={\"Complete order\"}\n                onClick={() => shipperFinishOrder()}\n              />\n            </ButtonGroup>\n          </div>\n          <div className=\"or-st-ship-conversation\">\n            {messages?.map((item, index) => (\n              <div key={index} className={`or-st-chat-item-${item.sender}`}>\n                <img\n                  className=\"or-st-chat-avatar\"\n                  src={\n                    item.sender === \"shipper\" ? shipper.profile_image : Avatar\n                  }\n                  alt=\"shipper_image\"\n                />\n                <span className=\"or-st-chat-item-content\">{item.message}</span>\n              </div>\n            ))}\n          </div>\n          <div className=\"or-st-ship-chat-bar\">\n            <input\n              className=\"or-st-chat-content\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              name=\"chat\"\n            />\n            <div\n              className=\"or-st-chat-submit\"\n              onClick={() => {\n                if (message !== \"\") {\n                  setMessages((prev) => [\n                    ...prev,\n                    { sender: \"shipper\", message: message },\n                  ]);\n                  shipper.socket.emit(\"shipper-inbox\", message, orderCode);\n                  setMessage(\"\");\n                }\n              }}\n            >\n              Send\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n      <ToolBar />\n    </Fragment>\n  );\n}\n\nShipper.propTypes = {\n  user: PropTypes.object.isRequired,\n  shipper: PropTypes.object.isRequired,\n  addNotificationAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n  shipper: state.ShipperReducer,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, { addNotificationAPI })(Shipper)\n);\n"]},"metadata":{},"sourceType":"module"}