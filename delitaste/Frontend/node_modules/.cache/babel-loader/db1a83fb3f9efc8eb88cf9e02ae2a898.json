{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/Commons/Cart/Cart.js\",\n    _s = $RefreshSig$();\n\nimport { Fragment, useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport Button from \"components/Commons/Button/Button\";\nimport CartImage from \"assets/cart.svg\";\nimport \"./Cart.scss\";\nimport { getCart, removeCartItem } from \"store/actions/CartAction/CartAction\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/fontawesome-free-solid\";\nimport { calculateSubTotalPrice } from \"utils/BusinessUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Cart = props => {\n  _s();\n\n  var _cartItemList$cart;\n\n  const {\n    user,\n    getCart,\n    removeCartItem\n  } = props;\n  const [subTotal, setSubTotal] = useState(0);\n  const [cartItemList, setCartItemList] = useState([]);\n  useEffect(() => {\n    async function fetchingCart(id) {\n      const cart = await getCart(id);\n      setCartItemList(cart);\n    }\n\n    if (user.isUserAuthenticated) {\n      var _user$profile;\n\n      fetchingCart((_user$profile = user.profile) === null || _user$profile === void 0 ? void 0 : _user$profile.user_id);\n    }\n  }, []);\n  useEffect(() => {\n    var result = 0;\n    if (cartItemList === null || cartItemList === void 0 ? void 0 : cartItemList.cart) result = calculateSubTotalPrice(cartItemList.cart);\n    setSubTotal(result);\n  }, [cartItemList]);\n\n  const removeItemFromCart = (productId, code) => {\n    var _user$profile2;\n\n    async function removeItem(userId, productId, code) {\n      await removeCartItem(userId, productId, code);\n      var result = 0;\n      if (cartItemList === null || cartItemList === void 0 ? void 0 : cartItemList.cart) result = calculateSubTotalPrice(cartItemList.cart);\n      setSubTotal(result);\n    }\n\n    removeItem((_user$profile2 = user.profile) === null || _user$profile2 === void 0 ? void 0 : _user$profile2.user_id, productId, code);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-content-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-title\",\n          style: {\n            fontSize: 26\n          },\n          children: (cartItemList === null || cartItemList === void 0 ? void 0 : cartItemList.provider_name) !== -1 ? cartItemList === null || cartItemList === void 0 ? void 0 : cartItemList.provider_name : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), !(cartItemList === null || cartItemList === void 0 ? void 0 : cartItemList.cart) ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-body\",\n        style: {\n          justifyContent: \"center\",\n          height: \"calc(100vh - 170px)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: CartImage,\n          alt: \"cart_image\",\n          className: \"cart-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"cart-image-description\",\n          children: \"Add items from a restaurant or store to start a new cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-body\",\n        children: cartItemList === null || cartItemList === void 0 ? void 0 : (_cartItemList$cart = cartItemList.cart) === null || _cartItemList$cart === void 0 ? void 0 : _cartItemList$cart.map((cart, index) => {\n          var _cart$product_options;\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-item-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cart-item-quantity\",\n              children: [\"\\xD7 \", cart.quantity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: cart.product_image,\n              alt: \"cart_item_image\",\n              className: \"cart-item-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-main-text-section\",\n              onClick: () => props.history.push(`/provider-detail/${cartItemList.provider_id}`),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-item-main-text\",\n                children: cart.product_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-item-sub-text\",\n                style: {\n                  alignSelf: \"flex-start\",\n                  fontSize: 12\n                },\n                children: [\"\\u20AC \", cart.product_price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 19\n              }, this), cart === null || cart === void 0 ? void 0 : (_cart$product_options = cart.product_options) === null || _cart$product_options === void 0 ? void 0 : _cart$product_options.map((option, index) => /*#__PURE__*/_jsxDEV(Fragment, {\n                children: option.label !== \"?\" && /*#__PURE__*/_jsxDEV(Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"cart-item-option-text-1\",\n                    children: `${option.label} ${parseInt(option.price) === 0 ? \"(FREE)\" : `(€ ${option.price})`}:`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"cart-item-option-text-2\",\n                    children: [\"\\u2022 \", `${option.value} `]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 25\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, this)), cart.note && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-note\",\n                children: [\"\\u2022 NOTE: \", cart.note]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cart-item-sub-text\",\n              children: [\"\\u20AC \", ((cart.product_price || 0.0) * cart.quantity).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cart-surfix-pos-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                className: \"cart-close-icon\",\n                onClick: () => removeItemFromCart(cart.product_id, cart.item_code),\n                icon: faTimes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), (cartItemList === null || cartItemList === void 0 ? void 0 : cartItemList.cart) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-footer-sub-text\",\n          children: \"Clear cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"white\",\n          bgColor: \"#101010\",\n          justifyContent: \"center\",\n          gap: \"10px\",\n          width: \"100%\",\n          fontSize: 16,\n          height: 45,\n          label: `Go to checkout • € ${parseFloat(subTotal).toFixed(2)}`,\n          onClick: () => {\n            var _user$userCart;\n\n            props.history.push(`/order-checkout/${(_user$userCart = user.userCart) === null || _user$userCart === void 0 ? void 0 : _user$userCart.user_id}`);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Cart, \"yBTrdRFYZf8E1JOBVC6gbL1Fiio=\");\n\n_c = Cart;\nCart.propTypes = {\n  user: PropTypes.object.isRequired,\n  getCart: PropTypes.func.isRequired,\n  removeCartItem: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  getCart,\n  removeCartItem\n})(Cart));\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/Commons/Cart/Cart.js"],"names":["Fragment","useState","useEffect","withRouter","connect","PropTypes","Button","getCart","removeCartItem","FontAwesomeIcon","faTimes","calculateSubTotalPrice","Cart","props","user","subTotal","setSubTotal","cartItemList","setCartItemList","fetchingCart","id","cart","isUserAuthenticated","profile","user_id","result","removeItemFromCart","productId","code","removeItem","userId","fontSize","provider_name","justifyContent","height","CartImage","map","index","quantity","product_image","history","push","provider_id","product_name","alignSelf","product_price","product_options","option","label","parseInt","price","value","note","toFixed","product_id","item_code","parseFloat","userCart","propTypes","object","isRequired","func","mapStateToProps","state","UserReducer"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,QAAnB,EAA6BC,SAA7B,QAA8C,OAA9C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,kCAAnB;;AAEA,OAAO,aAAP;AACA,SAASC,OAAT,EAAkBC,cAAlB,QAAwC,qCAAxC;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,OAAT,QAAwB,qCAAxB;AACA,SAASC,sBAAT,QAAuC,qBAAvC;;;AAEA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AAAA;;AAAA;;AACtB,QAAM;AAAEC,IAAAA,IAAF;AAAQP,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAAoCK,KAA1C;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACgB,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAAC,EAAD,CAAhD;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeiB,YAAf,CAA4BC,EAA5B,EAAgC;AAC9B,YAAMC,IAAI,GAAG,MAAMd,OAAO,CAACa,EAAD,CAA1B;AACAF,MAAAA,eAAe,CAACG,IAAD,CAAf;AACD;;AACD,QAAIP,IAAI,CAACQ,mBAAT,EAA8B;AAAA;;AAC5BH,MAAAA,YAAY,kBAACL,IAAI,CAACS,OAAN,kDAAC,cAAcC,OAAf,CAAZ;AACD;AACF,GARQ,EAQN,EARM,CAAT;AASAtB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIuB,MAAM,GAAG,CAAb;AACA,QAAIR,YAAJ,aAAIA,YAAJ,uBAAIA,YAAY,CAAEI,IAAlB,EAAwBI,MAAM,GAAGd,sBAAsB,CAACM,YAAY,CAACI,IAAd,CAA/B;AACxBL,IAAAA,WAAW,CAACS,MAAD,CAAX;AACD,GAJQ,EAIN,CAACR,YAAD,CAJM,CAAT;;AAMA,QAAMS,kBAAkB,GAAG,CAACC,SAAD,EAAYC,IAAZ,KAAqB;AAAA;;AAC9C,mBAAeC,UAAf,CAA0BC,MAA1B,EAAkCH,SAAlC,EAA6CC,IAA7C,EAAmD;AACjD,YAAMpB,cAAc,CAACsB,MAAD,EAASH,SAAT,EAAoBC,IAApB,CAApB;AACA,UAAIH,MAAM,GAAG,CAAb;AACA,UAAIR,YAAJ,aAAIA,YAAJ,uBAAIA,YAAY,CAAEI,IAAlB,EACEI,MAAM,GAAGd,sBAAsB,CAACM,YAAY,CAACI,IAAd,CAA/B;AACFL,MAAAA,WAAW,CAACS,MAAD,CAAX;AACD;;AACDI,IAAAA,UAAU,mBAACf,IAAI,CAACS,OAAN,mDAAC,eAAcC,OAAf,EAAwBG,SAAxB,EAAmCC,IAAnC,CAAV;AACD,GATD;;AAWA,sBACE,QAAC,QAAD;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAA4B,UAAA,KAAK,EAAE;AAAEG,YAAAA,QAAQ,EAAE;AAAZ,WAAnC;AAAA,oBACG,CAAAd,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEe,aAAd,MAAgC,CAAC,CAAjC,GACGf,YADH,aACGA,YADH,uBACGA,YAAY,CAAEe,aADjB,GAEG;AAHN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,EAQG,EAACf,YAAD,aAACA,YAAD,uBAACA,YAAY,CAAEI,IAAf,iBACC;AACE,QAAA,SAAS,EAAC,WADZ;AAEE,QAAA,KAAK,EAAE;AAAEY,UAAAA,cAAc,EAAE,QAAlB;AAA4BC,UAAAA,MAAM,EAAE;AAApC,SAFT;AAAA,gCAIE;AAAK,UAAA,GAAG,EAAEC,SAAV;AAAqB,UAAA,GAAG,EAAC,YAAzB;AAAsC,UAAA,SAAS,EAAC;AAAhD;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE;AAAM,UAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,gBAWC;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,kBACGlB,YADH,aACGA,YADH,6CACGA,YAAY,CAAEI,IADjB,uDACG,mBAAoBe,GAApB,CAAwB,CAACf,IAAD,EAAOgB,KAAP;AAAA;;AAAA,8BACvB;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,oCACE;AAAM,cAAA,SAAS,EAAC,oBAAhB;AAAA,kCACWhB,IAAI,CAACiB,QADhB;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AACE,cAAA,GAAG,EAAEjB,IAAI,CAACkB,aADZ;AAEE,cAAA,GAAG,EAAC,iBAFN;AAGE,cAAA,SAAS,EAAC;AAHZ;AAAA;AAAA;AAAA;AAAA,oBAJF,eASE;AACE,cAAA,SAAS,EAAC,wBADZ;AAEE,cAAA,OAAO,EAAE,MACP1B,KAAK,CAAC2B,OAAN,CAAcC,IAAd,CACG,oBAAmBxB,YAAY,CAACyB,WAAY,EAD/C,CAHJ;AAAA,sCAQE;AAAM,gBAAA,SAAS,EAAC,qBAAhB;AAAA,0BACGrB,IAAI,CAACsB;AADR;AAAA;AAAA;AAAA;AAAA,sBARF,eAWE;AACE,gBAAA,SAAS,EAAC,oBADZ;AAEE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,SAAS,EAAE,YAAb;AAA2Bb,kBAAAA,QAAQ,EAAE;AAArC,iBAFT;AAAA,sCAIKV,IAAI,CAACwB,aAJV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAXF,EAiBGxB,IAjBH,aAiBGA,IAjBH,gDAiBGA,IAAI,CAAEyB,eAjBT,0DAiBG,sBAAuBV,GAAvB,CAA2B,CAACW,MAAD,EAASV,KAAT,kBAC1B,QAAC,QAAD;AAAA,0BACGU,MAAM,CAACC,KAAP,KAAiB,GAAjB,iBACC,QAAC,QAAD;AAAA,0CACE;AAAM,oBAAA,SAAS,EAAC,yBAAhB;AAAA,8BAA4C,GAC1CD,MAAM,CAACC,KACR,IACCC,QAAQ,CAACF,MAAM,CAACG,KAAR,CAAR,KAA2B,CAA3B,GACI,QADJ,GAEK,MAAKH,MAAM,CAACG,KAAM,GACxB;AAND;AAAA;AAAA;AAAA;AAAA,0BADF,eAQE;AAAM,oBAAA,SAAS,EAAC,yBAAhB;AAAA,0CACM,GAAEH,MAAM,CAACI,KAAM,GADrB;AAAA;AAAA;AAAA;AAAA;AAAA,0BARF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ,iBAAed,KAAf;AAAA;AAAA;AAAA;AAAA,sBADD,CAjBH,EAmCGhB,IAAI,CAAC+B,IAAL,iBACC;AAAM,gBAAA,SAAS,EAAC,WAAhB;AAAA,4CAAqC/B,IAAI,CAAC+B,IAA1C;AAAA;AAAA;AAAA;AAAA;AAAA,sBApCJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,eAgDE;AAAM,cAAA,SAAS,EAAC,oBAAhB;AAAA,oCACK,CAAC,CAAC/B,IAAI,CAACwB,aAAL,IAAsB,GAAvB,IAA8BxB,IAAI,CAACiB,QAApC,EAA8Ce,OAA9C,CAAsD,CAAtD,CADL;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhDF,eAmDE;AAAM,cAAA,SAAS,EAAC,yBAAhB;AAAA,qCACE,QAAC,eAAD;AACE,gBAAA,SAAS,EAAC,iBADZ;AAEE,gBAAA,OAAO,EAAE,MACP3B,kBAAkB,CAACL,IAAI,CAACiC,UAAN,EAAkBjC,IAAI,CAACkC,SAAvB,CAHtB;AAKE,gBAAA,IAAI,EAAE7C;AALR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAnDF;AAAA,aAAwC2B,KAAxC;AAAA;AAAA;AAAA;AAAA,kBADuB;AAAA,SAAxB;AADH;AAAA;AAAA;AAAA;AAAA,cAnBJ,EAqFG,CAAApB,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEI,IAAd,kBACC;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,MAAD;AACE,UAAA,KAAK,EAAE,OADT;AAEE,UAAA,OAAO,EAAE,SAFX;AAGE,UAAA,cAAc,EAAE,QAHlB;AAIE,UAAA,GAAG,EAAE,MAJP;AAKE,UAAA,KAAK,EAAE,MALT;AAME,UAAA,QAAQ,EAAE,EANZ;AAOE,UAAA,MAAM,EAAE,EAPV;AAQE,UAAA,KAAK,EAAG,sBAAqBmC,UAAU,CAACzC,QAAD,CAAV,CAAqBsC,OAArB,CAA6B,CAA7B,CAAgC,EAR/D;AASE,UAAA,OAAO,EAAE,MAAM;AAAA;;AACbxC,YAAAA,KAAK,CAAC2B,OAAN,CAAcC,IAAd,CAAoB,mBAAD,kBAAmB3B,IAAI,CAAC2C,QAAxB,mDAAmB,eAAejC,OAAQ,EAA7D;AACD;AAXH;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAtFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA4GD,CA1ID;;GAAMZ,I;;KAAAA,I;AA4INA,IAAI,CAAC8C,SAAL,GAAiB;AACf5C,EAAAA,IAAI,EAAET,SAAS,CAACsD,MAAV,CAAiBC,UADR;AAEfrD,EAAAA,OAAO,EAAEF,SAAS,CAACwD,IAAV,CAAeD,UAFT;AAGfpD,EAAAA,cAAc,EAAEH,SAAS,CAACwD,IAAV,CAAeD;AAHhB,CAAjB;;AAMA,MAAME,eAAe,GAAIC,KAAD,KAAY;AAClCjD,EAAAA,IAAI,EAAEiD,KAAK,CAACC;AADsB,CAAZ,CAAxB;;AAGA,eAAe7D,UAAU,CACvBC,OAAO,CAAC0D,eAAD,EAAkB;AAAEvD,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAlB,CAAP,CAAsDI,IAAtD,CADuB,CAAzB","sourcesContent":["import { Fragment, useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport Button from \"components/Commons/Button/Button\";\nimport CartImage from \"assets/cart.svg\";\nimport \"./Cart.scss\";\nimport { getCart, removeCartItem } from \"store/actions/CartAction/CartAction\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/fontawesome-free-solid\";\nimport { calculateSubTotalPrice } from \"utils/BusinessUtils\";\n\nconst Cart = (props) => {\n  const { user, getCart, removeCartItem } = props;\n  const [subTotal, setSubTotal] = useState(0);\n  const [cartItemList, setCartItemList] = useState([]);\n  useEffect(() => {\n    async function fetchingCart(id) {\n      const cart = await getCart(id);\n      setCartItemList(cart);\n    }\n    if (user.isUserAuthenticated) {\n      fetchingCart(user.profile?.user_id);\n    }\n  }, []);\n  useEffect(() => {\n    var result = 0;\n    if (cartItemList?.cart) result = calculateSubTotalPrice(cartItemList.cart);\n    setSubTotal(result);\n  }, [cartItemList]);\n\n  const removeItemFromCart = (productId, code) => {\n    async function removeItem(userId, productId, code) {\n      await removeCartItem(userId, productId, code);\n      var result = 0;\n      if (cartItemList?.cart)\n        result = calculateSubTotalPrice(cartItemList.cart);\n      setSubTotal(result);\n    }\n    removeItem(user.profile?.user_id, productId, code);\n  };\n\n  return (\n    <Fragment>\n      <div className=\"cart-content-wrapper\">\n        <div className=\"cart-header\">\n          <div className=\"cart-title\" style={{ fontSize: 26 }}>\n            {cartItemList?.provider_name !== -1\n              ? cartItemList?.provider_name\n              : \"\"}\n          </div>\n        </div>\n        {!cartItemList?.cart ? (\n          <div\n            className=\"cart-body\"\n            style={{ justifyContent: \"center\", height: \"calc(100vh - 170px)\" }}\n          >\n            <img src={CartImage} alt=\"cart_image\" className=\"cart-image\" />\n            <span className=\"cart-image-description\">\n              Add items from a restaurant or store to start a new cart\n            </span>\n          </div>\n        ) : (\n          <div className=\"cart-body\">\n            {cartItemList?.cart?.map((cart, index) => (\n              <div className=\"cart-item-wrapper\" key={index}>\n                <span className=\"cart-item-quantity\">\n                  &times; {cart.quantity}\n                </span>\n                <img\n                  src={cart.product_image}\n                  alt=\"cart_item_image\"\n                  className=\"cart-item-image\"\n                />\n                <div\n                  className=\"cart-main-text-section\"\n                  onClick={() =>\n                    props.history.push(\n                      `/provider-detail/${cartItemList.provider_id}`\n                    )\n                  }\n                >\n                  <span className=\"cart-item-main-text\">\n                    {cart.product_name}\n                  </span>\n                  <span\n                    className=\"cart-item-sub-text\"\n                    style={{ alignSelf: \"flex-start\", fontSize: 12 }}\n                  >\n                    € {cart.product_price}\n                  </span>\n                  {cart?.product_options?.map((option, index) => (\n                    <Fragment key={index}>\n                      {option.label !== \"?\" && (\n                        <Fragment>\n                          <span className=\"cart-item-option-text-1\">{`${\n                            option.label\n                          } ${\n                            parseInt(option.price) === 0\n                              ? \"(FREE)\"\n                              : `(€ ${option.price})`\n                          }:`}</span>\n                          <span className=\"cart-item-option-text-2\">\n                            • {`${option.value} `}\n                          </span>\n                        </Fragment>\n                      )}\n                    </Fragment>\n                  ))}\n                  {cart.note && (\n                    <span className=\"cart-note\">• NOTE: {cart.note}</span>\n                  )}\n                </div>\n                <span className=\"cart-item-sub-text\">\n                  € {((cart.product_price || 0.0) * cart.quantity).toFixed(2)}\n                </span>\n                <span className=\"cart-surfix-pos-wrapper\">\n                  <FontAwesomeIcon\n                    className=\"cart-close-icon\"\n                    onClick={() =>\n                      removeItemFromCart(cart.product_id, cart.item_code)\n                    }\n                    icon={faTimes}\n                  />\n                </span>\n              </div>\n            ))}\n          </div>\n        )}\n        {cartItemList?.cart && (\n          <div className=\"cart-footer\">\n            <div className=\"cart-footer-sub-text\">Clear cart</div>\n            <Button\n              color={\"white\"}\n              bgColor={\"#101010\"}\n              justifyContent={\"center\"}\n              gap={\"10px\"}\n              width={\"100%\"}\n              fontSize={16}\n              height={45}\n              label={`Go to checkout • € ${parseFloat(subTotal).toFixed(2)}`}\n              onClick={() => {\n                props.history.push(`/order-checkout/${user.userCart?.user_id}`);\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nCart.propTypes = {\n  user: PropTypes.object.isRequired,\n  getCart: PropTypes.func.isRequired,\n  removeCartItem: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n});\nexport default withRouter(\n  connect(mapStateToProps, { getCart, removeCartItem })(Cart)\n);\n"]},"metadata":{},"sourceType":"module"}