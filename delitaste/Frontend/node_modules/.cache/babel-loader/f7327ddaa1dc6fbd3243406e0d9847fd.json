{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/OrderCheckout/OrderDetail/OrderDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport PDProductDetail from \"components/ProviderDetail/PDBody/PDProductDetail/PDProductDetail\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport ReactMapGl, { Source, Layer, Marker, Popup } from \"react-map-gl\";\nimport { setCurrentLocation } from \"store/actions/UserAction/UserAction\";\nimport { faBook, faCircle, faCreditCard, faMoneyBillAlt, faPencilAlt, faPhone, faSearch, faTimes, faUtensils } from \"@fortawesome/fontawesome-free-solid\";\nimport { faMapMarkedAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport \"./OrderDetail.scss\";\nimport \"components/OrderCheckout/OrderCheckout.scss\";\nimport \"style/Common.scss\";\nimport PaymentMomo from \"assets/pm_momo.png\";\nimport PaymentZalo from \"assets/pm_zalopay.png\";\nimport { getAddressBookAPI, getDeliveryFee } from \"store/actions/UserAction/UserAction\";\nimport { getProductListAPI } from \"store/actions/ProductAction/ProductAction\";\nimport { getOrderPromotionAPI } from \"store/actions/OrderAction/OrderAction\";\nimport SwitchSelector from \"react-switch-selector\";\nimport ScheduleOrder from \"./ScheduleOrder\";\nimport axios from \"axios\";\nimport ApplyPromotion from \"./ApplyPromotion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst optionSwitcher = [{\n  label: \"Delivery\",\n  value: 0,\n  selectedBackgroundColor: \"#890009\"\n}, {\n  label: \"Pickup\",\n  value: 1,\n  selectedBackgroundColor: \"#890009\"\n}];\n\nfunction OrderDetail(props) {\n  _s();\n\n  var _user$userCart3, _user$currentAddress, _user$currentAddress2, _user$currentAddress6, _user$location, _user$userCart4, _user$userCart4$cart, _user$userCart5, _user$userCart5$cart;\n\n  const {\n    arrivalCoordinates,\n    setArrivalCoordinate,\n    departureCoordinates,\n    setDepartureCoordinates,\n    deliveryOption,\n    setDeliveryOption\n  } = props;\n  const initialSelectedIndex = optionSwitcher.findIndex(({\n    value\n  }) => value === 0);\n  const [showPromotion, setShowPromotion] = useState(false);\n  const {\n    user,\n    getAddressBookAPI,\n    getDeliveryFee,\n    setOrderForm\n  } = props;\n  const [addressBook, setAddressBook] = useState([]);\n  const [currentPhone, setCurrentPhone] = useState(\"\");\n  const [deliveryAddress, setDeliveryAddress] = useState(\"\");\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(1);\n  const [orderScheduleTime, setOrderScheduleTime] = useState(\"\");\n  const [enableAddressEdit, setEnableAddressEdit] = useState(false);\n  const [showProductDetail, setShowProductDetail] = useState(false);\n  const [showScheduleTable, setShowScheduleTable] = useState(false);\n  const [showRemoveCartDialog, setShowRemoveCartDialog] = useState(false);\n  const [selectedProductDetail, setSelectedProductDetail] = useState();\n  const [promotion, setPromotion] = useState({});\n  const [location, setLocation] = useState([106.68057155417674, 10.768685473523648]);\n  useEffect(() => {\n    async function fetchPromotion(id) {\n      const result = await props.getOrderPromotionAPI(id);\n      setPromotion(result);\n    }\n\n    if (props.user.userCart.provider_id !== -1) fetchPromotion(props.user.userCart.provider_id);\n  }, [props.user.userCart.provider_id]);\n  useEffect(() => {\n    setOrderForm(prevState => ({ ...prevState,\n      schedule_time: orderScheduleTime\n    }));\n  }, [orderScheduleTime, setOrderForm]);\n  useEffect(() => {\n    setOrderForm(prevState => ({ ...prevState,\n      payment_method: selectedPaymentMethod\n    }));\n  }, [selectedPaymentMethod, setOrderForm]);\n  const selectedPMStyle = {\n    border: \"1px solid #d6d6d6\",\n    backgroundColor: \"#f5f5f5\"\n  };\n  useEffect(() => {\n    setLocation([user.currentAddress.longitude, user.currentAddress.latitude]);\n    setDeliveryAddress(user.currentAddress.address);\n    setOrderForm(prevState => ({ ...prevState,\n      delivery_address: user.currentAddress.address\n    }));\n  }, [user.currentAddress]);\n  useEffect(() => {\n    async function fetchingAddressBook() {\n      var addressBook = await getAddressBookAPI(props.match.params.uid);\n      setAddressBook(addressBook.address);\n      setCurrentPhone(addressBook.phone);\n      setOrderForm(prevState => ({ ...prevState,\n        customer_phone: addressBook.phone,\n        delivery_mode: deliveryOption === 0 ? 1 : 2\n      }));\n    }\n\n    fetchingAddressBook();\n  }, []);\n  useEffect(() => {\n    async function fetchDeliveryFee() {\n      var _user$userCart;\n\n      let latitudeDF = location[1];\n      let longitudeDF = location[0];\n      let providerIdDF = (_user$userCart = user.userCart) === null || _user$userCart === void 0 ? void 0 : _user$userCart.provider_id;\n      var deliveryFee = await getDeliveryFee(providerIdDF, longitudeDF, latitudeDF);\n      setOrderForm(prevState => ({ ...prevState,\n        delivery_fee: deliveryFee\n      }));\n      props.setDeliveryFee(deliveryFee);\n    }\n\n    if (user.userCart.provider_id !== -1) fetchDeliveryFee();\n  }, [location, user.userCart.provider_id]);\n\n  const onChange = newValue => {\n    setDeliveryOption(parseInt(newValue));\n  }; //map\n\n\n  const [routes, setRoutes] = useState([]);\n  const [viewport, setViewport] = useState({\n    width: \"100%\",\n    height: \"300px\",\n    latitude: 10.768685473523648,\n    longitude: 106.68057155417674,\n    zoom: 14\n  });\n  const dataOne = {\n    type: \"Feature\",\n    properties: {},\n    geometry: {\n      type: \"LineString\",\n      coordinates: routes\n    }\n  };\n  useEffect(() => {\n    async function fetchingRoutesAndDirections() {\n      const endpoint = `https://api.mapbox.com/directions/v5/mapbox/driving/${location[0]},${location[1]};${arrivalCoordinates[0]},${arrivalCoordinates[1]}?geometries=geojson&access_token=pk.eyJ1IjoiaG9hbmduYW0yNDMiLCJhIjoiY2t1dHJxdjdlMHg5ZDJwbnlpcmo0a2NnMiJ9.DUrlIOzvO6-kWt-VCKZW1g`;\n      const res = await axios.get(endpoint);\n      const points = res.data.routes[0].geometry.coordinates;\n      setViewport({ ...viewport,\n        latitude: (location[1] + arrivalCoordinates[1]) / 2,\n        longitude: (location[0] + arrivalCoordinates[0]) / 2\n      });\n      points.unshift(location);\n      points.push(arrivalCoordinates);\n      setRoutes(points);\n    }\n\n    fetchingRoutesAndDirections();\n  }, [arrivalCoordinates, location]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"oc-order-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"oc-od-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oc-od-main-text-head\",\n          onClick: () => {\n            var _user$userCart2;\n\n            return props.history.push(`/provider-detail/${(_user$userCart2 = user.userCart) === null || _user$userCart2 === void 0 ? void 0 : _user$userCart2.provider_id}`);\n          },\n          children: ((_user$userCart3 = user.userCart) === null || _user$userCart3 === void 0 ? void 0 : _user$userCart3.provider_name) !== -1 && user.userCart.provider_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-switcher-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(SwitchSelector, {\n            onChange: onChange,\n            options: optionSwitcher,\n            initialSelectedIndex: initialSelectedIndex,\n            backgroundColor: \"#E6E6E6\",\n            fontColor: \"#2C2C2C\",\n            selectedFontColor: \"#E6E6E6\",\n            fontSize: 13,\n            wrapperBorderRadius: 0,\n            optionBorderRadius: 0,\n            width: 80\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), deliveryOption === 1 && /*#__PURE__*/_jsxDEV(ReactMapGl, { ...viewport,\n          mapStyle: \"mapbox://styles/mapbox/streets-v11\",\n          onViewportChange: viewport => setViewport(viewport),\n          mapboxApiAccessToken: \"pk.eyJ1IjoiaG9hbmduYW0yNDMiLCJhIjoiY2t1dHJxdjdlMHg5ZDJwbnlpcmo0a2NnMiJ9.DUrlIOzvO6-kWt-VCKZW1g\",\n          children: [/*#__PURE__*/_jsxDEV(Source, {\n            id: \"polylineLayer\",\n            type: \"geojson\",\n            data: dataOne,\n            children: /*#__PURE__*/_jsxDEV(Layer, {\n              id: \"lineLayer\",\n              type: \"line\",\n              source: \"my-data\",\n              layout: {\n                \"line-join\": \"round\",\n                \"line-cap\": \"round\"\n              },\n              paint: {\n                \"line-color\": \"rgba(3, 170, 238, 0.5)\",\n                \"line-width\": 10\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Marker, {\n            latitude: location[1],\n            longitude: location[0],\n            offsetLeft: -20,\n            offsetTop: -30,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              className: \"provider-marker\",\n              icon: faCircle,\n              style: {\n                background: \"black\",\n                color: \"white\",\n                padding: \" 8px 8px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Marker, {\n            alt: \"marker\",\n            latitude: arrivalCoordinates[1],\n            longitude: arrivalCoordinates[0],\n            offsetLeft: -20,\n            offsetTop: -30,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              className: \"provider-marker\",\n              icon: faUtensils,\n              style: {\n                background: \"black\",\n                color: \"white\",\n                padding: \" 7px 8pxư\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), deliveryOption === 0 && /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-option\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              className: \"oc-od-small-icon\",\n              icon: faPhone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-address-text\",\n              style: {\n                fontWeight: 700\n              },\n              children: \"Phone Number :\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-address-text\",\n              children: currentPhone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-option\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              className: \"oc-od-small-icon\",\n              icon: faMapMarkedAlt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-address-text\",\n              style: {\n                fontWeight: 700\n              },\n              children: \"Delivery To :\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this), !enableAddressEdit ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-address-text\",\n              children: deliveryAddress\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"oc-od-edit-address\",\n              style: {\n                width: `${(deliveryAddress === null || deliveryAddress === void 0 ? void 0 : deliveryAddress.length) * 7}px`\n              },\n              value: deliveryAddress,\n              onChange: e => setDeliveryAddress(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }, this), enableAddressEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-btn-cancel-address\",\n              onClick: () => {\n                var _addressBook$;\n\n                setEnableAddressEdit(prev => !prev);\n                setDeliveryAddress((_addressBook$ = addressBook[0]) === null || _addressBook$ === void 0 ? void 0 : _addressBook$.address);\n                setOrderForm(prevState => ({ ...prevState,\n                  delivery_address: deliveryAddress\n                }));\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 19\n            }, this), !enableAddressEdit ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-btn-edit\",\n              onClick: () => setEnableAddressEdit(prev => !prev),\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faPencilAlt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"oc-od-edit-text-underline\",\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-btn-submit-address\",\n              onClick: () => {\n                setEnableAddressEdit(prev => !prev);\n                setOrderForm(prevState => ({ ...prevState,\n                  delivery_address: deliveryAddress\n                }));\n                props.setCurrentLocation(location[1], location[0], deliveryAddress);\n              },\n              children: \"Confirm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), enableAddressEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-book\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"oc-od-ab-text\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                className: \"oc-od-ab-icon\",\n                icon: faBook\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this), \"Recent address:\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"hb-sb-type-wrapper radio\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"oc-od-ab-selection\",\n                type: \"radio\",\n                name: \"addressBook\",\n                checked: ((_user$currentAddress = user.currentAddress) === null || _user$currentAddress === void 0 ? void 0 : _user$currentAddress.address) === deliveryAddress,\n                value: (_user$currentAddress2 = user.currentAddress) === null || _user$currentAddress2 === void 0 ? void 0 : _user$currentAddress2.address,\n                onChange: () => {\n                  var _user$currentAddress3, _user$currentAddress4, _user$currentAddress5;\n\n                  setDeliveryAddress((_user$currentAddress3 = user.currentAddress) === null || _user$currentAddress3 === void 0 ? void 0 : _user$currentAddress3.address);\n                  setLocation([parseFloat((_user$currentAddress4 = user.currentAddress) === null || _user$currentAddress4 === void 0 ? void 0 : _user$currentAddress4.longitude), parseFloat((_user$currentAddress5 = user.currentAddress) === null || _user$currentAddress5 === void 0 ? void 0 : _user$currentAddress5.latitude)]);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"hb-sb-label-radio option-box-radio-label\",\n                children: (_user$currentAddress6 = user.currentAddress) === null || _user$currentAddress6 === void 0 ? void 0 : _user$currentAddress6.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this), (_user$location = user.location) === null || _user$location === void 0 ? void 0 : _user$location.map((a, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"hb-sb-type-wrapper radio\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"oc-od-ab-selection\",\n                type: \"radio\",\n                name: \"addressBook\",\n                value: a.address,\n                checked: a.address === deliveryAddress,\n                onChange: () => {\n                  setDeliveryAddress(a.address);\n                  setLocation([parseFloat(a.longitude), parseFloat(a.latitude)]);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"hb-sb-label-radio option-box-radio-label\",\n                children: a.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-address-option\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-text\",\n            style: {\n              fontWeight: 700\n            },\n            children: \"Delivery method:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-radio\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"hb-sb-type-wrapper radio\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              defaultChecked: true,\n              type: \"radio\",\n              name: \"deliveryMethod\",\n              value: 1,\n              onChange: e => {\n                setOrderScheduleTime(\"\");\n                props.setOrderForm(prevState => ({ ...prevState,\n                  delivery_method: parseInt(e.target.value)\n                }));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hb-sb-label-radio option-box-radio-label\",\n              children: \"Standard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"hb-sb-type-wrapper radio\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"deliveryMethod\",\n              value: 2,\n              onChange: e => {\n                setShowScheduleTable(prev => !prev);\n                props.setOrderForm(prevState => ({ ...prevState,\n                  delivery_method: parseInt(e.target.value)\n                }));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hb-sb-label-radio option-box-radio-label\",\n              children: \"Schedule\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), orderScheduleTime && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"oc-od-schedule-time-text\",\n              children: `Your order will be submitted at ${orderScheduleTime}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-address-option\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-text\",\n            style: {\n              fontWeight: 700\n            },\n            children: \"Payment method:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-payment-method-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-pm-item\",\n            onClick: () => setSelectedPaymentMethod(1),\n            style: selectedPaymentMethod === 1 ? selectedPMStyle : {},\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-pm-image-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faMoneyBillAlt,\n                className: \"oc-od-pm-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"oc-od-pm-label-radio\",\n              children: \"By Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-pm-item\",\n            onClick: () => setSelectedPaymentMethod(2),\n            style: selectedPaymentMethod === 2 ? selectedPMStyle : {},\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-pm-image-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: PaymentMomo,\n                className: \"oc-od-pm-img\",\n                alt: \"payment_image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"oc-od-pm-label-radio\",\n              children: \"Momo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-pm-item\",\n            onClick: () => setSelectedPaymentMethod(3),\n            style: selectedPaymentMethod === 3 ? selectedPMStyle : {},\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-pm-image-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: PaymentZalo,\n                className: \"oc-od-pm-img\",\n                alt: \"payment_image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"oc-od-pm-label-radio\",\n              children: \"Zalo Pay\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-pm-item\",\n            onClick: () => setSelectedPaymentMethod(4),\n            style: selectedPaymentMethod === 4 ? selectedPMStyle : {},\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-pm-image-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faCreditCard,\n                className: \"oc-od-pm-icon-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"oc-od-pm-label-radio\",\n              children: \"Credit/Debit card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-address-option\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-text\",\n            style: {\n              fontWeight: 700\n            },\n            children: \"Add promotion code:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-promotion-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-promotion-input-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-popup-button\",\n              style: {\n                fontSize: 13,\n                width: 180,\n                gap: 10\n              },\n              onClick: () => {\n                promotion && setShowPromotion(true);\n              },\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faSearch\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Apply Promotion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"oc-od-items-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-address-option\",\n            style: {\n              fontWeight: 700,\n              fontSize: 14,\n              marginTop: 10\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"oc-od-address-text\",\n              children: [\"Cart items\", \" \", (user === null || user === void 0 ? void 0 : (_user$userCart4 = user.userCart) === null || _user$userCart4 === void 0 ? void 0 : (_user$userCart4$cart = _user$userCart4.cart) === null || _user$userCart4$cart === void 0 ? void 0 : _user$userCart4$cart.length) !== 0 && `• ${user.userCart.cart.length} items`, \" \", \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"oc-od-item-wrapper\",\n            children: user === null || user === void 0 ? void 0 : (_user$userCart5 = user.userCart) === null || _user$userCart5 === void 0 ? void 0 : (_user$userCart5$cart = _user$userCart5.cart) === null || _user$userCart5$cart === void 0 ? void 0 : _user$userCart5$cart.map(order => {\n              var _order$product_option;\n\n              return /*#__PURE__*/_jsxDEV(Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"oc-od-item-row\",\n                  onClick: () => {\n                    setShowProductDetail(true);\n                    setSelectedProductDetail(order);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"oc-od-item-number\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"oc-od-item-number-inner\",\n                      children: order.quantity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 546,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 544,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"oc-od-item-img\",\n                    style: {\n                      objectFit: \"cover\"\n                    },\n                    src: order.product_image,\n                    alt: \"product_img\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"oc-od-item-main-text\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"oc-od-mt-1\",\n                      style: {\n                        fontWeight: 700\n                      },\n                      children: order.product_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 558,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"oc-od-mt-2\",\n                      children: [\"\\u20AC \", order.product_price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 561,\n                      columnNumber: 23\n                    }, this), order.note && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"oc-od-cart-note\",\n                      children: [\"Special instruction: \", order.note]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 25\n                    }, this), order === null || order === void 0 ? void 0 : (_order$product_option = order.product_options) === null || _order$product_option === void 0 ? void 0 : _order$product_option.map((option, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"oc-od-mt-ao-wrapper\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"oc-od-cart-note\",\n                        children: `+ ${option.option_name} ${parseInt(option.price) === 0 ? \"(FREE)\" : `($${option.price})`}:`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 571,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"oc-od-cart-note\",\n                        children: ` ${option.value} `\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 578,\n                        columnNumber: 27\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 570,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 557,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"oc-od-item-sub-text\",\n                    children: [\"$\", \" \", (parseFloat(order.product_price) * parseFloat(order.quantity)).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 584,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"cart-surfix-pos-wrapper\",\n                    children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                      className: \"cart-close-icon\",\n                      icon: faTimes,\n                      onClick: e => {\n                        e.stopPropagation();\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 592,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 591,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 19\n                }, this)\n              }, order.product_id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        openModal: showProductDetail,\n        closeModal: () => {\n          setShowProductDetail(false);\n        },\n        title: \"Product Detail (Order Checkout)\",\n        width: 35,\n        height: 600,\n        heightAuto: true,\n        padding: \"0% 0%\",\n        hideHeader: true,\n        children: /*#__PURE__*/_jsxDEV(PDProductDetail, {\n          pushReload: true,\n          buttonTitle: \"Update your cart\",\n          setShowRemoveCartDialog: setShowRemoveCartDialog,\n          setShowProductDetail: setShowProductDetail,\n          productItem: selectedProductDetail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        openModal: showScheduleTable,\n        closeModal: () => {\n          setShowScheduleTable(false);\n        },\n        title: \"Schedule\",\n        width: 25,\n        height: 250,\n        padding: \"0% 0%\",\n        transparent: \"30%\",\n        hideHeader: true,\n        children: /*#__PURE__*/_jsxDEV(ScheduleOrder, {\n          setOrderScheduleTime: setOrderScheduleTime,\n          closeModal: () => {\n            setShowScheduleTable(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        openModal: showPromotion,\n        closeModal: () => {\n          setShowPromotion(false);\n        },\n        title: \"Promotion\",\n        width: 35,\n        height: 260,\n        padding: \"0% 0%\",\n        transparent: \"30%\",\n        hideHeader: true,\n        children: /*#__PURE__*/_jsxDEV(ApplyPromotion, {\n          promotions: promotion,\n          orderForm: props.orderForm,\n          setOrderForm: props.setOrderForm,\n          closeModal: () => {\n            setShowPromotion(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderDetail, \"L0yjJvle61XSg/fLPnlY0uCaB1I=\");\n\n_c = OrderDetail;\nOrderDetail.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  getProductListAPI: PropTypes.func.isRequired,\n  getAddressBookAPI: PropTypes.func.isRequired,\n  getDeliveryFee: PropTypes.func.isRequired,\n  setCurrentLocation: PropTypes.func.isRequired,\n  getOrderPromotionAPI: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer,\n  product: state.ProductReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  getProductListAPI,\n  getAddressBookAPI,\n  getDeliveryFee,\n  setCurrentLocation,\n  getOrderPromotionAPI\n})(OrderDetail));\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderDetail\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/OrderCheckout/OrderDetail/OrderDetail.js"],"names":["React","Fragment","useState","useEffect","withRouter","connect","PropTypes","Modal","PDProductDetail","FontAwesomeIcon","ReactMapGl","Source","Layer","Marker","Popup","setCurrentLocation","faBook","faCircle","faCreditCard","faMoneyBillAlt","faPencilAlt","faPhone","faSearch","faTimes","faUtensils","faMapMarkedAlt","PaymentMomo","PaymentZalo","getAddressBookAPI","getDeliveryFee","getProductListAPI","getOrderPromotionAPI","SwitchSelector","ScheduleOrder","axios","ApplyPromotion","optionSwitcher","label","value","selectedBackgroundColor","OrderDetail","props","arrivalCoordinates","setArrivalCoordinate","departureCoordinates","setDepartureCoordinates","deliveryOption","setDeliveryOption","initialSelectedIndex","findIndex","showPromotion","setShowPromotion","user","setOrderForm","addressBook","setAddressBook","currentPhone","setCurrentPhone","deliveryAddress","setDeliveryAddress","selectedPaymentMethod","setSelectedPaymentMethod","orderScheduleTime","setOrderScheduleTime","enableAddressEdit","setEnableAddressEdit","showProductDetail","setShowProductDetail","showScheduleTable","setShowScheduleTable","showRemoveCartDialog","setShowRemoveCartDialog","selectedProductDetail","setSelectedProductDetail","promotion","setPromotion","location","setLocation","fetchPromotion","id","result","userCart","provider_id","prevState","schedule_time","payment_method","selectedPMStyle","border","backgroundColor","currentAddress","longitude","latitude","address","delivery_address","fetchingAddressBook","match","params","uid","phone","customer_phone","delivery_mode","fetchDeliveryFee","latitudeDF","longitudeDF","providerIdDF","deliveryFee","delivery_fee","setDeliveryFee","onChange","newValue","parseInt","routes","setRoutes","viewport","setViewport","width","height","zoom","dataOne","type","properties","geometry","coordinates","fetchingRoutesAndDirections","endpoint","res","get","points","data","unshift","push","history","provider_name","background","color","padding","fontWeight","length","e","target","prev","parseFloat","map","a","index","delivery_method","fontSize","gap","marginTop","cart","order","quantity","objectFit","product_image","product_name","product_price","note","product_options","option","option_name","price","toFixed","stopPropagation","product_id","orderForm","propTypes","object","isRequired","product","func","mapStateToProps","state","UserReducer","ProductReducer"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport PDProductDetail from \"components/ProviderDetail/PDBody/PDProductDetail/PDProductDetail\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport ReactMapGl, { Source, Layer, Marker, Popup } from \"react-map-gl\";\nimport { setCurrentLocation } from \"store/actions/UserAction/UserAction\";\nimport {\n  faBook,\n  faCircle,\n  faCreditCard,\n  faMoneyBillAlt,\n  faPencilAlt,\n  faPhone,\n  faSearch,\n  faTimes,\n  faUtensils,\n} from \"@fortawesome/fontawesome-free-solid\";\nimport { faMapMarkedAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport \"./OrderDetail.scss\";\nimport \"components/OrderCheckout/OrderCheckout.scss\";\nimport \"style/Common.scss\";\nimport PaymentMomo from \"assets/pm_momo.png\";\nimport PaymentZalo from \"assets/pm_zalopay.png\";\nimport {\n  getAddressBookAPI,\n  getDeliveryFee,\n} from \"store/actions/UserAction/UserAction\";\nimport { getProductListAPI } from \"store/actions/ProductAction/ProductAction\";\nimport { getOrderPromotionAPI } from \"store/actions/OrderAction/OrderAction\";\nimport SwitchSelector from \"react-switch-selector\";\nimport ScheduleOrder from \"./ScheduleOrder\";\nimport axios from \"axios\";\nimport ApplyPromotion from \"./ApplyPromotion\";\n\nconst optionSwitcher = [\n  {\n    label: \"Delivery\",\n    value: 0,\n    selectedBackgroundColor: \"#890009\",\n  },\n  {\n    label: \"Pickup\",\n    value: 1,\n    selectedBackgroundColor: \"#890009\",\n  },\n];\n\nfunction OrderDetail(props) {\n  const {\n    arrivalCoordinates,\n    setArrivalCoordinate,\n    departureCoordinates,\n    setDepartureCoordinates,\n    deliveryOption,\n    setDeliveryOption,\n  } = props;\n  const initialSelectedIndex = optionSwitcher.findIndex(\n    ({ value }) => value === 0\n  );\n  const [showPromotion, setShowPromotion] = useState(false);\n  const { user, getAddressBookAPI, getDeliveryFee, setOrderForm } = props;\n  const [addressBook, setAddressBook] = useState([]);\n  const [currentPhone, setCurrentPhone] = useState(\"\");\n  const [deliveryAddress, setDeliveryAddress] = useState(\"\");\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(1);\n  const [orderScheduleTime, setOrderScheduleTime] = useState(\"\");\n  const [enableAddressEdit, setEnableAddressEdit] = useState(false);\n  const [showProductDetail, setShowProductDetail] = useState(false);\n  const [showScheduleTable, setShowScheduleTable] = useState(false);\n  const [showRemoveCartDialog, setShowRemoveCartDialog] = useState(false);\n  const [selectedProductDetail, setSelectedProductDetail] = useState();\n  const [promotion, setPromotion] = useState({});\n  const [location, setLocation] = useState([\n    106.68057155417674, 10.768685473523648,\n  ]);\n  useEffect(() => {\n    async function fetchPromotion(id) {\n      const result = await props.getOrderPromotionAPI(id);\n      setPromotion(result);\n    }\n    if (props.user.userCart.provider_id !== -1)\n      fetchPromotion(props.user.userCart.provider_id);\n  }, [props.user.userCart.provider_id]);\n\n  useEffect(() => {\n    setOrderForm((prevState) => ({\n      ...prevState,\n      schedule_time: orderScheduleTime,\n    }));\n  }, [orderScheduleTime, setOrderForm]);\n\n  useEffect(() => {\n    setOrderForm((prevState) => ({\n      ...prevState,\n      payment_method: selectedPaymentMethod,\n    }));\n  }, [selectedPaymentMethod, setOrderForm]);\n\n  const selectedPMStyle = {\n    border: \"1px solid #d6d6d6\",\n    backgroundColor: \"#f5f5f5\",\n  };\n\n  useEffect(() => {\n    setLocation([user.currentAddress.longitude, user.currentAddress.latitude]);\n    setDeliveryAddress(user.currentAddress.address);\n    setOrderForm((prevState) => ({\n      ...prevState,\n      delivery_address: user.currentAddress.address,\n    }));\n  }, [user.currentAddress]);\n\n  useEffect(() => {\n    async function fetchingAddressBook() {\n      var addressBook = await getAddressBookAPI(props.match.params.uid);\n      setAddressBook(addressBook.address);\n      setCurrentPhone(addressBook.phone);\n      setOrderForm((prevState) => ({\n        ...prevState,\n        customer_phone: addressBook.phone,\n        delivery_mode: deliveryOption === 0 ? 1 : 2,\n      }));\n    }\n    fetchingAddressBook();\n  }, []);\n\n  useEffect(() => {\n    async function fetchDeliveryFee() {\n      let latitudeDF = location[1];\n      let longitudeDF = location[0];\n      let providerIdDF = user.userCart?.provider_id;\n      var deliveryFee = await getDeliveryFee(\n        providerIdDF,\n        longitudeDF,\n        latitudeDF\n      );\n      setOrderForm((prevState) => ({\n        ...prevState,\n        delivery_fee: deliveryFee,\n      }));\n      props.setDeliveryFee(deliveryFee);\n    }\n    if (user.userCart.provider_id !== -1) fetchDeliveryFee();\n  }, [location, user.userCart.provider_id]);\n\n  const onChange = (newValue) => {\n    setDeliveryOption(parseInt(newValue));\n  }; //map\n  const [routes, setRoutes] = useState([]);\n  const [viewport, setViewport] = useState({\n    width: \"100%\",\n    height: \"300px\",\n    latitude: 10.768685473523648,\n    longitude: 106.68057155417674,\n    zoom: 14,\n  });\n  const dataOne = {\n    type: \"Feature\",\n    properties: {},\n    geometry: {\n      type: \"LineString\",\n      coordinates: routes,\n    },\n  };\n  useEffect(() => {\n    async function fetchingRoutesAndDirections() {\n      const endpoint = `https://api.mapbox.com/directions/v5/mapbox/driving/${location[0]},${location[1]};${arrivalCoordinates[0]},${arrivalCoordinates[1]}?geometries=geojson&access_token=pk.eyJ1IjoiaG9hbmduYW0yNDMiLCJhIjoiY2t1dHJxdjdlMHg5ZDJwbnlpcmo0a2NnMiJ9.DUrlIOzvO6-kWt-VCKZW1g`;\n      const res = await axios.get(endpoint);\n      const points = res.data.routes[0].geometry.coordinates;\n      setViewport({\n        ...viewport,\n        latitude: (location[1] + arrivalCoordinates[1]) / 2,\n        longitude: (location[0] + arrivalCoordinates[0]) / 2,\n      });\n      points.unshift(location);\n      points.push(arrivalCoordinates);\n      setRoutes(points);\n    }\n    fetchingRoutesAndDirections();\n  }, [arrivalCoordinates, location]);\n  return (\n    <Fragment>\n      <div className=\"oc-order-detail\">\n        <div className=\"oc-od-container\">\n          <span\n            className=\"oc-od-main-text-head\"\n            onClick={() =>\n              props.history.push(\n                `/provider-detail/${user.userCart?.provider_id}`\n              )\n            }\n          >\n            {user.userCart?.provider_name !== -1 && user.userCart.provider_name}\n          </span>\n          <div className=\"oc-od-switcher-wrapper\">\n            <SwitchSelector\n              onChange={onChange}\n              options={optionSwitcher}\n              initialSelectedIndex={initialSelectedIndex}\n              backgroundColor={\"#E6E6E6\"}\n              fontColor={\"#2C2C2C\"}\n              selectedFontColor={\"#E6E6E6\"}\n              fontSize={13}\n              wrapperBorderRadius={0}\n              optionBorderRadius={0}\n              width={80}\n            />\n          </div>\n          {deliveryOption === 1 && (\n            <ReactMapGl\n              {...viewport}\n              mapStyle=\"mapbox://styles/mapbox/streets-v11\"\n              onViewportChange={(viewport) => setViewport(viewport)}\n              mapboxApiAccessToken=\"pk.eyJ1IjoiaG9hbmduYW0yNDMiLCJhIjoiY2t1dHJxdjdlMHg5ZDJwbnlpcmo0a2NnMiJ9.DUrlIOzvO6-kWt-VCKZW1g\"\n            >\n              <Source id=\"polylineLayer\" type=\"geojson\" data={dataOne}>\n                <Layer\n                  id=\"lineLayer\"\n                  type=\"line\"\n                  source=\"my-data\"\n                  layout={{\n                    \"line-join\": \"round\",\n                    \"line-cap\": \"round\",\n                  }}\n                  paint={{\n                    \"line-color\": \"rgba(3, 170, 238, 0.5)\",\n                    \"line-width\": 10,\n                  }}\n                />\n              </Source>\n              <Marker\n                latitude={location[1]}\n                longitude={location[0]}\n                offsetLeft={-20}\n                offsetTop={-30}\n              >\n                <FontAwesomeIcon\n                  className=\"provider-marker\"\n                  icon={faCircle}\n                  style={{\n                    background: \"black\",\n                    color: \"white\",\n                    padding: \" 8px 8px\",\n                  }}\n                />\n              </Marker>\n              <Marker\n                alt=\"marker\"\n                latitude={arrivalCoordinates[1]}\n                longitude={arrivalCoordinates[0]}\n                offsetLeft={-20}\n                offsetTop={-30}\n              >\n                <FontAwesomeIcon\n                  className=\"provider-marker\"\n                  icon={faUtensils}\n                  style={{\n                    background: \"black\",\n                    color: \"white\",\n                    padding: \" 7px 8pxư\",\n                  }}\n                />\n              </Marker>\n            </ReactMapGl>\n          )}\n          {deliveryOption === 0 && (\n            <Fragment>\n              <div className=\"oc-od-address-option\">\n                <FontAwesomeIcon className=\"oc-od-small-icon\" icon={faPhone} />\n                <div className=\"oc-od-address-text\" style={{ fontWeight: 700 }}>\n                  Phone Number :\n                </div>\n                <div className=\"oc-od-address-text\">{currentPhone}</div>\n              </div>\n              <div className=\"oc-od-address-option\">\n                <FontAwesomeIcon\n                  className=\"oc-od-small-icon\"\n                  icon={faMapMarkedAlt}\n                />\n                <div className=\"oc-od-address-text\" style={{ fontWeight: 700 }}>\n                  Delivery To :\n                </div>\n                {!enableAddressEdit ? (\n                  <div className=\"oc-od-address-text\">{deliveryAddress}</div>\n                ) : (\n                  <input\n                    className=\"oc-od-edit-address\"\n                    style={{ width: `${deliveryAddress?.length * 7}px` }}\n                    value={deliveryAddress}\n                    onChange={(e) => setDeliveryAddress(e.target.value)}\n                  />\n                )}\n                {enableAddressEdit && (\n                  <div\n                    className=\"oc-od-btn-cancel-address\"\n                    onClick={() => {\n                      setEnableAddressEdit((prev) => !prev);\n                      setDeliveryAddress(addressBook[0]?.address);\n                      setOrderForm((prevState) => ({\n                        ...prevState,\n                        delivery_address: deliveryAddress,\n                      }));\n                    }}\n                  >\n                    Cancel\n                  </div>\n                )}\n                {!enableAddressEdit ? (\n                  <div\n                    className=\"oc-od-btn-edit\"\n                    onClick={() => setEnableAddressEdit((prev) => !prev)}\n                  >\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                    <span className=\"oc-od-edit-text-underline\">Edit</span>\n                  </div>\n                ) : (\n                  <div\n                    className=\"oc-od-btn-submit-address\"\n                    onClick={() => {\n                      setEnableAddressEdit((prev) => !prev);\n                      setOrderForm((prevState) => ({\n                        ...prevState,\n                        delivery_address: deliveryAddress,\n                      }));\n                      props.setCurrentLocation(\n                        location[1],\n                        location[0],\n                        deliveryAddress\n                      );\n                    }}\n                  >\n                    Confirm\n                  </div>\n                )}\n              </div>\n              {enableAddressEdit && (\n                <div className=\"oc-od-address-book\">\n                  <span className=\"oc-od-ab-text\">\n                    <FontAwesomeIcon className=\"oc-od-ab-icon\" icon={faBook} />\n                    Recent address:\n                  </span>\n                  <label className=\"hb-sb-type-wrapper radio\">\n                    <input\n                      className=\"oc-od-ab-selection\"\n                      type=\"radio\"\n                      name=\"addressBook\"\n                      checked={user.currentAddress?.address === deliveryAddress}\n                      value={user.currentAddress?.address}\n                      onChange={() => {\n                        setDeliveryAddress(user.currentAddress?.address);\n                        setLocation([\n                          parseFloat(user.currentAddress?.longitude),\n                          parseFloat(user.currentAddress?.latitude),\n                        ]);\n                      }}\n                    />\n                    <span className=\"hb-sb-label-radio option-box-radio-label\">\n                      {user.currentAddress?.address}\n                    </span>\n                  </label>\n                  {user.location?.map((a, index) => (\n                    <label className=\"hb-sb-type-wrapper radio\" key={index}>\n                      <input\n                        className=\"oc-od-ab-selection\"\n                        type=\"radio\"\n                        name=\"addressBook\"\n                        value={a.address}\n                        checked={a.address === deliveryAddress}\n                        onChange={() => {\n                          setDeliveryAddress(a.address);\n                          setLocation([\n                            parseFloat(a.longitude),\n                            parseFloat(a.latitude),\n                          ]);\n                        }}\n                      />\n                      <span className=\"hb-sb-label-radio option-box-radio-label\">\n                        {a.address}\n                      </span>\n                    </label>\n                  ))}\n                </div>\n              )}\n            </Fragment>\n          )}\n\n          <div className=\"oc-od-address-option\">\n            <div className=\"oc-od-address-text\" style={{ fontWeight: 700 }}>\n              Delivery method:\n            </div>\n          </div>\n          <div className=\"oc-od-radio\">\n            <label className=\"hb-sb-type-wrapper radio\">\n              <input\n                defaultChecked\n                type=\"radio\"\n                name=\"deliveryMethod\"\n                value={1}\n                onChange={(e) => {\n                  setOrderScheduleTime(\"\");\n                  props.setOrderForm((prevState) => ({\n                    ...prevState,\n                    delivery_method: parseInt(e.target.value),\n                  }));\n                }}\n              />\n              <span className=\"hb-sb-label-radio option-box-radio-label\">\n                Standard\n              </span>\n            </label>\n            <label className=\"hb-sb-type-wrapper radio\">\n              <input\n                type=\"radio\"\n                name=\"deliveryMethod\"\n                value={2}\n                onChange={(e) => {\n                  setShowScheduleTable((prev) => !prev);\n                  props.setOrderForm((prevState) => ({\n                    ...prevState,\n                    delivery_method: parseInt(e.target.value),\n                  }));\n                }}\n              />\n              <span className=\"hb-sb-label-radio option-box-radio-label\">\n                Schedule\n              </span>\n              {orderScheduleTime && (\n                <span className=\"oc-od-schedule-time-text\">\n                  {`Your order will be submitted at ${orderScheduleTime}`}\n                </span>\n              )}\n            </label>\n          </div>\n          <div className=\"oc-od-address-option\">\n            <div className=\"oc-od-address-text\" style={{ fontWeight: 700 }}>\n              Payment method:\n            </div>\n          </div>\n          <div className=\"oc-od-payment-method-container\">\n            <div\n              className=\"oc-od-pm-item\"\n              onClick={() => setSelectedPaymentMethod(1)}\n              style={selectedPaymentMethod === 1 ? selectedPMStyle : {}}\n            >\n              <div className=\"oc-od-pm-image-wrapper\">\n                <FontAwesomeIcon\n                  icon={faMoneyBillAlt}\n                  className=\"oc-od-pm-icon\"\n                />\n              </div>\n              <span className=\"oc-od-pm-label-radio\">By Cash</span>\n            </div>\n            <div\n              className=\"oc-od-pm-item\"\n              onClick={() => setSelectedPaymentMethod(2)}\n              style={selectedPaymentMethod === 2 ? selectedPMStyle : {}}\n            >\n              <div className=\"oc-od-pm-image-wrapper\">\n                <img\n                  src={PaymentMomo}\n                  className=\"oc-od-pm-img\"\n                  alt=\"payment_image\"\n                />\n              </div>\n              <span className=\"oc-od-pm-label-radio\">Momo</span>\n            </div>\n            <div\n              className=\"oc-od-pm-item\"\n              onClick={() => setSelectedPaymentMethod(3)}\n              style={selectedPaymentMethod === 3 ? selectedPMStyle : {}}\n            >\n              <div className=\"oc-od-pm-image-wrapper\">\n                <img\n                  src={PaymentZalo}\n                  className=\"oc-od-pm-img\"\n                  alt=\"payment_image\"\n                />\n              </div>\n              <span className=\"oc-od-pm-label-radio\">Zalo Pay</span>\n            </div>\n            <div\n              className=\"oc-od-pm-item\"\n              onClick={() => setSelectedPaymentMethod(4)}\n              style={selectedPaymentMethod === 4 ? selectedPMStyle : {}}\n            >\n              <div className=\"oc-od-pm-image-wrapper\">\n                <FontAwesomeIcon\n                  icon={faCreditCard}\n                  className=\"oc-od-pm-icon-2\"\n                />\n              </div>\n              <span className=\"oc-od-pm-label-radio\">Credit/Debit card</span>\n            </div>\n          </div>\n\n          <div className=\"oc-od-address-option\">\n            <div className=\"oc-od-address-text\" style={{ fontWeight: 700 }}>\n              Add promotion code:\n            </div>\n          </div>\n          <div className=\"oc-od-promotion-wrapper\">\n            <div className=\"oc-od-promotion-input-wrapper\">\n              <div\n                className=\"oc-od-popup-button\"\n                style={{ fontSize: 13, width: 180, gap: 10 }}\n                onClick={() => {\n                  promotion && setShowPromotion(true);\n                }}\n              >\n                <FontAwesomeIcon icon={faSearch} />\n                <span>Apply Promotion</span>\n              </div>\n            </div>\n          </div>\n          <div className=\"oc-od-items-container\">\n            <div\n              className=\"oc-od-address-option\"\n              style={{\n                fontWeight: 700,\n                fontSize: 14,\n                marginTop: 10,\n              }}\n            >\n              <div className=\"oc-od-address-text\">\n                Cart items{\" \"}\n                {user?.userCart?.cart?.length !== 0 &&\n                  `• ${user.userCart.cart.length} items`}{\" \"}\n                :\n              </div>\n            </div>\n            <div className=\"oc-od-item-wrapper\">\n              {user?.userCart?.cart?.map((order) => (\n                <Fragment key={order.product_id}>\n                  <div\n                    className=\"oc-od-item-row\"\n                    onClick={() => {\n                      setShowProductDetail(true);\n                      setSelectedProductDetail(order);\n                    }}\n                  >\n                    <div className=\"oc-od-item-number\">\n                      {\" \"}\n                      <span className=\"oc-od-item-number-inner\">\n                        {order.quantity}\n                      </span>\n                    </div>\n\n                    <img\n                      className=\"oc-od-item-img\"\n                      style={{ objectFit: \"cover\" }}\n                      src={order.product_image}\n                      alt={\"product_img\"}\n                    />\n                    <div className=\"oc-od-item-main-text\">\n                      <span className=\"oc-od-mt-1\" style={{ fontWeight: 700 }}>\n                        {order.product_name}\n                      </span>\n                      <span className=\"oc-od-mt-2\">\n                        € {order.product_price}\n                      </span>\n                      {order.note && (\n                        <span className=\"oc-od-cart-note\">\n                          Special instruction: {order.note}\n                        </span>\n                      )}\n                      {order?.product_options?.map((option, index) => (\n                        <div className=\"oc-od-mt-ao-wrapper\" key={index}>\n                          <span className=\"oc-od-cart-note\">{`+ ${\n                            option.option_name\n                          } ${\n                            parseInt(option.price) === 0\n                              ? \"(FREE)\"\n                              : `($${option.price})`\n                          }:`}</span>\n                          <span className=\"oc-od-cart-note\">\n                            {` ${option.value} `}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                    <div className=\"oc-od-item-sub-text\">\n                      ${\" \"}\n                      {(\n                        parseFloat(order.product_price) *\n                        parseFloat(order.quantity)\n                      ).toFixed(2)}\n                    </div>\n                    <span className=\"cart-surfix-pos-wrapper\">\n                      <FontAwesomeIcon\n                        className=\"cart-close-icon\"\n                        icon={faTimes}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                        }}\n                      />\n                    </span>\n                  </div>\n                </Fragment>\n              ))}\n            </div>\n          </div>\n        </div>\n        <Modal\n          openModal={showProductDetail}\n          closeModal={() => {\n            setShowProductDetail(false);\n          }}\n          title={\"Product Detail (Order Checkout)\"}\n          width={35}\n          height={600}\n          heightAuto={true}\n          padding=\"0% 0%\"\n          hideHeader={true}\n        >\n          <PDProductDetail\n            pushReload={true}\n            buttonTitle={\"Update your cart\"}\n            setShowRemoveCartDialog={setShowRemoveCartDialog}\n            setShowProductDetail={setShowProductDetail}\n            productItem={selectedProductDetail}\n          />\n        </Modal>\n\n        <Modal\n          openModal={showScheduleTable}\n          closeModal={() => {\n            setShowScheduleTable(false);\n          }}\n          title={\"Schedule\"}\n          width={25}\n          height={250}\n          padding=\"0% 0%\"\n          transparent=\"30%\"\n          hideHeader={true}\n        >\n          <ScheduleOrder\n            setOrderScheduleTime={setOrderScheduleTime}\n            closeModal={() => {\n              setShowScheduleTable(false);\n            }}\n          />\n        </Modal>\n\n        <Modal\n          openModal={showPromotion}\n          closeModal={() => {\n            setShowPromotion(false);\n          }}\n          title={\"Promotion\"}\n          width={35}\n          height={260}\n          padding=\"0% 0%\"\n          transparent=\"30%\"\n          hideHeader={true}\n        >\n          <ApplyPromotion\n            promotions={promotion}\n            orderForm={props.orderForm}\n            setOrderForm={props.setOrderForm}\n            closeModal={() => {\n              setShowPromotion(false);\n            }}\n          ></ApplyPromotion>\n        </Modal>\n      </div>\n    </Fragment>\n  );\n}\n\nOrderDetail.propTypes = {\n  user: PropTypes.object.isRequired,\n  product: PropTypes.object.isRequired,\n  getProductListAPI: PropTypes.func.isRequired,\n  getAddressBookAPI: PropTypes.func.isRequired,\n  getDeliveryFee: PropTypes.func.isRequired,\n  setCurrentLocation: PropTypes.func.isRequired,\n  getOrderPromotionAPI: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n  product: state.ProductReducer,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, {\n    getProductListAPI,\n    getAddressBookAPI,\n    getDeliveryFee,\n    setCurrentLocation,\n    getOrderPromotionAPI,\n  })(OrderDetail)\n);\n"]},"metadata":{},"sourceType":"module"}